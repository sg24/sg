{"ast":null,"code":"import _getIterator from \"@babel/runtime-corejs2/core-js/get-iterator\";\nimport _toConsumableArray from \"@babel/runtime-corejs2/helpers/esm/toConsumableArray\";\nimport _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar __jsx = React.createElement;\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { withRouter } from 'next/router';\ntrue ? require('pepjs') : null;\nimport Post from '../react/index/components/Main/Post/Post';\nimport Loader from '../react/index/components/UI/Loader/Loader';\nimport NoAcc from '../react/index/components/Main/NoAcc/NoAcc';\nimport { updateObject } from '../react/index/shared/utility';\nimport * as actions from '../react/index/store/actions/index';\nimport App from '../react/index/App';\nvar IS_ANIMATED = true;\nvar limit = 0;\n\nif (true) {\n  if (window.innerHeight >= 1200) {\n    limit = 18;\n  } else if (window.innerHeight >= 900) {\n    limit = 12;\n  } else if (window.innerHeight >= 500) {\n    limit = 9;\n  } else {\n    limit = 6;\n  }\n}\n\nvar Posts =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Posts, _Component);\n\n  _createClass(Posts, null, [{\n    key: \"getInitialProps\",\n    value: function getInitialProps(props) {\n      var _props$ctx, store, isServer;\n\n      return _regeneratorRuntime.async(function getInitialProps$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _props$ctx = props.ctx, store = _props$ctx.store, isServer = _props$ctx.isServer;\n              store.dispatch(actions.fetchCntReset());\n\n              if (!store.getState().cnt.cnts) {\n                store.dispatch(actions.fetchCntInit(null, 'post', limit, 0, 0));\n                store.dispatch(actions.changeTagsPath('/post'));\n                store.dispatch(actions.fetchTrdInit(null));\n              }\n\n              return _context.abrupt(\"return\", {\n                cnts: store.getState().cnt.cnts\n              });\n\n            case 4:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      });\n    }\n  }]);\n\n  function Posts(props) {\n    var _this;\n\n    _classCallCheck(this, Posts);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Posts).call(this, props));\n\n    _defineProperty(_assertThisInitialized(_this), \"onScroll\", function () {\n      if (true) {\n        if (document.documentElement.scrollHeight - document.documentElement.scrollTop === document.documentElement.clientHeight) {\n          _this.props.onFetchCnt(_this.props.userID, 'post', _this.state.fetchLimit, _this.props.skipCnt + _this.state.fetchLimit, _this.props.cntTotal);\n        }\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"showUserOptHandler\", function (id) {\n      if (_this.state.cntOpt && _this.state.cntOpt.id === id) {\n        _this.setState(function (prevState, props) {\n          return {\n            cntOpt: updateObject(prevState.cntOpt, {\n              visible: !prevState.cntOpt.visible\n            })\n          };\n        });\n\n        return;\n      }\n\n      var newCntOpt = {\n        visible: true,\n        id: id\n      };\n\n      _this.setState({\n        cntOpt: newCntOpt\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"changeFavoriteHandler\", function (id, isLiked, favAdd, cntGrp) {\n      _this.props.onChangeFav(id, isLiked, favAdd, _this.props.changedFav, _this.props.userID, cntGrp);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"showShareHandler\", function (shareID) {\n      _this.props.onChangeShareID(shareID, 'post');\n\n      _this.props.router.push('/index/post/share');\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"changeMediaHandler\", function (id, maxLength, type) {\n      _this.setState({\n        removePrevMedia: {\n          id: id,\n          type: type\n        },\n        removeAnim: false\n      });\n\n      _this.animateSlider(id, maxLength, type, 900);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"removeAnimHandler\", function (event) {\n      if (!_this.state.removePrevMedia) {\n        _this.setState({\n          removeAnim: true\n        });\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"playVideoHandler\", function (snapshot) {\n      _this.props.onFetchVideo(snapshot.id, \"\".concat(true ? window.location.protocol + '//' + window.location.host : null, \"/media/video/\").concat(snapshot.videoCnt));\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"slidePlayHandler\", function (id, maxLength, event) {\n      var slide = event.target;\n      slide.setPointerCapture(event.pointerId);\n\n      _this.setState({\n        playerIcnId: id\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"clearSlidePlayhandler\", function (event) {\n      var slide = event.target;\n      slide.releasePointerCapture(event.pointerId);\n      slide.style.left = 0 + 'px';\n      var videoPlayerIcn = document.querySelector('.reuse-pt__media--wrapper__icn-move');\n\n      if (videoPlayerIcn) {\n        videoPlayerIcn.style.left = 45 + '%';\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"moveSlidePlayHandler\", function (id, maxLength, event) {\n      var slide = event.target;\n\n      if (slide.hasPointerCapture && slide.hasPointerCapture(event.pointerId)) {\n        var newpos = event.clientX - slide.parentElement.offsetLeft - slide.offsetWidth / 2;\n\n        if (newpos < -(slide.offsetWidth / 2 + slide.offsetWidth / 4)) {\n          if (IS_ANIMATED) {\n            IS_ANIMATED = false;\n\n            _this.animateSlider(id, maxLength, 'next', 0);\n          }\n        } else if (newpos > slide.offsetWidth / 2 + slide.offsetWidth / 4) {\n          if (IS_ANIMATED) {\n            IS_ANIMATED = false;\n\n            _this.animateSlider(id, maxLength, 'prev', 0);\n          }\n        }\n\n        var videoPlayerIcn = document.querySelector('.reuse-pt__media--wrapper__icn-move');\n\n        if (videoPlayerIcn) {\n          var playerIcnHeight = newpos / slide.offsetWidth * 100;\n          videoPlayerIcn.style.left = playerIcnHeight + 45 + '%';\n        }\n\n        slide.style.left = newpos + 'px';\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"animateSlider\", function (id, maxLength, type, timeFrame) {\n      setTimeout(function () {\n        var mediaItms = _toConsumableArray(_this.state.mediaItms);\n\n        var filterMedia = mediaItms.filter(function (media) {\n          return media.id === id;\n        });\n        var mediaDet = {\n          id: id,\n          position: type === 'next' ? maxLength > 1 ? 1 : 0 : maxLength - 1\n        };\n\n        if (filterMedia.length > 0) {\n          var _iteratorNormalCompletion = true;\n          var _didIteratorError = false;\n          var _iteratorError = undefined;\n\n          try {\n            for (var _iterator = _getIterator(filterMedia), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n              var mediaItm = _step.value;\n              mediaDet = {\n                id: mediaItm.id,\n                position: type === 'next' ? mediaItm.position += 1 : mediaItm.position -= 1\n              };\n\n              if (mediaDet.position > maxLength - 1) {\n                mediaDet = updateObject(mediaDet, {\n                  position: 0\n                });\n              }\n\n              if (mediaDet.position < 0) {\n                mediaDet = updateObject(mediaDet, {\n                  position: maxLength - 1\n                });\n              }\n\n              var updateMedia = mediaItms.filter(function (media) {\n                return media.id !== id;\n              });\n              updateMedia.push(mediaDet);\n\n              _this.setState({\n                mediaItms: updateMedia,\n                removeAnim: false,\n                removePrevMedia: null,\n                animateItm: {\n                  id: id,\n                  direction: type\n                }\n              });\n            }\n          } catch (err) {\n            _didIteratorError = true;\n            _iteratorError = err;\n          } finally {\n            try {\n              if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n                _iterator[\"return\"]();\n              }\n            } finally {\n              if (_didIteratorError) {\n                throw _iteratorError;\n              }\n            }\n          }\n\n          return;\n        }\n\n        mediaItms.push(mediaDet);\n\n        _this.setState({\n          mediaItms: mediaItms,\n          removeAnim: false,\n          removePrevMedia: null,\n          animateItm: {\n            id: id,\n            direction: type\n          }\n        });\n      }, timeFrame);\n      setTimeout(function () {\n        IS_ANIMATED = true;\n      }, 500);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"changeCntHandler\", function (id, title, det, modelType) {\n      var checkTitle = String(title).length > 50 ? String(title).substr(0, 50) + '...' : title;\n\n      _this.props.onChangeCnt(id, checkTitle, det, false, modelType);\n    });\n\n    _this.state = {\n      cntOpt: null,\n      fetchLimit: limit,\n      filterTag: 'post',\n      mediaItms: [],\n      animateItm: null,\n      removeAnim: false,\n      removePrevMedia: null,\n      playerIcnId: null,\n      animationComplete: true,\n      scrollEnable: false\n    };\n    return _this;\n  }\n\n  _createClass(Posts, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      console.log(this.props);\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {\n      if (this.props.cnts && this.props.cnts.length > 0 && !this.state.scrollEnable) {\n        window.addEventListener('scroll', this.onScroll, false);\n        this.setState({\n          scrollEnable: true\n        });\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.props.onFetchCntReset();\n      window.removeEventListener('scroll', this.onScroll, false);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      this.props.onFetchShareActive();\n      this.props.onFetchShareCntActive();\n      this.props.onFetchNotifyActive();\n      this.props.onFetchCntActive();\n      this.props.onFetchQueActive();\n      this.props.onFetchPtActive();\n      this.props.onFetchReqActive();\n\n      var cnt = __jsx(Loader, null);\n\n      if (this.props.postErr) {\n        cnt = null;\n      }\n\n      if (this.props.cnts && this.props.cnts.length === 0) {\n        cnt = __jsx(NoAcc, {\n          isAuth: this.props.userID !== null,\n          det: \"No content found!\",\n          icn: \"clone\",\n          filter: true\n        });\n      }\n\n      if (this.props.cnts && this.props.cnts.length === 0) {\n        cnt = __jsx(NoAcc, {\n          isAuth: this.props.userID !== null,\n          det: \"No content found!\",\n          icn: \"clone\",\n          filter: true\n        });\n      }\n\n      if (this.props.cnts && this.props.cnts.length > 0) {\n        cnt = __jsx(Post, {\n          content: this.props.cnts,\n          media: this.props.media,\n          userOpt: this.showUserOptHandler,\n          showCntOpt: this.state.cntOpt,\n          fav: this.changeFavoriteHandler,\n          changedFav: this.props.changedFav,\n          favChange: this.props.favChange,\n          share: this.showShareHandler,\n          nextMedia: this.changeMediaHandler,\n          prevMedia: this.changeMediaHandler,\n          mediaItms: this.state.mediaItms,\n          removeAnim: this.removeAnimHandler,\n          disableAnim: this.state.removeAnim,\n          animateItm: this.state.animateItm,\n          removePrevMedia: this.state.removePrevMedia,\n          playVideo: this.playVideoHandler,\n          videoErr: this.props.videoErr,\n          video: this.props.postVideo,\n          playerIcnId: this.state.playerIcnId,\n          slidePlay: this.slidePlayHandler,\n          moveSlidePlay: this.moveSlidePlayHandler,\n          clearSlidePlay: this.clearSlidePlayhandler,\n          changeCnt: this.changeCntHandler\n        });\n      }\n\n      return __jsx(App, null, cnt);\n    }\n  }]);\n\n  return Posts;\n}(Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    userID: state.auth.userID,\n    cnts: state.cnt.cnts,\n    skipCnt: state.cnt.skipCnt,\n    cntTotal: state.cnt.cntTotal,\n    changedFav: state.cnt.changedFav,\n    favChange: state.cnt.favChange,\n    cntErr: state.cnt.cntErr,\n    postVideo: state.cnt.postVideo,\n    videoErr: state.cnt.videoErr,\n    filterDet: state.cnt.filterDet\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    onFetchShareActive: function onFetchShareActive() {\n      return dispatch(actions.fetchShareactiveInit());\n    },\n    onFetchShareCntActive: function onFetchShareCntActive() {\n      return dispatch(actions.fetchShareCntactiveInit());\n    },\n    onFetchQueActive: function onFetchQueActive() {\n      return dispatch(actions.fetchQueActiveInit());\n    },\n    onFetchPtActive: function onFetchPtActive() {\n      return dispatch(actions.fetchPtActiveInit());\n    },\n    onFetchCntActive: function onFetchCntActive() {\n      return dispatch(actions.fetchCntActiveInit());\n    },\n    onFetchNotifyActive: function onFetchNotifyActive() {\n      return dispatch(actions.fetchNotifyactiveInit());\n    },\n    onFetchReqActive: function onFetchReqActive() {\n      return dispatch(actions.fetchReqActiveInit());\n    },\n    onFetchCnt: function onFetchCnt(userID, fetchType, limit, skipCnt, cntTotal) {\n      return dispatch(actions.fetchCntInit(userID, fetchType, limit, skipCnt, cntTotal));\n    },\n    onFetchCntReset: function onFetchCntReset() {\n      return dispatch(actions.fetchCntReset());\n    },\n    onChangeFav: function onChangeFav(id, liked, favAdd, changedFav, userID, cntGrp) {\n      return dispatch(actions.changeFavInit(id, liked, favAdd, changedFav, userID, cntGrp));\n    },\n    onChangeShareID: function onChangeShareID(shareID, cntType) {\n      return dispatch(actions.shareID(shareID, cntType));\n    },\n    onChangeTag: function onChangeTag(path) {\n      return dispatch(actions.changeTagsPath(path));\n    },\n    onFetchVideo: function onFetchVideo(id, url) {\n      return dispatch(actions.fetchVideo(id, url));\n    },\n    onChangeCnt: function onChangeCnt(id, title, det, confirm, modelType) {\n      return dispatch(actions.changeCntInit(id, title, det, confirm, modelType));\n    }\n  };\n};\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(Posts));","map":{"version":3,"sources":["C:/Users/g/my-sg final deploy/pages/index.js"],"names":["React","Component","connect","withRouter","require","Post","Loader","NoAcc","updateObject","actions","App","IS_ANIMATED","limit","window","innerHeight","Posts","props","ctx","store","isServer","dispatch","fetchCntReset","getState","cnt","cnts","fetchCntInit","changeTagsPath","fetchTrdInit","document","documentElement","scrollHeight","scrollTop","clientHeight","onFetchCnt","userID","state","fetchLimit","skipCnt","cntTotal","id","cntOpt","setState","prevState","visible","newCntOpt","isLiked","favAdd","cntGrp","onChangeFav","changedFav","shareID","onChangeShareID","router","push","maxLength","type","removePrevMedia","removeAnim","animateSlider","event","snapshot","onFetchVideo","location","protocol","host","videoCnt","slide","target","setPointerCapture","pointerId","playerIcnId","releasePointerCapture","style","left","videoPlayerIcn","querySelector","hasPointerCapture","newpos","clientX","parentElement","offsetLeft","offsetWidth","playerIcnHeight","timeFrame","setTimeout","mediaItms","filterMedia","filter","media","mediaDet","position","length","mediaItm","updateMedia","animateItm","direction","title","det","modelType","checkTitle","String","substr","onChangeCnt","filterTag","animationComplete","scrollEnable","console","log","addEventListener","onScroll","onFetchCntReset","removeEventListener","onFetchShareActive","onFetchShareCntActive","onFetchNotifyActive","onFetchCntActive","onFetchQueActive","onFetchPtActive","onFetchReqActive","postErr","showUserOptHandler","changeFavoriteHandler","favChange","showShareHandler","changeMediaHandler","removeAnimHandler","playVideoHandler","videoErr","postVideo","slidePlayHandler","moveSlidePlayHandler","clearSlidePlayhandler","changeCntHandler","mapStateToProps","auth","cntErr","filterDet","mapDispatchToProps","fetchShareactiveInit","fetchShareCntactiveInit","fetchQueActiveInit","fetchPtActiveInit","fetchCntActiveInit","fetchNotifyactiveInit","fetchReqActiveInit","fetchType","liked","changeFavInit","cntType","onChangeTag","path","url","fetchVideo","confirm","changeCntInit"],"mappings":";;;;;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,SAASC,UAAT,QAA2B,aAA3B;AACA,OAAgCC,OAAO,CAAC,OAAD,CAAvC,GAAkD,IAAlD;AACA,OAAOC,IAAP,MAAiB,0CAAjB;AACA,OAAOC,MAAP,MAAmB,4CAAnB;AACA,OAAOC,KAAP,MAAkB,4CAAlB;AACA,SAASC,YAAT,QAA6B,+BAA7B;AACA,OAAO,KAAKC,OAAZ,MAAyB,oCAAzB;AACA,OAAOC,GAAP,MAAgB,oBAAhB;AAEA,IAAIC,WAAW,GAAG,IAAlB;AAEA,IAAIC,KAAK,GAAG,CAAZ;;AACA,UAAmC;AAC/B,MAAIC,MAAM,CAACC,WAAP,IAAsB,IAA1B,EAAgC;AAC5BF,IAAAA,KAAK,GAAG,EAAR;AACH,GAFD,MAEO,IAAGC,MAAM,CAACC,WAAP,IAAsB,GAAzB,EAA8B;AACjCF,IAAAA,KAAK,GAAG,EAAR;AACH,GAFM,MAEA,IAAGC,MAAM,CAACC,WAAP,IAAsB,GAAzB,EAA8B;AACjCF,IAAAA,KAAK,GAAG,CAAR;AACH,GAFM,MAEA;AACHA,IAAAA,KAAK,GAAG,CAAR;AACH;AACJ;;IAEKG,K;;;;;;;oCAC2BC,K;;;;;;;2BACGA,KAAK,CAACC,G,EAA1BC,K,cAAAA,K,EAAOC,Q,cAAAA,Q;AACfD,cAAAA,KAAK,CAACE,QAAN,CAAeX,OAAO,CAACY,aAAR,EAAf;;AAEE,kBAAI,CAACH,KAAK,CAACI,QAAN,GAAiBC,GAAjB,CAAqBC,IAA1B,EAAgC;AAC9BN,gBAAAA,KAAK,CAACE,QAAN,CAAeX,OAAO,CAACgB,YAAR,CAAqB,IAArB,EAA2B,MAA3B,EAAmCb,KAAnC,EAA0C,CAA1C,EAA6C,CAA7C,CAAf;AACAM,gBAAAA,KAAK,CAACE,QAAN,CAAeX,OAAO,CAACiB,cAAR,CAAuB,OAAvB,CAAf;AACAR,gBAAAA,KAAK,CAACE,QAAN,CAAeX,OAAO,CAACkB,YAAR,CAAqB,IAArB,CAAf;AACD;;+CAEM;AAAEH,gBAAAA,IAAI,EAAEN,KAAK,CAACI,QAAN,GAAiBC,GAAjB,CAAqBC;AAA7B,e;;;;;;;;;;;AAGb,iBAAYR,KAAZ,EAAmB;AAAA;;AAAA;;AACf,+EAAMA,KAAN;;AADe,+DAgCR,YAAM;AACb,gBAAmC;AAC/B,YAAIY,QAAQ,CAACC,eAAT,CAAyBC,YAAzB,GAAwCF,QAAQ,CAACC,eAAT,CAAyBE,SAAjE,KAA+EH,QAAQ,CAACC,eAAT,CAAyBG,YAA5G,EAA0H;AACtH,gBAAKhB,KAAL,CAAWiB,UAAX,CACQ,MAAKjB,KAAL,CAAWkB,MADnB,EAC4B,MAD5B,EAEQ,MAAKC,KAAL,CAAWC,UAFnB,EAE+B,MAAKpB,KAAL,CAAWqB,OAAX,GAAqB,MAAKF,KAAL,CAAWC,UAF/D,EAE2E,MAAKpB,KAAL,CAAWsB,QAFtF;AAGH;AACJ;AACJ,KAxCkB;;AAAA,yEA0CE,UAACC,EAAD,EAAQ;AACzB,UAAI,MAAKJ,KAAL,CAAWK,MAAX,IAAqB,MAAKL,KAAL,CAAWK,MAAX,CAAkBD,EAAlB,KAAyBA,EAAlD,EAAsD;AAClD,cAAKE,QAAL,CAAc,UAACC,SAAD,EAAY1B,KAAZ,EAAsB;AAChC,iBAAO;AACHwB,YAAAA,MAAM,EAAEhC,YAAY,CAACkC,SAAS,CAACF,MAAX,EAAmB;AAACG,cAAAA,OAAO,EAAE,CAACD,SAAS,CAACF,MAAV,CAAiBG;AAA5B,aAAnB;AADjB,WAAP;AAGH,SAJD;;AAKA;AACH;;AAED,UAAMC,SAAS,GAAG;AAACD,QAAAA,OAAO,EAAE,IAAV;AAAgBJ,QAAAA,EAAE,EAAFA;AAAhB,OAAlB;;AACA,YAAKE,QAAL,CAAc;AAACD,QAAAA,MAAM,EAAEI;AAAT,OAAd;AACH,KAtDkB;;AAAA,4EAwDK,UAACL,EAAD,EAAKM,OAAL,EAAcC,MAAd,EAAsBC,MAAtB,EAAiC;AACrD,YAAK/B,KAAL,CAAWgC,WAAX,CAAuBT,EAAvB,EAA2BM,OAA3B,EAAoCC,MAApC,EAA4C,MAAK9B,KAAL,CAAWiC,UAAvD,EAAmE,MAAKjC,KAAL,CAAWkB,MAA9E,EAAsFa,MAAtF;AACH,KA1DkB;;AAAA,uEA4DA,UAACG,OAAD,EAAa;AAC5B,YAAKlC,KAAL,CAAWmC,eAAX,CAA2BD,OAA3B,EAAoC,MAApC;;AACA,YAAKlC,KAAL,CAAWoC,MAAX,CAAkBC,IAAlB,CAAuB,mBAAvB;AACH,KA/DkB;;AAAA,yEAiEE,UAACd,EAAD,EAAKe,SAAL,EAAgBC,IAAhB,EAAyB;AAC1C,YAAKd,QAAL,CAAc;AAACe,QAAAA,eAAe,EAAE;AAACjB,UAAAA,EAAE,EAAFA,EAAD;AAAKgB,UAAAA,IAAI,EAAJA;AAAL,SAAlB;AAA8BE,QAAAA,UAAU,EAAE;AAA1C,OAAd;;AACA,YAAKC,aAAL,CAAmBnB,EAAnB,EAAuBe,SAAvB,EAAkCC,IAAlC,EAAwC,GAAxC;AACH,KApEkB;;AAAA,wEAsEC,UAACI,KAAD,EAAW;AAC3B,UAAI,CAAC,MAAKxB,KAAL,CAAWqB,eAAhB,EAAiC;AAC7B,cAAKf,QAAL,CAAc;AAACgB,UAAAA,UAAU,EAAE;AAAb,SAAd;AACH;AACJ,KA1EkB;;AAAA,uEA4EA,UAACG,QAAD,EAAc;AAC7B,YAAK5C,KAAL,CAAW6C,YAAX,CAAwBD,QAAQ,CAACrB,EAAjC,YAAwC,OAAgC1B,MAAM,CAACiD,QAAP,CAAgBC,QAAhB,GAA2B,IAA3B,GAAkClD,MAAM,CAACiD,QAAP,CAAgBE,IAAlF,GAAyF,IAAjI,0BAAqJJ,QAAQ,CAACK,QAA9J;AACH,KA9EkB;;AAAA,uEAgFA,UAAC1B,EAAD,EAAKe,SAAL,EAAgBK,KAAhB,EAA0B;AACzC,UAAIO,KAAK,GAAGP,KAAK,CAACQ,MAAlB;AACAD,MAAAA,KAAK,CAACE,iBAAN,CAAwBT,KAAK,CAACU,SAA9B;;AACA,YAAK5B,QAAL,CAAc;AAAC6B,QAAAA,WAAW,EAAE/B;AAAd,OAAd;AACH,KApFkB;;AAAA,4EAsFK,UAACoB,KAAD,EAAW;AAC/B,UAAIO,KAAK,GAAGP,KAAK,CAACQ,MAAlB;AACAD,MAAAA,KAAK,CAACK,qBAAN,CAA4BZ,KAAK,CAACU,SAAlC;AACAH,MAAAA,KAAK,CAACM,KAAN,CAAYC,IAAZ,GAAmB,IAAG,IAAtB;AACA,UAAIC,cAAc,GAAG9C,QAAQ,CAAC+C,aAAT,CAAuB,qCAAvB,CAArB;;AACA,UAAID,cAAJ,EAAoB;AAChBA,QAAAA,cAAc,CAACF,KAAf,CAAqBC,IAArB,GAA4B,KAAK,GAAjC;AACH;AACJ,KA9FkB;;AAAA,2EAgGI,UAAClC,EAAD,EAAKe,SAAL,EAAgBK,KAAhB,EAA0B;AAC7C,UAAIO,KAAK,GAAGP,KAAK,CAACQ,MAAlB;;AACA,UAAID,KAAK,CAACU,iBAAN,IAA2BV,KAAK,CAACU,iBAAN,CAAwBjB,KAAK,CAACU,SAA9B,CAA/B,EAAyE;AACrE,YAAIQ,MAAM,GAAGlB,KAAK,CAACmB,OAAN,GAAgBZ,KAAK,CAACa,aAAN,CAAoBC,UAApC,GAAkDd,KAAK,CAACe,WAAN,GAAkB,CAAjF;;AACA,YAAIJ,MAAM,GAAG,EAAEX,KAAK,CAACe,WAAN,GAAkB,CAAlB,GAAsBf,KAAK,CAACe,WAAN,GAAkB,CAA1C,CAAb,EAA2D;AACvD,cAAItE,WAAJ,EAAiB;AACbA,YAAAA,WAAW,GAAG,KAAd;;AACA,kBAAK+C,aAAL,CAAmBnB,EAAnB,EAAuBe,SAAvB,EAAkC,MAAlC,EAA0C,CAA1C;AACH;AACJ,SALD,MAKO,IAAKuB,MAAM,GAAIX,KAAK,CAACe,WAAN,GAAkB,CAAlB,GAAsBf,KAAK,CAACe,WAAN,GAAkB,CAAvD,EAA2D;AAC9D,cAAItE,WAAJ,EAAiB;AACbA,YAAAA,WAAW,GAAG,KAAd;;AACA,kBAAK+C,aAAL,CAAmBnB,EAAnB,EAAuBe,SAAvB,EAAkC,MAAlC,EAA0C,CAA1C;AACH;AACJ;;AACD,YAAIoB,cAAc,GAAG9C,QAAQ,CAAC+C,aAAT,CAAuB,qCAAvB,CAArB;;AACA,YAAID,cAAJ,EAAoB;AAChB,cAAIQ,eAAe,GAAIL,MAAM,GAAGX,KAAK,CAACe,WAAhB,GAA+B,GAArD;AACAP,UAAAA,cAAc,CAACF,KAAf,CAAqBC,IAArB,GAA6BS,eAAe,GAAG,EAAlB,GAAuB,GAApD;AACH;;AACDhB,QAAAA,KAAK,CAACM,KAAN,CAAYC,IAAZ,GAAmBI,MAAM,GAAE,IAA3B;AACH;AACJ,KAtHkB;;AAAA,oEAwHH,UAACtC,EAAD,EAAKe,SAAL,EAAgBC,IAAhB,EAAsB4B,SAAtB,EAAoC;AAChDC,MAAAA,UAAU,CAAC,YAAM;AACb,YAAIC,SAAS,sBAAO,MAAKlD,KAAL,CAAWkD,SAAlB,CAAb;;AACA,YAAIC,WAAW,GAAGD,SAAS,CAACE,MAAV,CAAiB,UAAAC,KAAK;AAAA,iBAAIA,KAAK,CAACjD,EAAN,KAAaA,EAAjB;AAAA,SAAtB,CAAlB;AACA,YAAIkD,QAAQ,GAAG;AAAClD,UAAAA,EAAE,EAAFA,EAAD;AAAKmD,UAAAA,QAAQ,EAAEnC,IAAI,KAAK,MAAT,GAAmBD,SAAS,GAAG,CAAZ,GAAgB,CAAhB,GAAoB,CAAvC,GAA2CA,SAAS,GAAG;AAAtE,SAAf;;AACA,YAAIgC,WAAW,CAACK,MAAZ,GAAqB,CAAzB,EAA4B;AAAA;AAAA;AAAA;;AAAA;AACxB,8CAAqBL,WAArB,4GAAkC;AAAA,kBAAzBM,QAAyB;AAC9BH,cAAAA,QAAQ,GAAG;AAAClD,gBAAAA,EAAE,EAAEqD,QAAQ,CAACrD,EAAd;AAAkBmD,gBAAAA,QAAQ,EAAEnC,IAAI,KAAK,MAAT,GAAkBqC,QAAQ,CAACF,QAAT,IAAmB,CAArC,GAAyCE,QAAQ,CAACF,QAAT,IAAmB;AAAxF,eAAX;;AACA,kBAAID,QAAQ,CAACC,QAAT,GAAoBpC,SAAS,GAAG,CAApC,EAAuC;AACnCmC,gBAAAA,QAAQ,GAAGjF,YAAY,CAACiF,QAAD,EAAW;AAACC,kBAAAA,QAAQ,EAAE;AAAX,iBAAX,CAAvB;AACH;;AAED,kBAAID,QAAQ,CAACC,QAAT,GAAoB,CAAxB,EAA2B;AACvBD,gBAAAA,QAAQ,GAAGjF,YAAY,CAACiF,QAAD,EAAW;AAACC,kBAAAA,QAAQ,EAAEpC,SAAS,GAAG;AAAvB,iBAAX,CAAvB;AACH;;AACD,kBAAIuC,WAAW,GAAGR,SAAS,CAACE,MAAV,CAAiB,UAAAC,KAAK;AAAA,uBAAIA,KAAK,CAACjD,EAAN,KAAaA,EAAjB;AAAA,eAAtB,CAAlB;AACAsD,cAAAA,WAAW,CAACxC,IAAZ,CAAiBoC,QAAjB;;AACA,oBAAKhD,QAAL,CAAc;AAAC4C,gBAAAA,SAAS,EAAEQ,WAAZ;AAAyBpC,gBAAAA,UAAU,EAAE,KAArC;AAA6CD,gBAAAA,eAAe,EAAE,IAA9D;AAAoEsC,gBAAAA,UAAU,EAAE;AAACvD,kBAAAA,EAAE,EAAFA,EAAD;AAAKwD,kBAAAA,SAAS,EAAExC;AAAhB;AAAhF,eAAd;AACH;AAbuB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAcxB;AACH;;AACD8B,QAAAA,SAAS,CAAChC,IAAV,CAAeoC,QAAf;;AACA,cAAKhD,QAAL,CAAc;AAAC4C,UAAAA,SAAS,EAATA,SAAD;AAAY5B,UAAAA,UAAU,EAAE,KAAxB;AAA+BD,UAAAA,eAAe,EAAE,IAAhD;AAAuDsC,UAAAA,UAAU,EAAE;AAACvD,YAAAA,EAAE,EAAFA,EAAD;AAAKwD,YAAAA,SAAS,EAAExC;AAAhB;AAAnE,SAAd;AACH,OAtBS,EAsBP4B,SAtBO,CAAV;AAwBAC,MAAAA,UAAU,CAAC,YAAM;AACbzE,QAAAA,WAAW,GAAG,IAAd;AACH,OAFS,EAEP,GAFO,CAAV;AAGH,KApJkB;;AAAA,uEAqJA,UAAC4B,EAAD,EAAKyD,KAAL,EAAYC,GAAZ,EAAiBC,SAAjB,EAA+B;AAC9C,UAAIC,UAAU,GAAGC,MAAM,CAACJ,KAAD,CAAN,CAAcL,MAAd,GAAuB,EAAvB,GAA4BS,MAAM,CAACJ,KAAD,CAAN,CAAcK,MAAd,CAAqB,CAArB,EAAwB,EAAxB,IAA8B,KAA1D,GAAkEL,KAAnF;;AACA,YAAKhF,KAAL,CAAWsF,WAAX,CAAuB/D,EAAvB,EAA2B4D,UAA3B,EAAuCF,GAAvC,EAA4C,KAA5C,EAAmDC,SAAnD;AACH,KAxJkB;;AAEf,UAAK/D,KAAL,GAAa;AACTK,MAAAA,MAAM,EAAE,IADC;AAETJ,MAAAA,UAAU,EAAExB,KAFH;AAGT2F,MAAAA,SAAS,EAAE,MAHF;AAITlB,MAAAA,SAAS,EAAE,EAJF;AAKTS,MAAAA,UAAU,EAAE,IALH;AAMTrC,MAAAA,UAAU,EAAE,KANH;AAOTD,MAAAA,eAAe,EAAE,IAPR;AAQTc,MAAAA,WAAW,EAAE,IARJ;AASTkC,MAAAA,iBAAiB,EAAE,IATV;AAUTC,MAAAA,YAAY,EAAE;AAVL,KAAb;AAFe;AAclB;;;;wCAEmB;AAChBC,MAAAA,OAAO,CAACC,GAAR,CAAY,KAAK3F,KAAjB;AACH;;;yCAEoB;AACjB,UAAI,KAAKA,KAAL,CAAWQ,IAAX,IAAmB,KAAKR,KAAL,CAAWQ,IAAX,CAAgBmE,MAAhB,GAAyB,CAA5C,IAAiD,CAAC,KAAKxD,KAAL,CAAWsE,YAAjE,EAA+E;AAC3E5F,QAAAA,MAAM,CAAC+F,gBAAP,CAAwB,QAAxB,EAAkC,KAAKC,QAAvC,EAAiD,KAAjD;AACA,aAAKpE,QAAL,CAAc;AAACgE,UAAAA,YAAY,EAAE;AAAf,SAAd;AACH;AACJ;;;2CAEsB;AACnB,WAAKzF,KAAL,CAAW8F,eAAX;AACAjG,MAAAA,MAAM,CAACkG,mBAAP,CAA2B,QAA3B,EAAqC,KAAKF,QAA1C,EAAoD,KAApD;AACH;;;6BA4HQ;AACL,WAAK7F,KAAL,CAAWgG,kBAAX;AACA,WAAKhG,KAAL,CAAWiG,qBAAX;AACA,WAAKjG,KAAL,CAAWkG,mBAAX;AACA,WAAKlG,KAAL,CAAWmG,gBAAX;AACA,WAAKnG,KAAL,CAAWoG,gBAAX;AACA,WAAKpG,KAAL,CAAWqG,eAAX;AACA,WAAKrG,KAAL,CAAWsG,gBAAX;;AAEA,UAAI/F,GAAG,GAAG,MAAC,MAAD,OAAV;;AACA,UAAI,KAAKP,KAAL,CAAWuG,OAAf,EAAwB;AACpBhG,QAAAA,GAAG,GAAG,IAAN;AACH;;AAED,UAAI,KAAKP,KAAL,CAAWQ,IAAX,IAAmB,KAAKR,KAAL,CAAWQ,IAAX,CAAgBmE,MAAhB,KAA2B,CAAlD,EAAqD;AACjDpE,QAAAA,GAAG,GAAG,MAAC,KAAD;AACE,UAAA,MAAM,EAAE,KAAKP,KAAL,CAAWkB,MAAX,KAAsB,IADhC;AAEE,UAAA,GAAG,EAAC,mBAFN;AAGE,UAAA,GAAG,EAAC,OAHN;AAIE,UAAA,MAAM;AAJR,UAAN;AAKH;;AAED,UAAI,KAAKlB,KAAL,CAAWQ,IAAX,IAAmB,KAAKR,KAAL,CAAWQ,IAAX,CAAgBmE,MAAhB,KAA2B,CAAlD,EAAqD;AACjDpE,QAAAA,GAAG,GAAG,MAAC,KAAD;AACE,UAAA,MAAM,EAAE,KAAKP,KAAL,CAAWkB,MAAX,KAAsB,IADhC;AAEE,UAAA,GAAG,EAAC,mBAFN;AAGE,UAAA,GAAG,EAAC,OAHN;AAIE,UAAA,MAAM;AAJR,UAAN;AAKH;;AAED,UAAI,KAAKlB,KAAL,CAAWQ,IAAX,IAAmB,KAAKR,KAAL,CAAWQ,IAAX,CAAgBmE,MAAhB,GAAyB,CAAhD,EAAmD;AAC/CpE,QAAAA,GAAG,GAAG,MAAC,IAAD;AACF,UAAA,OAAO,EAAE,KAAKP,KAAL,CAAWQ,IADlB;AAEF,UAAA,KAAK,EAAE,KAAKR,KAAL,CAAWwE,KAFhB;AAGF,UAAA,OAAO,EAAE,KAAKgC,kBAHZ;AAIF,UAAA,UAAU,EAAE,KAAKrF,KAAL,CAAWK,MAJrB;AAKF,UAAA,GAAG,EAAE,KAAKiF,qBALR;AAMF,UAAA,UAAU,EAAE,KAAKzG,KAAL,CAAWiC,UANrB;AAOF,UAAA,SAAS,EAAE,KAAKjC,KAAL,CAAW0G,SAPpB;AAQF,UAAA,KAAK,EAAE,KAAKC,gBARV;AASF,UAAA,SAAS,EAAE,KAAKC,kBATd;AAUF,UAAA,SAAS,EAAE,KAAKA,kBAVd;AAWF,UAAA,SAAS,EAAE,KAAKzF,KAAL,CAAWkD,SAXpB;AAYF,UAAA,UAAU,EAAE,KAAKwC,iBAZf;AAaF,UAAA,WAAW,EAAE,KAAK1F,KAAL,CAAWsB,UAbtB;AAcF,UAAA,UAAU,EAAE,KAAKtB,KAAL,CAAW2D,UAdrB;AAeF,UAAA,eAAe,EAAE,KAAK3D,KAAL,CAAWqB,eAf1B;AAgBF,UAAA,SAAS,EAAE,KAAKsE,gBAhBd;AAiBF,UAAA,QAAQ,EAAE,KAAK9G,KAAL,CAAW+G,QAjBnB;AAkBF,UAAA,KAAK,EAAE,KAAK/G,KAAL,CAAWgH,SAlBhB;AAmBF,UAAA,WAAW,EAAE,KAAK7F,KAAL,CAAWmC,WAnBtB;AAoBF,UAAA,SAAS,EAAE,KAAK2D,gBApBd;AAqBF,UAAA,aAAa,EAAE,KAAKC,oBArBlB;AAsBF,UAAA,cAAc,EAAE,KAAKC,qBAtBnB;AAuBF,UAAA,SAAS,EAAE,KAAKC;AAvBd,UAAN;AAwBH;;AAED,aACE,MAAC,GAAD,QACI7G,GADJ,CADF;AAKH;;;;EAtOetB,S;;AAyOpB,IAAMoI,eAAe,GAAG,SAAlBA,eAAkB,CAAAlG,KAAK,EAAI;AAC7B,SAAO;AACHD,IAAAA,MAAM,EAAEC,KAAK,CAACmG,IAAN,CAAWpG,MADhB;AAEHV,IAAAA,IAAI,EAAEW,KAAK,CAACZ,GAAN,CAAUC,IAFb;AAGHa,IAAAA,OAAO,EAAEF,KAAK,CAACZ,GAAN,CAAUc,OAHhB;AAIHC,IAAAA,QAAQ,EAAEH,KAAK,CAACZ,GAAN,CAAUe,QAJjB;AAKHW,IAAAA,UAAU,EAAEd,KAAK,CAACZ,GAAN,CAAU0B,UALnB;AAMHyE,IAAAA,SAAS,EAAEvF,KAAK,CAACZ,GAAN,CAAUmG,SANlB;AAOHa,IAAAA,MAAM,EAAEpG,KAAK,CAACZ,GAAN,CAAUgH,MAPf;AAQHP,IAAAA,SAAS,EAAE7F,KAAK,CAACZ,GAAN,CAAUyG,SARlB;AASHD,IAAAA,QAAQ,EAAE5F,KAAK,CAACZ,GAAN,CAAUwG,QATjB;AAUHS,IAAAA,SAAS,EAAErG,KAAK,CAACZ,GAAN,CAAUiH;AAVlB,GAAP;AAYH,CAbD;;AAeA,IAAMC,kBAAkB,GAAG,SAArBA,kBAAqB,CAAArH,QAAQ,EAAI;AACnC,SAAO;AACH4F,IAAAA,kBAAkB,EAAE;AAAA,aAAM5F,QAAQ,CAACX,OAAO,CAACiI,oBAAR,EAAD,CAAd;AAAA,KADjB;AAEHzB,IAAAA,qBAAqB,EAAE;AAAA,aAAM7F,QAAQ,CAACX,OAAO,CAACkI,uBAAR,EAAD,CAAd;AAAA,KAFpB;AAGHvB,IAAAA,gBAAgB,EAAE;AAAA,aAAMhG,QAAQ,CAACX,OAAO,CAACmI,kBAAR,EAAD,CAAd;AAAA,KAHf;AAIHvB,IAAAA,eAAe,EAAE;AAAA,aAAMjG,QAAQ,CAACX,OAAO,CAACoI,iBAAR,EAAD,CAAd;AAAA,KAJd;AAKH1B,IAAAA,gBAAgB,EAAE;AAAA,aAAM/F,QAAQ,CAACX,OAAO,CAACqI,kBAAR,EAAD,CAAd;AAAA,KALf;AAMH5B,IAAAA,mBAAmB,EAAE;AAAA,aAAM9F,QAAQ,CAACX,OAAO,CAACsI,qBAAR,EAAD,CAAd;AAAA,KANlB;AAOHzB,IAAAA,gBAAgB,EAAE;AAAA,aAAMlG,QAAQ,CAACX,OAAO,CAACuI,kBAAR,EAAD,CAAd;AAAA,KAPf;AAQH/G,IAAAA,UAAU,EAAE,oBAACC,MAAD,EAAS+G,SAAT,EAAoBrI,KAApB,EAA2ByB,OAA3B,EAAoCC,QAApC;AAAA,aAAiDlB,QAAQ,CAACX,OAAO,CAACgB,YAAR,CAAqBS,MAArB,EAA6B+G,SAA7B,EAAwCrI,KAAxC,EAA+CyB,OAA/C,EAAwDC,QAAxD,CAAD,CAAzD;AAAA,KART;AASHwE,IAAAA,eAAe,EAAE;AAAA,aAAM1F,QAAQ,CAACX,OAAO,CAACY,aAAR,EAAD,CAAd;AAAA,KATd;AAUH2B,IAAAA,WAAW,EAAE,qBAACT,EAAD,EAAK2G,KAAL,EAAYpG,MAAZ,EAAoBG,UAApB,EAAgCf,MAAhC,EAAwCa,MAAxC;AAAA,aAAmD3B,QAAQ,CAACX,OAAO,CAAC0I,aAAR,CAAsB5G,EAAtB,EAA0B2G,KAA1B,EAAiCpG,MAAjC,EAAyCG,UAAzC,EAAqDf,MAArD,EAA6Da,MAA7D,CAAD,CAA3D;AAAA,KAVV;AAWHI,IAAAA,eAAe,EAAE,yBAACD,OAAD,EAAWkG,OAAX;AAAA,aAAuBhI,QAAQ,CAACX,OAAO,CAACyC,OAAR,CAAgBA,OAAhB,EAA0BkG,OAA1B,CAAD,CAA/B;AAAA,KAXd;AAYHC,IAAAA,WAAW,EAAE,qBAACC,IAAD;AAAA,aAAUlI,QAAQ,CAACX,OAAO,CAACiB,cAAR,CAAuB4H,IAAvB,CAAD,CAAlB;AAAA,KAZV;AAaHzF,IAAAA,YAAY,EAAE,sBAACtB,EAAD,EAAKgH,GAAL;AAAA,aAAanI,QAAQ,CAACX,OAAO,CAAC+I,UAAR,CAAmBjH,EAAnB,EAAuBgH,GAAvB,CAAD,CAArB;AAAA,KAbX;AAcHjD,IAAAA,WAAW,EAAE,qBAAC/D,EAAD,EAAKyD,KAAL,EAAYC,GAAZ,EAAiBwD,OAAjB,EAA0BvD,SAA1B;AAAA,aAAwC9E,QAAQ,CAACX,OAAO,CAACiJ,aAAR,CAAsBnH,EAAtB,EAA0ByD,KAA1B,EAAiCC,GAAjC,EAAsCwD,OAAtC,EAAgDvD,SAAhD,CAAD,CAAhD;AAAA;AAdV,GAAP;AAgBH,CAjBD;;AAmBA,eAAe/F,UAAU,CAACD,OAAO,CAACmI,eAAD,EAAkBI,kBAAlB,CAAP,CAA6C1H,KAA7C,CAAD,CAAzB","sourcesContent":["import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { withRouter } from 'next/router'\r\ntypeof window !== 'undefined' ? require('pepjs'): null;\r\nimport Post from '../react/index/components/Main/Post/Post';\r\nimport Loader from '../react/index/components/UI/Loader/Loader';\r\nimport NoAcc from '../react/index/components/Main/NoAcc/NoAcc';\r\nimport { updateObject } from '../react/index/shared/utility';\r\nimport * as actions from '../react/index/store/actions/index';\r\nimport App from '../react/index/App';\r\n\r\nlet IS_ANIMATED = true;\r\n\r\nlet limit = 0;\r\nif (typeof window !== 'undefined') {\r\n    if (window.innerHeight >= 1200) {\r\n        limit = 18\r\n    } else if(window.innerHeight >= 900) {\r\n        limit = 12;\r\n    } else if(window.innerHeight >= 500) {\r\n        limit = 9\r\n    } else {\r\n        limit = 6;\r\n    }\r\n}\r\n\r\nclass Posts extends Component {\r\n    static async getInitialProps(props) {\r\n        const { store, isServer } = props.ctx\r\n        store.dispatch(actions.fetchCntReset())\r\n  \r\n          if (!store.getState().cnt.cnts) {\r\n            store.dispatch(actions.fetchCntInit(null, 'post', limit, 0, 0))\r\n            store.dispatch(actions.changeTagsPath('/post'));\r\n            store.dispatch(actions.fetchTrdInit(null));\r\n          }\r\n  \r\n          return { cnts: store.getState().cnt.cnts }\r\n      }\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            cntOpt: null,\r\n            fetchLimit: limit,\r\n            filterTag: 'post',\r\n            mediaItms: [],\r\n            animateItm: null,\r\n            removeAnim: false,\r\n            removePrevMedia: null,\r\n            playerIcnId: null,\r\n            animationComplete: true,\r\n            scrollEnable: false\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        console.log(this.props)\r\n    }\r\n\r\n    componentDidUpdate() {\r\n        if (this.props.cnts && this.props.cnts.length > 0 && !this.state.scrollEnable) {\r\n            window.addEventListener('scroll', this.onScroll, false);\r\n            this.setState({scrollEnable: true})\r\n        }\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        this.props.onFetchCntReset();\r\n        window.removeEventListener('scroll', this.onScroll, false);\r\n    }\r\n\r\n    onScroll = () => {\r\n        if (typeof window !== `undefined`) {\r\n            if (document.documentElement.scrollHeight - document.documentElement.scrollTop === document.documentElement.clientHeight) {\r\n                this.props.onFetchCnt(\r\n                        this.props.userID,  'post' ,\r\n                        this.state.fetchLimit, this.props.skipCnt + this.state.fetchLimit, this.props.cntTotal);\r\n            }\r\n        }\r\n    } \r\n\r\n    showUserOptHandler = (id) => {\r\n        if (this.state.cntOpt && this.state.cntOpt.id === id) {\r\n            this.setState((prevState, props) => {\r\n                return {\r\n                    cntOpt: updateObject(prevState.cntOpt, {visible: !prevState.cntOpt.visible})\r\n                }\r\n            });\r\n            return\r\n        }\r\n\r\n        const newCntOpt = {visible: true, id}\r\n        this.setState({cntOpt: newCntOpt})\r\n    }\r\n\r\n    changeFavoriteHandler = (id, isLiked, favAdd, cntGrp) => {\r\n        this.props.onChangeFav(id, isLiked, favAdd, this.props.changedFav, this.props.userID, cntGrp);\r\n    }\r\n\r\n    showShareHandler = (shareID) => {\r\n        this.props.onChangeShareID(shareID, 'post');\r\n        this.props.router.push('/index/post/share')\r\n    };\r\n\r\n    changeMediaHandler = (id, maxLength, type) => {\r\n        this.setState({removePrevMedia: {id, type}, removeAnim: false});\r\n        this.animateSlider(id, maxLength, type, 900);\r\n    }\r\n\r\n    removeAnimHandler = (event) => {\r\n        if (!this.state.removePrevMedia) {\r\n            this.setState({removeAnim: true})\r\n        }\r\n    }\r\n\r\n    playVideoHandler = (snapshot) => {\r\n        this.props.onFetchVideo(snapshot.id, `${typeof window !== `undefined` ? window.location.protocol + '//' + window.location.host : null}/media/video/${snapshot.videoCnt}`)\r\n    }\r\n\r\n    slidePlayHandler = (id, maxLength, event) => {\r\n        let slide = event.target;\r\n        slide.setPointerCapture(event.pointerId);\r\n        this.setState({playerIcnId: id})\r\n    }\r\n\r\n    clearSlidePlayhandler = (event) => {\r\n        let slide = event.target;\r\n        slide.releasePointerCapture(event.pointerId);\r\n        slide.style.left = 0 +'px';\r\n        let videoPlayerIcn = document.querySelector('.reuse-pt__media--wrapper__icn-move');\r\n        if (videoPlayerIcn) {\r\n            videoPlayerIcn.style.left = 45 + '%';\r\n        }\r\n    }\r\n\r\n    moveSlidePlayHandler = (id, maxLength, event) => {\r\n        let slide = event.target;\r\n        if (slide.hasPointerCapture && slide.hasPointerCapture(event.pointerId)) {\r\n            let newpos = event.clientX - slide.parentElement.offsetLeft - (slide.offsetWidth/2);\r\n            if (newpos < -(slide.offsetWidth/2 + slide.offsetWidth/4)) {\r\n                if (IS_ANIMATED) {\r\n                    IS_ANIMATED = false;\r\n                    this.animateSlider(id, maxLength, 'next', 0)\r\n                }\r\n            } else if ( newpos > (slide.offsetWidth/2 + slide.offsetWidth/4)) {\r\n                if (IS_ANIMATED) {\r\n                    IS_ANIMATED = false;\r\n                    this.animateSlider(id, maxLength, 'prev', 0)\r\n                }\r\n            } \r\n            let videoPlayerIcn = document.querySelector('.reuse-pt__media--wrapper__icn-move');\r\n            if (videoPlayerIcn) {\r\n                let playerIcnHeight = (newpos / slide.offsetWidth) * 100\r\n                videoPlayerIcn.style.left =  playerIcnHeight + 45 + '%';\r\n            }\r\n            slide.style.left = newpos +'px';\r\n        }\r\n    }\r\n\r\n    animateSlider = (id, maxLength, type, timeFrame) => {\r\n        setTimeout(() => {\r\n            let mediaItms = [...this.state.mediaItms];\r\n            let filterMedia = mediaItms.filter(media => media.id === id);\r\n            let mediaDet = {id, position: type === 'next' ?  maxLength > 1 ? 1 : 0 : maxLength - 1};\r\n            if (filterMedia.length > 0) {\r\n                for (let mediaItm of filterMedia) {\r\n                    mediaDet = {id: mediaItm.id, position: type === 'next' ? mediaItm.position+=1 : mediaItm.position-=1};\r\n                    if (mediaDet.position > maxLength - 1) {\r\n                        mediaDet = updateObject(mediaDet, {position: 0});\r\n                    }\r\n    \r\n                    if (mediaDet.position < 0) {\r\n                        mediaDet = updateObject(mediaDet, {position: maxLength - 1});\r\n                    }\r\n                    let updateMedia = mediaItms.filter(media => media.id !== id);\r\n                    updateMedia.push(mediaDet);\r\n                    this.setState({mediaItms: updateMedia, removeAnim: false,  removePrevMedia: null, animateItm: {id, direction: type}})\r\n                }\r\n                return\r\n            }\r\n            mediaItms.push(mediaDet);\r\n            this.setState({mediaItms, removeAnim: false, removePrevMedia: null,  animateItm: {id, direction: type}})   \r\n        }, timeFrame)\r\n\r\n        setTimeout(() => {\r\n            IS_ANIMATED = true;\r\n        }, 500)\r\n    }\r\n    changeCntHandler = (id, title, det, modelType) => {\r\n        let checkTitle = String(title).length > 50 ? String(title).substr(0, 50) + '...' : title\r\n        this.props.onChangeCnt(id, checkTitle, det, false, modelType);\r\n    }\r\n\r\n    render() {\r\n        this.props.onFetchShareActive();\r\n        this.props.onFetchShareCntActive();\r\n        this.props.onFetchNotifyActive();\r\n        this.props.onFetchCntActive();\r\n        this.props.onFetchQueActive();\r\n        this.props.onFetchPtActive();\r\n        this.props.onFetchReqActive();\r\n\r\n        let cnt = <Loader />;\r\n        if (this.props.postErr) {\r\n            cnt = null\r\n        }\r\n\r\n        if (this.props.cnts && this.props.cnts.length === 0) {\r\n            cnt = <NoAcc \r\n                    isAuth={this.props.userID !== null}\r\n                    det='No content found!'\r\n                    icn='clone'\r\n                    filter />\r\n        }\r\n\r\n        if (this.props.cnts && this.props.cnts.length === 0) {\r\n            cnt = <NoAcc \r\n                    isAuth={this.props.userID !== null}\r\n                    det='No content found!'\r\n                    icn='clone'\r\n                    filter />\r\n        }\r\n\r\n        if (this.props.cnts && this.props.cnts.length > 0) {\r\n            cnt = <Post \r\n                content={this.props.cnts} \r\n                media={this.props.media}\r\n                userOpt={this.showUserOptHandler}\r\n                showCntOpt={this.state.cntOpt}\r\n                fav={this.changeFavoriteHandler}\r\n                changedFav={this.props.changedFav}\r\n                favChange={this.props.favChange}\r\n                share={this.showShareHandler}\r\n                nextMedia={this.changeMediaHandler}\r\n                prevMedia={this.changeMediaHandler}\r\n                mediaItms={this.state.mediaItms}\r\n                removeAnim={this.removeAnimHandler}\r\n                disableAnim={this.state.removeAnim}\r\n                animateItm={this.state.animateItm}\r\n                removePrevMedia={this.state.removePrevMedia}\r\n                playVideo={this.playVideoHandler}\r\n                videoErr={this.props.videoErr}\r\n                video={this.props.postVideo}\r\n                playerIcnId={this.state.playerIcnId}\r\n                slidePlay={this.slidePlayHandler}\r\n                moveSlidePlay={this.moveSlidePlayHandler}\r\n                clearSlidePlay={this.clearSlidePlayhandler}\r\n                changeCnt={this.changeCntHandler}/>\r\n        }\r\n\r\n        return (\r\n          <App>\r\n            { cnt }\r\n          </App>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        userID: state.auth.userID,\r\n        cnts: state.cnt.cnts,\r\n        skipCnt: state.cnt.skipCnt,\r\n        cntTotal: state.cnt.cntTotal,\r\n        changedFav: state.cnt.changedFav,\r\n        favChange: state.cnt.favChange,\r\n        cntErr: state.cnt.cntErr,\r\n        postVideo: state.cnt.postVideo,\r\n        videoErr: state.cnt.videoErr,\r\n        filterDet: state.cnt.filterDet\r\n    };\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        onFetchShareActive: () => dispatch(actions.fetchShareactiveInit()),\r\n        onFetchShareCntActive: () => dispatch(actions.fetchShareCntactiveInit()),\r\n        onFetchQueActive: () => dispatch(actions.fetchQueActiveInit()),\r\n        onFetchPtActive: () => dispatch(actions.fetchPtActiveInit()),\r\n        onFetchCntActive: () => dispatch(actions.fetchCntActiveInit()),\r\n        onFetchNotifyActive: () => dispatch(actions.fetchNotifyactiveInit()),\r\n        onFetchReqActive: () => dispatch(actions.fetchReqActiveInit()),\r\n        onFetchCnt: (userID, fetchType, limit, skipCnt, cntTotal) => dispatch(actions.fetchCntInit(userID, fetchType, limit, skipCnt, cntTotal)),\r\n        onFetchCntReset: () => dispatch(actions.fetchCntReset()),\r\n        onChangeFav: (id, liked, favAdd, changedFav, userID, cntGrp) => dispatch(actions.changeFavInit(id, liked, favAdd, changedFav, userID, cntGrp)),\r\n        onChangeShareID: (shareID,  cntType) => dispatch(actions.shareID(shareID,  cntType)),\r\n        onChangeTag: (path) => dispatch(actions.changeTagsPath(path)),\r\n        onFetchVideo: (id, url) => dispatch(actions.fetchVideo(id, url)),\r\n        onChangeCnt: (id, title, det, confirm, modelType) => dispatch(actions.changeCntInit(id, title, det, confirm,  modelType))\r\n    };\r\n};\r\n\r\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(Posts));"]},"metadata":{},"sourceType":"module"}