(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{Q139:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/robotonly/rbindex",function(){return n("l3M0")}])},iswe:function(e,t,n){},l3M0:function(e,t,n){"use strict";n.r(t);var i=n("ln6h"),a=n.n(i),r=n("0iUn"),o=n("sLSF"),s=n("MI3g"),c=n("a7VT"),l=n("Tit0"),d=n("q1tI"),p=n.n(d),u=n("/MKj"),m=n("DhbN"),h=n("XXOK"),v=n.n(h),_=n("dfwq"),f=n("AT/M"),g=n("vYYK"),y=(n("nOHt"),n("FI//")),b=n.n(y),P=n("hfKm"),O=n.n(P),w=n("2Eek"),C=n.n(w),I=n("XoMD"),j=n.n(I),S=n("Jo+v"),N=n.n(S),A=n("4mXO"),M=n.n(A),F=n("pLtp"),k=n.n(F),E=n("LlRK"),H=n.n(E),x=n("txxq"),D=n.n(x),T=n("ck4X"),V=n("0fJA"),L=n.n(V),U=(n("uk0Q"),n("iswe"),n("5U8D")),q=n("AHvS"),W=n("IP2g"),X=n("Jdky"),R=p.a.createElement;function J(e,t){var n=k()(e);if(M.a){var i=M()(e);t&&(i=i.filter((function(t){return N()(e,t).enumerable}))),n.push.apply(n,i)}return n}function K(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?J(Object(n),!0).forEach((function(t){Object(g.a)(e,t,n[t])})):j.a?C()(e,j()(n)):J(Object(n)).forEach((function(t){O()(e,t,N()(n,t))}))}return e}var Q=function(e){var t=D()(U.c),n=null,i=["reuse-pt__footer--details"],a=["reuse-pt__footer--details__options"],r=null,o=null,s=e.pt.snapshot.length+e.pt.image.length,c=R("li",{className:"reuse-pt__footer--details__options--status",onClick:e.changePt},R(W.a,{icon:["far","eye-slash"],className:"icon icon__reuse-pt--options__dft"}),"Draft"),l=R(W.a,{icon:["far","heart"],className:"icon icon__reuse-pt--footer__heart"}),d=R("img",{src:e.pt.userImage,alt:""});"draft"===e.pt.mode&&(c=R("li",{className:"reuse-pt__footer--details__options--status",onClick:e.changePtPublish},R(W.a,{icon:["far","eye"],className:"icon icon__reuse-pt--options__dft"}),"Publish")),e.pt.username&&!e.pt.userImage&&(d=R(T.a,{name:e.pt.username,size:"36",round:!0}));var p=!0,u=!1,m=void 0;try{for(var h,f=v()(e.changedFav);!(p=(h=f.next()).done);p=!0){var g=h.value;e.pt._id===g.id&&(r=g.favAdd,o=g.liked)}}catch(k){u=!0,m=k}finally{try{p||null==f.return||f.return()}finally{if(u)throw m}}var y=null,b=[].concat(Object(_.a)(e.pt.snapshot),Object(_.a)(e.pt.image)),P=null,O=["reuse-pt__media--wrapper"];if(b.length>0){var w=!1,C=!0,I=!1,j=void 0;try{for(var S,N=v()(e.mediaItms);!(C=(S=N.next()).done);C=!0){var A=S.value;A.id===e.pt._id&&(w=!0,e.animateItm.id===e.pt._id&&("next"!==e.animateItm.direction||e.removePrevAnim||O.push("reuse-pt__media--wrapper__anim"),"prev"!==e.animateItm.direction||e.removePrevAnim||O.push("reuse-pt__media--wrapper__anim-rev")),e.removePrevMedia&&e.removePrevMedia.id===e.pt._id&&M(e.removePrevMedia),F(A.position))}}catch(k){I=!0,j=k}finally{try{C||null==N.return||N.return()}finally{if(I)throw j}}w||(e.removePrevMedia&&e.removePrevMedia.id===e.pt._id&&M(e.removePrevMedia),F(0))}function M(e){"next"===e.type?O.push("reuse-pt__media--wrapper__anim-exit"):O.push("reuse-pt__media--wrapper__anim-exit-rev")}function F(t){var n=b[t],i=n.videoCnt?K({url:"".concat(L.a.url,"/media/image/").concat(n.id)},n,{mediaType:"snapshot"}):K({url:"".concat(L.a.url,"/media/image/").concat(n.id)},n,{mediaType:"image"});i&&"snapshot"===i.mediaType&&(P=e.video&&e.video.id!==i.id?R("div",{className:e.playerIcnId&&e.playerIcnId===e.pt._id?"reuse-pt__media--wrapper__icn reuse-pt__media--wrapper__icn-move":"reuse-pt__media--wrapper__icn",onClick:e.playVideo.bind(this,i)},R(W.a,{icon:["fas","play-circle"],className:"icon icon__reuse-pt--media__play"})):null),y=R("div",{className:"reuse-pt__media"},R("div",{className:e.video&&e.video.id===i.id?"reuse-pt__media--main-wrapper reuse-pt__media--main-wrapper__load":"reuse-pt__media--main-wrapper"},R("div",{onDragStart:function(){return!1},"touch-action":"pan-y",className:e.disableAnim?"reuse-pt__media--wrapper":O.join(" "),onAnimationEnd:e.removeAnim},P,e.video&&e.video.id===i.id&&e.video.url?R("video",{onPointerDown:function(t){return e.slidePlay(e.pt._id,s,t)},onPointerMove:function(t){return e.moveSlidePlay(e.pt._id,s,t)},onPointerUp:function(t){return e.clearSlidePlay(t)},src:e.video.url,controls:!0,autoPlay:!0},R("p",null,"our browser doesn't support embedded videos")):e.video&&e.video.id===i.id?null:R("img",{draggable:"false",onDragStart:function(){return!1},src:i.url,alt:"post",onPointerDown:function(t){return e.slidePlay(e.pt._id,s,t)},onPointerMove:function(t){return e.moveSlidePlay(e.pt._id,s,t)},onPointerUp:function(t){return e.clearSlidePlay(t)}}),e.videoErr&&e.videoErr.id===i.id?R("div",{className:"reuse-pt__video-err",onPointerDown:function(t){return e.slidePlay(e.pt._id,s,t)},onPointerMove:function(t){return e.moveSlidePlay(e.pt._id,s,t)},onPointerUp:function(t){return e.clearSlidePlay(t)}},R("div",{className:"reuse-pt__video-err--icn",onClick:e.playVideo.bind(this,i.id,e.pt.video)},R(W.a,{icon:["fas","redo"],className:"icon icon__reuse-pt--video-err__icn"})),R("h3",null," ",e.videoErr.err.message," ")):null)),b&&b.length>1?R(q.a,null,R("div",{className:"reuse-pt__media--cnt reuse-pt__media--cnt__nxt",onClick:e.nextMedia},R(W.a,{icon:["fas","angle-right"],className:"icon icon__reuse-pt--media__nxt"})),R("div",{className:"reuse-pt__media--cnt reuse-pt__media--cnt__prev",onClick:e.prevMedia},R(W.a,{icon:["fas","angle-left"],className:"icon icon__reuse-pt--media__prev"}))):null)}return e.showPt&&e.showPt.visible&&e.pt._id===e.showPt.id&&(i.push("reuse-pt__footer--details__clk"),a.push("reuse-pt__footer--details__options--visible")),e.pt.userOpt&&(n=R("div",{className:i.join(" "),onClick:e.userOpt},R("div",{className:"reuse-pt__footer--details__mid"}),R("ul",{className:a.join(" ")},R("li",null,R("a",{href:"/edit/post/".concat(e.pt._id)},R(W.a,{icon:["far","edit"],className:"icon icon__reuse-pt--options"}),"Edit")),c,R("li",{onClick:e.deletePt},R(W.a,{icon:["far","trash-alt"],className:"icon icon__reuse-pt--options"}),"Delete")))),e.pt.liked&&null===o&&(l=R(W.a,{icon:["fas","heart"],className:"icon icon__reuse-pt--footer__heart"})),o&&(l=R(W.a,{icon:["fas","heart"],className:"icon icon__reuse-pt--footer__heart"})),R("div",{className:"reuse-pt"},R("div",{className:"reuse-pt__overlaywrapper"},R("div",{className:"reuse-pt__wrapper"},R("ul",{className:"reuse-pt__header"},R("li",null,R("div",{className:"reuse-pt__header--category__img"},d),R("div",{className:"reuse-pt__header--category__det"},R("div",{className:"reuse-pt__header--category__det--name"},R("a",{href:"/user/profile/".concat(e.pt.authorID)}," ",e.pt.username," ")),R("div",{className:"reuse-pt__header--category__det--timePosted"},"@ ",R(H.a,{date:e.pt.postCreated,live:!1,formatter:t})))),R("li",null,R("p",{className:"reuse-pt__header--share__category"},R(W.a,{icon:e.pt.category.length>1?["fas","tags"]:["fas","tag"],className:"icon icon__reuse-pt--header__tag"}),e.pt.category[0]),R("div",{className:"reuse-share"},R("div",{className:"reuse-share__icn",onClick:e.share},R(W.a,{icon:["fas","location-arrow"],className:"icon icon__reuse-share--icn"}))))),y,R("p",{className:"reuse-pt__title"}," ",R("a",{href:"/view/post/"+e.pt._id},e.pt.title)),R("p",{className:"reuse-pt__description"},R("a",{href:"/view/post/"+e.pt._id},String(e.pt.desc).length>149?String(e.pt.desc).substr(0,150)+"...":e.pt.desc)),R("div",{className:"reuse-pt__footer"},R("ul",{className:"reuse-pt__footer--list"},R("li",null,R(W.a,{icon:["far","eye"],className:"icon icon__reuse-pt--footer__eye"}),Object(U.d)(e.pt.view)),R("li",{className:"reuse-pt__footer--list__item-middle"},R(W.a,{icon:["far","comments"],className:"icon icon__reuse-pt--footer__chats"}),Object(U.d)(e.pt.comment)),R("li",null,R("span",{onClick:e.fav},l),Object(U.d)(null!==r?r:e.pt.favorite),e.favChange&&e.favChange.id===e.pt._id?R(X.a,{liked:e.favChange.isLiked}):null)),n))))},z=p.a.createElement,Y=function(e){return b()(e.content,"postCreated",{reverse:!0}).map((function(t,n){return z(Q,{key:n,pt:t,media:e.media,userOpt:e.userOpt.bind(void 0,t._id),showPt:e.showCntOpt,fav:e.fav.bind(void 0,t._id,t.liked,t.favorite,"post"),changedFav:e.changedFav,favChange:e.favChange,share:e.share.bind(void 0,t._id),nextMedia:e.nextMedia.bind(void 0,t._id,t.snapshot.length+t.image.length,"next"),prevMedia:e.prevMedia.bind(void 0,t._id,t.snapshot.length+t.image.length,"prev"),mediaItms:e.mediaItms,removeAnim:e.removeAnim,disableAnim:e.disableAnim,animateItm:e.animateItm,removePrevMedia:e.removePrevMedia,playVideo:e.playVideo,videoErr:e.videoErr,playerIcnId:e.playerIcnId,slidePlay:e.slidePlay,moveSlidePlay:e.moveSlidePlay,clearSlidePlay:e.clearSlidePlay,video:e.video,deletePt:e.changeCnt.bind(void 0,t._id,t.title,"delete","post"),changePt:e.changeCnt.bind(void 0,t._id,t.title,"draft","post")})}))},Z=n("Wv0A"),B=n("Szay"),G=n("4iFl"),$=p.a.createElement,ee=!0,te=function(e){function t(e){var n;Object(r.a)(this,t),n=Object(s.a)(this,Object(c.a)(t).call(this,e)),Object(g.a)(Object(f.a)(n),"onScroll",(function(){document.documentElement.scrollHeight-document.documentElement.scrollTop===document.documentElement.clientHeight&&n.props.onFetchCnt(n.props.userID,"post",n.state.fetchLimit,n.props.skipCnt+n.state.fetchLimit,n.props.cntTotal)})),Object(g.a)(Object(f.a)(n),"showUserOptHandler",(function(e){if(n.state.cntOpt&&n.state.cntOpt.id===e)n.setState((function(e,t){return{cntOpt:Object(U.f)(e.cntOpt,{visible:!e.cntOpt.visible})}}));else{var t={visible:!0,id:e};n.setState({cntOpt:t})}})),Object(g.a)(Object(f.a)(n),"changeFavoriteHandler",(function(e,t,i,a){n.props.onChangeFav(e,t,i,n.props.changedFav,n.props.userID,a)})),Object(g.a)(Object(f.a)(n),"showShareHandler",(function(e){n.props.onChangeShareID(e,"post"),n.props.router.push("/index/post/share")})),Object(g.a)(Object(f.a)(n),"changeMediaHandler",(function(e,t,i){n.setState({removePrevMedia:{id:e,type:i},removeAnim:!1}),n.animateSlider(e,t,i,900)})),Object(g.a)(Object(f.a)(n),"removeAnimHandler",(function(e){n.state.removePrevMedia||n.setState({removeAnim:!0})})),Object(g.a)(Object(f.a)(n),"playVideoHandler",(function(e){n.props.onFetchVideo(e.id,"".concat(L.a.url,"/media/video/").concat(e.videoCnt))})),Object(g.a)(Object(f.a)(n),"slidePlayHandler",(function(e,t,i){i.target.setPointerCapture(i.pointerId),n.setState({playerIcnId:e})})),Object(g.a)(Object(f.a)(n),"clearSlidePlayhandler",(function(e){var t=e.target;t.releasePointerCapture(e.pointerId),t.style.left="0px";var n=document.querySelector(".reuse-pt__media--wrapper__icn-move");n&&(n.style.left="45%")})),Object(g.a)(Object(f.a)(n),"moveSlidePlayHandler",(function(e,t,i){var a=i.target;if(a.hasPointerCapture&&a.hasPointerCapture(i.pointerId)){var r=i.clientX-a.parentElement.offsetLeft-a.offsetWidth/2;r<-(a.offsetWidth/2+a.offsetWidth/4)?ee&&(ee=!1,n.animateSlider(e,t,"next",0)):r>a.offsetWidth/2+a.offsetWidth/4&&ee&&(ee=!1,n.animateSlider(e,t,"prev",0));var o=document.querySelector(".reuse-pt__media--wrapper__icn-move");if(o){var s=r/a.offsetWidth*100;o.style.left=s+45+"%"}a.style.left=r+"px"}})),Object(g.a)(Object(f.a)(n),"animateSlider",(function(e,t,i,a){setTimeout((function(){var a=Object(_.a)(n.state.mediaItms),r=a.filter((function(t){return t.id===e})),o={id:e,position:"next"===i?t>1?1:0:t-1};if(r.length>0){var s=!0,c=!1,l=void 0;try{for(var d,p=v()(r);!(s=(d=p.next()).done);s=!0){var u=d.value;(o={id:u.id,position:"next"===i?u.position+=1:u.position-=1}).position>t-1&&(o=Object(U.f)(o,{position:0})),o.position<0&&(o=Object(U.f)(o,{position:t-1}));var m=a.filter((function(t){return t.id!==e}));m.push(o),n.setState({mediaItms:m,removeAnim:!1,removePrevMedia:null,animateItm:{id:e,direction:i}})}}catch(h){c=!0,l=h}finally{try{s||null==p.return||p.return()}finally{if(c)throw l}}}else a.push(o),n.setState({mediaItms:a,removeAnim:!1,removePrevMedia:null,animateItm:{id:e,direction:i}})}),a),setTimeout((function(){ee=!0}),500)})),Object(g.a)(Object(f.a)(n),"changeCntHandler",(function(e,t,i,a){var r=String(t).length>50?String(t).substr(0,50)+"...":t;n.props.onChangeCnt(e,r,i,!1,a)}));var i=0;return i=window.innerHeight>=1200?18:window.innerHeight>=900?12:window.innerHeight>=500?9:6,n.state={cntOpt:null,fetchLimit:i,filterTag:"post",mediaItms:[],animateItm:null,removeAnim:!1,removePrevMedia:null,playerIcnId:null,animationComplete:!0,scrollEnable:!1},n}return Object(l.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){}},{key:"componentDidUpdate",value:function(){this.props.cnts&&this.props.cnts.length>0&&!this.state.scrollEnable&&(window.addEventListener("scroll",this.onScroll,!1),this.setState({scrollEnable:!0}))}},{key:"componentWillUnmount",value:function(){this.props.onFetchCntReset(),window.removeEventListener("scroll",this.onScroll,!1)}},{key:"render",value:function(){this.props.onFetchShareActive(),this.props.onFetchShareCntActive(),this.props.onFetchNotifyActive(),this.props.onFetchCntActive(),this.props.onFetchQueActive(),this.props.onFetchPtActive(),this.props.onFetchReqActive();var e=$(Z.a,null);return this.props.postErr&&(e=null),this.props.cnts&&0===this.props.cnts.length&&(e=$(B.a,{isAuth:null!==this.props.userID,det:"No content found!",icn:"clone",filter:!0})),this.props.cnts&&0===this.props.cnts.length&&(e=$(B.a,{isAuth:null!==this.props.userID,det:"No content found!",icn:"clone",filter:!0})),this.props.cnts&&this.props.cnts.length>0&&(e=$(Y,{content:this.props.cnts,media:this.props.media,userOpt:this.showUserOptHandler,showCntOpt:this.state.cntOpt,fav:this.changeFavoriteHandler,changedFav:this.props.changedFav,favChange:this.props.favChange,share:this.showShareHandler,nextMedia:this.changeMediaHandler,prevMedia:this.changeMediaHandler,mediaItms:this.state.mediaItms,removeAnim:this.removeAnimHandler,disableAnim:this.state.removeAnim,animateItm:this.state.animateItm,removePrevMedia:this.state.removePrevMedia,playVideo:this.playVideoHandler,videoErr:this.props.videoErr,video:this.props.postVideo,playerIcnId:this.state.playerIcnId,slidePlay:this.slidePlayHandler,moveSlidePlay:this.moveSlidePlayHandler,clearSlidePlay:this.clearSlidePlayhandler,changeCnt:this.changeCntHandler})),$(G.a,null,e)}}]),t}(d.Component),ne=Object(u.b)((function(e){return{userID:e.auth.userID,cnts:e.cnt.cnts,skipCnt:e.cnt.skipCnt,cntTotal:e.cnt.cntTotal,changedFav:e.cnt.changedFav,favChange:e.cnt.favChange,cntErr:e.cnt.cntErr,postVideo:e.cnt.postVideo,videoErr:e.cnt.videoErr,filterDet:e.cnt.filterDet}}),(function(e){return{onFetchShareActive:function(){return e(m.Z())},onFetchShareCntActive:function(){return e(m.Y())},onFetchQueActive:function(){return e(m.T())},onFetchPtActive:function(){return e(m.R())},onFetchCntActive:function(){return e(m.z())},onFetchNotifyActive:function(){return e(m.P())},onFetchReqActive:function(){return e(m.V())},onFetchCnt:function(t,n,i,a,r){return e(m.C(t,n,i,a,r))},onFetchCntReset:function(){return e(m.D())},onChangeFav:function(t,n,i,a,r,o){return e(m.h(t,n,i,a,r,o))},onChangeShareID:function(t,n){return e(m.yb(t,n))},onChangeTag:function(t){return e(m.p(t))},onFetchVideo:function(t,n){return e(m.fb(t,n))},onChangeCnt:function(t,n,i,a,r){return e(m.d(t,n,i,a,r))}}}))(te),ie=n("tM3w"),ae=p.a.createElement,re=function(e){function t(){return Object(r.a)(this,t),Object(s.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return ae(u.a,{store:this.props.store},ae(ne,null))}}],[{key:"getInitialProps",value:function(e){var t,n;return a.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return t=e.ctx,n=t.store,t.isServer,t.req,n.getState().cnt.cnts||(n.dispatch(m.C(null,"post",200,0,0)),n.dispatch(m.cb(null))),i.abrupt("return",{});case 3:case"end":return i.stop()}}))}}]),t}(d.Component);t.default=Object(ie.a)(re)}},[["Q139",1,2,5,6,0,4,3,7,10,9,8]]]);