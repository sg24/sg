{"ast":null,"code":"var __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React from 'react';\nimport TimeAgo from 'react-timeago';\nimport buildFormatter from 'react-timeago/lib/formatters/buildFormatter';\nimport Avatar from 'react-avatar';\nimport './QuestionContent.css';\nimport '../../../UI/ShareIcn/ShareIcn.css';\nimport { transformNumber, engStrings } from '../../../../shared/utility';\nimport Aux from '../../../../hoc/Auxs/Auxs';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport FavoriteActive from '../../../UI/FavoriteActive/FavoriteActive';\n\nconst questionContent = props => {\n  const formatter = buildFormatter(engStrings);\n  let userOpt = null;\n  let userOptDetClass = ['reuse-que__footer--details'];\n  let userOptClass = ['reuse-que__footer--details__options'];\n  let favAdd = null;\n  let isLiked = null;\n  let title = String(props.que.title).length > 149 ? String(props.que.title).substr(0, 150) + '...' : props.que.title;\n  let mediaTotal = props.que.snapshot.length + props.que.image.length;\n\n  let desc = __jsx(\"p\", {\n    className: \"reuse-que__content--title\"\n  }, __jsx(\"a\", {\n    href: \"/view/question/\" + props.que._id\n  }, title));\n\n  let userOptMode = __jsx(\"li\", {\n    className: \"reuse-que__footer--details__options--status\",\n    onClick: props.changeCnt\n  }, __jsx(FontAwesomeIcon, {\n    icon: ['far', 'eye-slash'],\n    className: \"icon icon__reuse-que--options__dft\"\n  }), \"Draft\");\n\n  let fav = __jsx(FontAwesomeIcon, {\n    icon: ['far', 'heart'],\n    className: \"icon icon__reuse-que--footer__heart\"\n  });\n\n  let userImage = __jsx(\"img\", {\n    src: props.que.userImage,\n    alt: \"\"\n  });\n\n  if (props.que.mode === 'draft') {\n    userOptMode = __jsx(\"li\", {\n      className: \"reuse-que__footer--details__options--status\",\n      onClick: props.changeCntPublish\n    }, __jsx(FontAwesomeIcon, {\n      icon: ['far', 'eye'],\n      className: \"icon icon__reuse-que--options__dft\"\n    }), \"Publish\");\n  }\n\n  if (props.que.username && !props.que.userImage) {\n    userImage = __jsx(Avatar, {\n      name: props.que.username,\n      size: \"36\",\n      round: true\n    });\n  }\n\n  for (let changedFav of props.changedFav) {\n    if (props.que._id === changedFav.id) {\n      favAdd = changedFav.favAdd;\n      isLiked = changedFav.liked;\n    }\n  }\n\n  let media = null;\n  let mediaCnt = [...props.que.snapshot, ...props.que.image];\n  let playVideo = null;\n  let mediaWrapperClass = ['reuse-que__media--wrapper'];\n\n  if (mediaCnt.length > 0) {\n    let isShowned = false;\n\n    for (let mediaItm of props.mediaItms) {\n      if (mediaItm.id === props.que._id) {\n        isShowned = true;\n\n        if (props.animateItm.id === props.que._id) {\n          if (props.animateItm.direction === 'next' && !props.removePrevAnim) {\n            mediaWrapperClass.push('reuse-que__media--wrapper__anim');\n          }\n\n          if (props.animateItm.direction === 'prev' && !props.removePrevAnim) {\n            mediaWrapperClass.push('reuse-que__media--wrapper__anim-rev');\n          }\n        } // if (props.animateItm === null) {\n        //     mediaWrapperClass.push('reuse-que__media--wrapper__anim');\n        // }\n\n\n        if (props.removePrevMedia && props.removePrevMedia.id === props.que._id) {\n          showPrevAnim(props.removePrevMedia);\n        }\n\n        displayMedia(mediaItm.position);\n      }\n    }\n\n    if (!isShowned) {\n      if (props.removePrevMedia && props.removePrevMedia.id === props.que._id) {\n        showPrevAnim(props.removePrevMedia);\n      }\n\n      displayMedia(0);\n    }\n  }\n\n  function showPrevAnim(prevAnim) {\n    if (prevAnim.type === 'next') {\n      mediaWrapperClass.push('reuse-que__media--wrapper__anim-exit');\n    } else {\n      mediaWrapperClass.push('reuse-que__media--wrapper__anim-exit-rev');\n    }\n  }\n\n  function displayMedia(position) {\n    let updateMedia = mediaCnt[position];\n    let curMedia = updateMedia.videoCnt ? _objectSpread({\n      url: `${window.location.protocol + '//' + window.location.host}/media/image/${updateMedia.id}`\n    }, updateMedia, {\n      mediaType: 'snapshot'\n    }) : _objectSpread({\n      url: `${window.location.protocol + '//' + window.location.host}/media/image/${updateMedia.id}`\n    }, updateMedia, {\n      mediaType: 'image'\n    });\n\n    if (curMedia && curMedia.mediaType === 'snapshot') {\n      playVideo = props.video && props.video.id !== curMedia.id ? __jsx(\"div\", {\n        className: props.playerIcnId && props.playerIcnId === props.que._id ? 'reuse-que__media--wrapper__icn reuse-que__media--wrapper__icn-move' : 'reuse-que__media--wrapper__icn',\n        onClick: props.playVideo.bind(this, curMedia)\n      }, __jsx(FontAwesomeIcon, {\n        icon: ['fas', 'play-circle'],\n        className: \"icon icon__reuse-que--media__play\"\n      })) : null;\n    }\n\n    media = __jsx(\"div\", {\n      className: \"reuse-que__media\"\n    }, __jsx(\"div\", {\n      className: props.video && props.video.id === curMedia.id ? 'reuse-que__media--main-wrapper reuse-que__media--main-wrapper__load' : 'reuse-que__media--main-wrapper'\n    }, __jsx(\"div\", {\n      onDragStart: () => false,\n      \"touch-action\": \"pan-y\",\n      className: props.disableAnim ? 'reuse-que__media--wrapper' : mediaWrapperClass.join(' '),\n      onAnimationEnd: props.removeAnim\n    }, playVideo, props.video && props.video.id === curMedia.id && props.video.url ? __jsx(\"video\", {\n      onPointerDown: event => props.slidePlay(props.que._id, mediaTotal, event),\n      onPointerMove: event => props.moveSlidePlay(props.que._id, mediaTotal, event),\n      onPointerUp: event => props.clearSlidePlay(event),\n      src: props.video.url,\n      controls: true,\n      autoPlay: true\n    }, __jsx(\"p\", null, \"our browser doesn't support embedded videos\")) : props.video && props.video.id === curMedia.id ? null : __jsx(\"img\", {\n      draggable: \"false\",\n      onDragStart: () => false,\n      src: curMedia.url,\n      alt: \"question\",\n      onPointerDown: event => props.slidePlay(props.que._id, mediaTotal, event),\n      onPointerMove: event => props.moveSlidePlay(props.que._id, mediaTotal, event),\n      onPointerUp: event => props.clearSlidePlay(event)\n    }), props.videoErr && props.videoErr.id === curMedia.id ? __jsx(\"div\", {\n      className: \"reuse-que__video-err\",\n      onPointerDown: event => props.slidePlay(props.que._id, mediaTotal, event),\n      onPointerMove: event => props.moveSlidePlay(props.que._id, mediaTotal, event),\n      onPointerUp: event => props.clearSlidePlay(event)\n    }, __jsx(\"div\", {\n      className: \"reuse-que__video-err--icn\",\n      onClick: props.playVideo.bind(this, curMedia.id, props.que.video)\n    }, __jsx(FontAwesomeIcon, {\n      icon: ['fas', 'redo'],\n      className: \"icon icon__reuse-que--video-err__icn\"\n    })), __jsx(\"h3\", null, \" \", props.videoErr.err.message, \" \")) : null)), mediaCnt && mediaCnt.length > 1 ? __jsx(Aux, null, __jsx(\"div\", {\n      className: \"reuse-que__media--cnt reuse-que__media--cnt__nxt\",\n      onClick: props.nextMedia\n    }, __jsx(FontAwesomeIcon, {\n      icon: ['fas', 'angle-right'],\n      className: \"icon icon__reuse-que--media__nxt\"\n    })), __jsx(\"div\", {\n      className: \"reuse-que__media--cnt reuse-que__media--cnt__prev\",\n      onClick: props.prevMedia\n    }, __jsx(FontAwesomeIcon, {\n      icon: ['fas', 'angle-left'],\n      className: \"icon icon__reuse-que--media__prev\"\n    }))) : null);\n  }\n\n  if (mediaTotal > 0) {\n    desc = __jsx(Aux, null, __jsx(\"p\", {\n      className: \"reuse-que__content--title reuse-que__content--title__que-img\"\n    }, __jsx(\"a\", {\n      href: \"/view/question/\" + props.que._id\n    }, title)), __jsx(\"div\", {\n      className: \"reuse-que__content--wrapper\"\n    }, media));\n  }\n\n  if (props.showCnt && props.showCnt.visible && props.que._id === props.showCnt.id) {\n    userOptDetClass.push('reuse-que__footer--details__clk');\n    userOptClass.push('reuse-que__footer--details__options--visible');\n  }\n\n  if (props.que.userOpt) {\n    userOpt = __jsx(\"div\", {\n      className: userOptDetClass.join(' '),\n      onClick: props.userOpt\n    }, __jsx(\"div\", {\n      className: \"reuse-que__footer--details__mid\"\n    }), __jsx(\"ul\", {\n      className: userOptClass.join(' ')\n    }, __jsx(\"li\", null, __jsx(\"a\", {\n      href: `/edit/question/${props.que._id}`\n    }, __jsx(FontAwesomeIcon, {\n      icon: ['far', 'edit'],\n      className: \"icon icon__reuse-que--options\"\n    }), \"Edit\")), userOptMode, __jsx(\"li\", {\n      onClick: props.deleteCnt\n    }, __jsx(FontAwesomeIcon, {\n      icon: ['far', 'trash-alt'],\n      className: \"icon icon__reuse-que--options\"\n    }), \"Delete\")));\n  }\n\n  if (props.que.liked && isLiked === null) {\n    fav = __jsx(FontAwesomeIcon, {\n      icon: ['fas', 'heart'],\n      className: \"icon icon__reuse-que--footer__heart\"\n    });\n  }\n\n  if (isLiked) {\n    fav = __jsx(FontAwesomeIcon, {\n      icon: ['fas', 'heart'],\n      className: \"icon icon__reuse-que--footer__heart\"\n    });\n  }\n\n  return __jsx(\"div\", {\n    className: \"reuse-que\"\n  }, __jsx(\"ul\", {\n    className: \"reuse-que__header\"\n  }, __jsx(\"li\", null, __jsx(\"div\", {\n    className: \"reuse-que__header--category__img\"\n  }, userImage), __jsx(\"div\", {\n    className: \"reuse-que__header--category__det\"\n  }, __jsx(\"div\", {\n    className: \"reuse-que__header--category__det--name\"\n  }, __jsx(\"a\", {\n    href: `/user/profile/${props.que.authorID}`\n  }, props.que.username)), __jsx(\"div\", {\n    className: \"reuse-que__header--category__det--timePosted\"\n  }, \"@ \", __jsx(TimeAgo, {\n    date: props.que.queCreated,\n    live: false,\n    formatter: formatter\n  })))), __jsx(\"li\", null, __jsx(\"p\", {\n    className: \"reuse-que__header--share__category\"\n  }, __jsx(FontAwesomeIcon, {\n    icon: props.que.category.length > 1 ? ['fas', 'tags'] : ['fas', 'tag'],\n    className: \"icon icon__reuse-que--header__tag\"\n  }), props.que.category[0]), __jsx(\"div\", {\n    className: \"reuse-share\"\n  }, __jsx(\"div\", {\n    className: \"reuse-share__icn\",\n    onClick: props.share\n  }, __jsx(FontAwesomeIcon, {\n    icon: ['fas', 'location-arrow'],\n    className: \"icon icon__reuse-share--icn\"\n  }))))), __jsx(\"div\", {\n    className: \"reuse-que__content\"\n  }, desc), __jsx(\"div\", {\n    className: \"reuse-que__ans\"\n  }, __jsx(\"div\", {\n    className: \"reuse-que__ans--wrapper\"\n  }, __jsx(\"div\", {\n    className: \"reuse-que__ans--total\"\n  }, props.que.comment), \"Answer\")), __jsx(\"div\", {\n    className: \"reuse-que__footer\"\n  }, __jsx(\"ul\", {\n    className: \"reuse-que__footer--list\"\n  }, __jsx(\"li\", null, __jsx(FontAwesomeIcon, {\n    icon: ['far', 'thumbs-up'],\n    className: \"icon icon__reuse-que--footer__thumbup\"\n  }), transformNumber(props.que.helpFull)), __jsx(\"li\", {\n    className: \"reuse-que__footer--list__item-middle\"\n  }, __jsx(FontAwesomeIcon, {\n    icon: ['far', 'thumbs-down'],\n    className: \"icon icon__reuse-que--footer__thumbdown\"\n  }), transformNumber(props.que.notHelpFull)), __jsx(\"li\", null, __jsx(\"span\", {\n    onClick: props.fav\n  }, fav), transformNumber(favAdd !== null ? favAdd : props.que.favorite), props.favChange && props.favChange.id === props.que._id ? __jsx(FavoriteActive, {\n    liked: props.favChange.isLiked\n  }) : null)), userOpt));\n};\n\nexport default questionContent;","map":null,"metadata":{},"sourceType":"module"}