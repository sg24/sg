{"ast":null,"code":"import _JSON$stringify from \"@babel/runtime-corejs2/core-js/json/stringify\";\nimport _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\n\nvar _marked =\n/*#__PURE__*/\n_regeneratorRuntime.mark(fetchCntInitSaga),\n    _marked2 =\n/*#__PURE__*/\n_regeneratorRuntime.mark(changeFavSaga),\n    _marked3 =\n/*#__PURE__*/\n_regeneratorRuntime.mark(changeCntInitSaga);\n\nimport { put, delay } from 'redux-saga/effects';\nimport { changeFav } from '../../shared/utility';\nimport * as actions from '../../store/actions/index';\nimport axios from '../../axios';\nexport function fetchCntInitSaga(action) {\n  var model, categ, response;\n  return _regeneratorRuntime.wrap(function fetchCntInitSaga$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          model = action.fetchType === 'post' ? '/post' : action.fetchType === 'question' || action.fetchType === 'shared' ? '/question' : '/' + action.fetchType;\n          categ = action.fetchType === 'shared' ? \"shared-\".concat(action.userID) : action.fetchType;\n\n          if (!(action.cntTotal > action.skipCnt)) {\n            _context.next = 5;\n            break;\n          }\n\n          _context.next = 5;\n          return put(actions.fetchCntStart());\n\n        case 5:\n          _context.prev = 5;\n\n          if (!(action.cntTotal === 0 || action.cntTotal > action.skipCnt)) {\n            _context.next = 12;\n            break;\n          }\n\n          _context.next = 9;\n          return axios.post(model, null, {\n            headers: {\n              'data-categ': categ,\n              'limit': action.fetchLimit,\n              'skip': action.skipCnt\n            }\n          });\n\n        case 9:\n          response = _context.sent;\n          _context.next = 12;\n          return put(actions.fetchCnt(response.data.cnt, action.skipCnt, response.data.cntTotal));\n\n        case 12:\n          _context.next = 18;\n          break;\n\n        case 14:\n          _context.prev = 14;\n          _context.t0 = _context[\"catch\"](5);\n          _context.next = 18;\n          return put(actions.fetchCntFail(_context.t0));\n\n        case 18:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, _marked, null, [[5, 14]]);\n}\nexport function changeFavSaga(action) {\n  var updateFav, field;\n  return _regeneratorRuntime.wrap(function changeFavSaga$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          updateFav = changeFav(action.id, action.liked, action.favAdd, action.changedFav);\n          _context2.next = 3;\n          return put(actions.changeMainFavoriteStart(updateFav.favDet.liked));\n\n        case 3:\n          _context2.next = 5;\n          return put(actions.changeFavPtStart(updateFav.favDet.id, updateFav.favDet.liked));\n\n        case 5:\n          _context2.prev = 5;\n          field = action.cntGrp === 'post' ? 'postID' : action.cntGrp === 'question' ? 'queID' : 'pwtID';\n          _context2.next = 9;\n          return axios.patch('/header', {\n            id: updateFav.favDet.id,\n            model: action.cntGrp,\n            field: field\n          }, {\n            headers: {\n              'data-categ': 'changefavorite'\n            }\n          });\n\n        case 9:\n          _context2.next = 11;\n          return delay(500);\n\n        case 11:\n          _context2.next = 13;\n          return put(actions.changeMainFavoriteReset());\n\n        case 13:\n          _context2.next = 15;\n          return put(actions.changeFav(updateFav.updateChangeFav));\n\n        case 15:\n          _context2.next = 25;\n          break;\n\n        case 17:\n          _context2.prev = 17;\n          _context2.t0 = _context2[\"catch\"](5);\n          _context2.next = 21;\n          return delay(500);\n\n        case 21:\n          _context2.next = 23;\n          return put(actions.changeMainFavoriteReset());\n\n        case 23:\n          _context2.next = 25;\n          return put(actions.changeFavPtFail());\n\n        case 25:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  }, _marked2, null, [[5, 17]]);\n}\nexport function changeCntInitSaga(action) {\n  var field, payload;\n  return _regeneratorRuntime.wrap(function changeCntInitSaga$(_context3) {\n    while (1) {\n      switch (_context3.prev = _context3.next) {\n        case 0:\n          field = action.modelType === 'post' ? 'postID' : action.modelType === 'question' ? 'queID' : 'pwtID';\n\n          if (action.confirm) {\n            _context3.next = 5;\n            break;\n          }\n\n          _context3.next = 4;\n          return put(actions.changeCntStart(action.title, action.id, action.det, action.modelType));\n\n        case 4:\n          return _context3.abrupt(\"return\");\n\n        case 5:\n          if (!(action.det === 'addUser')) {\n            _context3.next = 8;\n            break;\n          }\n\n          _context3.next = 8;\n          return put(actions.changeCntStart(action.title, action.id, action.det, action.modelType));\n\n        case 8:\n          _context3.prev = 8;\n\n          if (!(action.det === 'delete')) {\n            _context3.next = 15;\n            break;\n          }\n\n          payload = _JSON$stringify({\n            id: action.id,\n            model: action.modelType,\n            field: field\n          });\n          _context3.next = 13;\n          return axios[\"delete\"]('/header', {\n            headers: {\n              'data-categ': \"deletecnt-\".concat(payload)\n            }\n          });\n\n        case 13:\n          _context3.next = 22;\n          break;\n\n        case 15:\n          if (!(action.modelType === 'user')) {\n            _context3.next = 20;\n            break;\n          }\n\n          _context3.next = 18;\n          return axios.patch('/users', {\n            id: action.id\n          }, {\n            headers: {\n              'data-categ': action.det\n            }\n          });\n\n        case 18:\n          _context3.next = 22;\n          break;\n\n        case 20:\n          _context3.next = 22;\n          return axios.patch('/header', {\n            id: action.id,\n            model: action.modelType,\n            field: field\n          }, {\n            headers: {\n              'data-categ': 'draftmode'\n            }\n          });\n\n        case 22:\n          _context3.next = 24;\n          return put(actions.changeCnt());\n\n        case 24:\n          _context3.next = 26;\n          return delay(1000);\n\n        case 26:\n          _context3.next = 28;\n          return put(actions.changeCntReset(true));\n\n        case 28:\n          _context3.next = 38;\n          break;\n\n        case 30:\n          _context3.prev = 30;\n          _context3.t0 = _context3[\"catch\"](8);\n          _context3.next = 34;\n          return put(actions.changeCntFail(_context3.t0));\n\n        case 34:\n          _context3.next = 36;\n          return delay(1000);\n\n        case 36:\n          _context3.next = 38;\n          return put(actions.changeCntReset(false));\n\n        case 38:\n        case \"end\":\n          return _context3.stop();\n      }\n    }\n  }, _marked3, null, [[8, 30]]);\n}","map":null,"metadata":{},"sourceType":"module"}