{"ast":null,"code":"import _getIterator from \"@babel/runtime-corejs2/core-js/get-iterator\";\nimport _toConsumableArray from \"@babel/runtime-corejs2/helpers/esm/toConsumableArray\";\nvar __jsx = React.createElement;\nimport React from 'react';\nimport MetaTags from 'react-meta-tags';\nimport Avatar from 'react-avatar';\nimport TimeAgo from 'react-timeago';\nimport buildFormatter from 'react-timeago/lib/formatters/buildFormatter';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'; // import { Editor } from 'react-draft-wysiwyg';\n\nimport { convertFromRaw } from 'draft-js';\nimport { stateToHTML } from \"draft-js-export-html\";\nimport ModelComments from './ModelComments/ModelComments';\nimport Head from 'next/head';\nimport './react-draft-wysiwyg.css';\nimport './ModelContent.css';\nimport { transformNumber, engStrings } from '../../../../shared/utility';\nimport '../../../UI/ShareIcn/ShareIcn.css';\nimport FavoriteActive from '../../../UI/FavoriteActive/FavoriteActive';\nimport Aux from '../../../../hoc/Auxs/Auxs';\n\nvar modelContent = function modelContent(props) {\n  var formatter = buildFormatter(engStrings);\n  var desc = JSON.parse(props.cnt.desc);\n\n  if (props.cntGrp !== 'post') {\n    desc.blocks[0].text = props.cnt.title;\n  }\n\n  var raw = convertFromRaw(desc);\n  var htmlContent = stateToHTML(raw);\n  var edit = null;\n\n  var userStatus = __jsx(\"li\", {\n    className: \"reuse-view__main--det__user--status\"\n  }, __jsx(\"div\", {\n    className: \"reuse-view__main--det__user--status__off\"\n  }), __jsx(TimeAgo, {\n    date: props.cnt.offline,\n    live: false,\n    formatter: formatter\n  }));\n\n  var favAdd = null;\n  var isLiked = null;\n\n  var userImage = __jsx(\"img\", {\n    src: props.cnt.userImage,\n    alt: \"\"\n  });\n\n  var fav = __jsx(FontAwesomeIcon, {\n    icon: ['far', 'heart'],\n    className: \"icon icon__reuse-view--fav\"\n  });\n\n  var userOpt = null;\n  var userOptDetClass = ['reuse-view__main--footer__user-det'];\n  var userOptClass = ['reuse-view__main--footer__user-det--opt'];\n\n  var userOptMode = __jsx(\"li\", {\n    onClick: props.changeCnt\n  }, __jsx(FontAwesomeIcon, {\n    icon: ['far', 'eye-slash'],\n    className: \"icon icon__reuse-view--options\"\n  }), \"Draft\");\n\n  var header = null;\n  var comments = null;\n  var media = null;\n  var mediaTotal = props.cnt.snapshot.length + props.cnt.image.length;\n  var mediaCnt = [].concat(_toConsumableArray(props.cnt.snapshot), _toConsumableArray(props.cnt.image));\n  var playVideo = null;\n  var mediaWrapperClass = ['reuse-pt__media--wrapper'];\n  var meta = null;\n  var metaCateg = props.cnt.category && props.cnt.category.length > 0 ? props.cnt.category.filter(function (categ) {\n    return categ === 'facebook game';\n  }) : [];\n\n  if (metaCateg.length > 0) {\n    var yrs = Math.floor(Math.random() * 20);\n    meta = __jsx(Head, null, __jsx(\"meta\", {\n      property: \"og:title\",\n      content: \"This is when you marry, next \".concat(yrs, \" \").concat(yrs > 1 ? 'years' : 'year')\n    }), __jsx(\"meta\", {\n      property: \"og:type\",\n      content: \"article\"\n    }), __jsx(\"meta\", {\n      property: \"og:url\",\n      content: \"\".concat(props.url)\n    }), __jsx(\"meta\", {\n      property: \"og:image\",\n      content: \"https://images.pexels.com/photos/256737/pexels-photo-256737.jpeg?auto=compress&cs=tinysrgb&fit=crop&h=600&w=1200\"\n    }), __jsx(\"meta\", {\n      property: \"og:description\",\n      content: \"slodge24 | Knowledge sharing platform.\"\n    }), __jsx(\"meta\", {\n      property: \"og:site_name\",\n      content: \"https://slodge24.com - When will you get married?\"\n    }));\n  } else {\n    meta = __jsx(Head, null, __jsx(\"meta\", {\n      property: \"og:title\",\n      content: \"\".concat(props.cnt.title)\n    }), __jsx(\"meta\", {\n      property: \"og:type\",\n      content: \"article\"\n    }), __jsx(\"meta\", {\n      property: \"og:url\",\n      content: \"\".concat(props.url)\n    }), mediaCnt.length > 0 ? __jsx(\"meta\", {\n      property: \"og:image\",\n      content: \"\".concat(mediaCnt[0].url)\n    }) : null, __jsx(\"meta\", {\n      property: \"og:description\",\n      content: \"\".concat(props.cntGrp === 'post' ? desc.blocks[0].text : 'slodge24 | Knowledge sharing platform')\n    }), __jsx(\"meta\", {\n      property: \"og:site_name\",\n      content: \"https://slodge24.com\"\n    }));\n  }\n\n  if (mediaCnt.length > 0 && props.cntGrp !== 'poet') {\n    var isShowned = false;\n    var _iteratorNormalCompletion = true;\n    var _didIteratorError = false;\n    var _iteratorError = undefined;\n\n    try {\n      for (var _iterator = _getIterator(props.mediaItms), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n        var mediaItm = _step.value;\n\n        if (mediaItm.id === props.cnt._id) {\n          isShowned = true;\n\n          if (props.animateItm.id === props.cnt._id) {\n            if (props.animateItm.direction === 'next' && !props.removePrevAnim) {\n              mediaWrapperClass.push('reuse-pt__media--wrapper__anim');\n            }\n\n            if (props.animateItm.direction === 'prev' && !props.removePrevAnim) {\n              mediaWrapperClass.push('reuse-pt__media--wrapper__anim-rev');\n            }\n          }\n\n          if (props.animateItm === null) {\n            mediaWrapperClass.push('reuse-pt__media--wrapper__anim');\n          }\n\n          if (props.removePrevMedia && props.removePrevMedia.id === props.cnt._id) {\n            showPrevAnim(props.removePrevMedia);\n          }\n\n          displayMedia(mediaItm.position);\n        }\n      }\n    } catch (err) {\n      _didIteratorError = true;\n      _iteratorError = err;\n    } finally {\n      try {\n        if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n          _iterator[\"return\"]();\n        }\n      } finally {\n        if (_didIteratorError) {\n          throw _iteratorError;\n        }\n      }\n    }\n\n    if (!isShowned) {\n      if (props.removePrevMedia && props.removePrevMedia.id === props.cnt._id) {\n        showPrevAnim(props.removePrevMedia);\n      }\n\n      displayMedia(0);\n    }\n  }\n\n  function showPrevAnim(prevAnim) {\n    if (prevAnim.type === 'next') {\n      mediaWrapperClass.push('reuse-pt__media--wrapper__anim-exit');\n    } else {\n      mediaWrapperClass.push('reuse-pt__media--wrapper__anim-exit-rev');\n    }\n  }\n\n  function displayMedia(position) {\n    var curMedia = mediaCnt[position];\n\n    if (curMedia && curMedia.mediaType === 'snapshot') {\n      playVideo = props.video && props.video.id !== curMedia.id ? __jsx(\"div\", {\n        className: props.playerIcnId && props.playerIcnId === props.cnt._id ? 'reuse-pt__media--wrapper__icn reuse-pt__media--wrapper__icn-move' : 'reuse-pt__media--wrapper__icn',\n        onClick: props.playVideo.bind(this, curMedia)\n      }, __jsx(FontAwesomeIcon, {\n        icon: ['fas', 'play-circle'],\n        className: \"icon icon__reuse-pt--media__play\"\n      })) : null;\n    }\n\n    media = __jsx(\"div\", {\n      className: \"reuse-pt__media\"\n    }, __jsx(\"div\", {\n      className: props.video && props.video.id === curMedia.id ? 'reuse-pt__media--main-wrapper reuse-pt__media--main-wrapper__load' : 'reuse-pt__media--main-wrapper'\n    }, __jsx(\"div\", {\n      onDragStart: function onDragStart() {\n        return false;\n      },\n      \"touch-action\": \"pan-y\",\n      className: props.disableAnim ? 'reuse-pt__media--wrapper' : mediaWrapperClass.join(' '),\n      onAnimationEnd: props.removeAnim\n    }, playVideo, props.video && props.video.id === curMedia.id && props.video.url ? __jsx(\"video\", {\n      onPointerDown: function onPointerDown(event) {\n        return props.slidePlay(props.cnt._id, mediaTotal, event);\n      },\n      onPointerMove: function onPointerMove(event) {\n        return props.moveSlidePlay(props.cnt._id, mediaTotal, event);\n      },\n      onPointerUp: function onPointerUp(event) {\n        return props.clearSlidePlay(event);\n      },\n      src: props.video.url,\n      controls: true,\n      autoPlay: true\n    }, __jsx(\"p\", null, \"our browser doesn't support embedded videos\")) : props.video && props.video.id === curMedia.id ? null : __jsx(\"img\", {\n      draggable: \"false\",\n      onDragStart: function onDragStart() {\n        return false;\n      },\n      src: curMedia.url,\n      alt: \"post\",\n      onPointerDown: function onPointerDown(event) {\n        return props.slidePlay(props.cnt._id, mediaTotal, event);\n      },\n      onPointerMove: function onPointerMove(event) {\n        return props.moveSlidePlay(props.cnt._id, mediaTotal, event);\n      },\n      onPointerUp: function onPointerUp(event) {\n        return props.clearSlidePlay(event);\n      }\n    }), props.videoErr && props.videoErr.id === curMedia.id ? __jsx(\"div\", {\n      className: \"reuse-pt__video-err\",\n      onPointerDown: function onPointerDown(event) {\n        return props.slidePlay(props.cnt._id, mediaTotal, event);\n      },\n      onPointerMove: function onPointerMove(event) {\n        return props.moveSlidePlay(props.cnt._id, mediaTotal, event);\n      },\n      onPointerUp: function onPointerUp(event) {\n        return props.clearSlidePlay(event);\n      }\n    }, __jsx(\"div\", {\n      className: \"reuse-pt__video-err--icn\",\n      onClick: props.playVideo.bind(this, curMedia.id, props.cnt.video)\n    }, __jsx(FontAwesomeIcon, {\n      icon: ['fas', 'redo'],\n      className: \"icon icon__reuse-pt--video-err__icn\"\n    })), __jsx(\"h3\", null, \" \", props.videoErr.err.message, \" \")) : null)), mediaCnt && mediaCnt.length > 1 ? __jsx(Aux, null, __jsx(\"div\", {\n      className: \"reuse-pt__media--cnt reuse-pt__media--cnt__nxt\",\n      onClick: props.nextMedia\n    }, __jsx(FontAwesomeIcon, {\n      icon: ['fas', 'angle-right'],\n      className: \"icon icon__reuse-pt--media__nxt\"\n    })), __jsx(\"div\", {\n      className: \"reuse-pt__media--cnt reuse-pt__media--cnt__prev\",\n      onClick: props.prevMedia\n    }, __jsx(FontAwesomeIcon, {\n      icon: ['fas', 'angle-left'],\n      className: \"icon icon__reuse-pt--media__prev\"\n    }))) : null);\n  }\n\n  if (props.cntGrp === 'post') {\n    header = __jsx(\"div\", {\n      className: \"reuse-view__main--header\"\n    }, __jsx(\"p\", {\n      className: \"reuse-view__main--header__title\"\n    }, props.cnt.title), __jsx(\"ul\", {\n      className: \"reuse-view__main--header__det\"\n    }, __jsx(\"li\", null, __jsx(FontAwesomeIcon, {\n      icon: ['far', 'clock'],\n      className: \"icon icon__reuse-view--main__tm\"\n    }), __jsx(TimeAgo, {\n      date: props.cnt.postCreated,\n      live: false,\n      formatter: formatter\n    })), __jsx(\"li\", {\n      className: \"reuse-view__main--header__det--ans\"\n    }, \"Comments \", __jsx(\"div\", null, props.commentTotal)), __jsx(\"li\", null, __jsx(\"div\", null, __jsx(FontAwesomeIcon, {\n      icon: ['far', 'eye'],\n      className: \"icon icon__reuse-view--main__eye\"\n    })), props.cnt.view)));\n  }\n\n  if (props.cnt.edit) {\n    edit = __jsx(\"div\", {\n      className: \"reuse-view__main--det__edit\"\n    }, __jsx(\"div\", {\n      className: \"reuse-view__main--det__edit--title\"\n    }, __jsx(\"div\", null, __jsx(FontAwesomeIcon, {\n      icon: ['far', 'edit'],\n      className: \"icon icon__reuse-view--main__edit\"\n    })), \"edit\"), __jsx(\"div\", {\n      className: \"reuse-view__main--det__edit--tm\"\n    }, __jsx(TimeAgo, {\n      date: props.cnt.edit,\n      live: false,\n      formatter: formatter\n    })));\n  }\n\n  if (props.cnt.status) {\n    userStatus = __jsx(\"li\", {\n      className: \"reuse-view__main--det__user--status\"\n    }, __jsx(\"div\", {\n      className: \"reuse-view__main--det__user--status__on\"\n    }), \" online\");\n  }\n\n  if (props.cnt.username && !props.cnt.userImage) {\n    userImage = __jsx(Avatar, {\n      name: props.cnt.username,\n      size: \"40\",\n      round: true\n    });\n  }\n\n  var _iteratorNormalCompletion2 = true;\n  var _didIteratorError2 = false;\n  var _iteratorError2 = undefined;\n\n  try {\n    for (var _iterator2 = _getIterator(props.changedFav), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n      var changedFav = _step2.value;\n\n      if (props.cnt._id === changedFav.id) {\n        favAdd = changedFav.favAdd;\n        isLiked = changedFav.liked;\n      }\n    }\n  } catch (err) {\n    _didIteratorError2 = true;\n    _iteratorError2 = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion2 && _iterator2[\"return\"] != null) {\n        _iterator2[\"return\"]();\n      }\n    } finally {\n      if (_didIteratorError2) {\n        throw _iteratorError2;\n      }\n    }\n  }\n\n  if (props.cnt.liked && isLiked === null) {\n    fav = __jsx(FontAwesomeIcon, {\n      icon: ['fas', 'heart'],\n      className: \"icon icon__reuse-view--fav\"\n    });\n  }\n\n  if (isLiked) {\n    fav = __jsx(FontAwesomeIcon, {\n      icon: ['fas', 'heart'],\n      className: \"icon icon__reuse-view--fav\"\n    });\n  }\n\n  if (props.cnt.mode === 'draft') {\n    userOptMode = __jsx(\"li\", {\n      onClick: props.changeCntPublish\n    }, __jsx(FontAwesomeIcon, {\n      icon: ['far', 'eye'],\n      className: \"icon icon__reuse-view--options\"\n    }), \"Publish\");\n  }\n\n  if (props.showCnt && props.showCnt.visible && props.showCnt.id === props.cnt._id) {\n    userOptDetClass.push('reuse-view__main--footer__user-det--clk');\n    userOptClass.push('reuse-view__main--footer__user-det--opt__visible');\n  }\n\n  if (props.cnt.userOpt) {\n    userOpt = __jsx(\"div\", {\n      className: userOptDetClass.join(' '),\n      onClick: props.userOpt\n    }, __jsx(FontAwesomeIcon, {\n      icon: ['fas', 'circle'],\n      className: \"icon icon__reuse-view--circle\"\n    }), __jsx(FontAwesomeIcon, {\n      icon: ['fas', 'circle'],\n      className: \"icon icon__reuse-view--circle\"\n    }), __jsx(FontAwesomeIcon, {\n      icon: ['fas', 'circle'],\n      className: \"icon icon__reuse-view--circle\"\n    }), __jsx(\"ul\", {\n      className: userOptClass.join(' ')\n    }, __jsx(\"li\", null, __jsx(\"a\", {\n      href: \"/edit/\".concat(props.cntGrp, \"/\").concat(props.cnt._id)\n    }, __jsx(FontAwesomeIcon, {\n      icon: ['far', 'edit'],\n      className: \"icon icon__reuse-view--options\"\n    }), \"Edit\")), userOptMode));\n  }\n\n  ;\n\n  if (props.comments.length > 0) {\n    comments = __jsx(ModelComments, {\n      comments: props.comments,\n      cntGrp: props.cntGrp,\n      reply: props.reply,\n      correct: props.correct,\n      wrong: props.wrong\n    });\n  }\n\n  return __jsx(\"div\", {\n    className: \"reuse-view\"\n  }, meta, __jsx(\"div\", {\n    className: \"reuse-view__main\"\n  }, header, media, __jsx(\"p\", {\n    className: \"reuse-view__main--cnt\",\n    dangerouslySetInnerHTML: {\n      __html: htmlContent\n    }\n  }), __jsx(\"div\", {\n    className: \"reuse-view__main--det\"\n  }, edit, __jsx(\"div\", {\n    className: \"reuse-view__main--det__user\"\n  }, __jsx(\"div\", {\n    className: \"reuse-view__main--det__user--img\"\n  }, userImage), __jsx(\"ul\", null, __jsx(\"li\", null, __jsx(\"a\", {\n    href: \"/user/profile/\" + props.cnt.authorID\n  }, \" \", props.cnt.username)), userStatus))), __jsx(\"div\", {\n    className: \"reuse-view__main--footer\"\n  }, __jsx(\"div\", {\n    className: \"reuse-view__main--footer__user-opt\"\n  }, __jsx(\"div\", null, __jsx(\"div\", {\n    className: \"reuse-share\"\n  }, __jsx(\"div\", {\n    className: \"reuse-share__icn\",\n    onClick: props.share\n  }, __jsx(FontAwesomeIcon, {\n    icon: ['fas', 'location-arrow'],\n    className: \"icon icon__reuse-share--icn\"\n  })))), __jsx(\"div\", null, __jsx(\"span\", {\n    className: \"reuse-view__main--footer__user-opt--fav\",\n    onClick: props.fav\n  }, fav), transformNumber(favAdd !== null ? favAdd : props.cnt.favorite), props.favChange && props.favChange.id === props.cnt._id ? __jsx(FavoriteActive, {\n    liked: props.favChange.isLiked\n  }) : null)), __jsx(\"div\", {\n    className: \"reuse-view__main--footer__add\",\n    onClick: props.scroll\n  }, __jsx(FontAwesomeIcon, {\n    icon: ['fas', 'pencil-alt'],\n    className: \"icon icon__reuse-view--main__add\"\n  }), \"Comment\"), userOpt)), __jsx(\"div\", {\n    className: \"reuse-view__comments\"\n  }, __jsx(\"div\", {\n    className: \"reuse-view__comments--header\"\n  }, __jsx(\"div\", {\n    className: \"reuse-view__comments--header__ans\"\n  }, \"Comment Section\", __jsx(\"a\", {\n    href: \"/add/\" + props.cntGrp,\n    className: \"reuse-view__comments--header__ask\"\n  }, \"Add \", props.cntGrp !== 'poet' ? props.cntGrp : null), __jsx(\"div\", {\n    className: \"reuse-view__comments--box__footer--user-like__total reuse-view__comments--header__total\"\n  }, props.commentTotal))), comments), __jsx(\"div\", {\n    className: \"reuse-view__form\"\n  }, __jsx(\"p\", {\n    className: \"reuse-view__form--header\"\n  }, __jsx(FontAwesomeIcon, {\n    icon: ['fas', 'pen-square'],\n    className: \"icon icon__reuse-view--form__pen\"\n  }), \"Add Comment\"), __jsx(\"form\", {\n    action: \"\",\n    className: \"reuse-view__form--field\"\n  }, __jsx(\"div\", {\n    className: \"reuse-view__form--field__wrapper\"\n  }), __jsx(\"button\", {\n    type: \"button\",\n    onClick: props.submitComment,\n    disabled: props.submitEnable\n  }, \"Submit\"))));\n};\n\nexport default modelContent;","map":null,"metadata":{},"sourceType":"module"}