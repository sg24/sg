{"ast":null,"code":"import * as actions from '../../store/actions/index';\nimport axios from '../../axios';\nexport const submit = formData => {\n  return dispatch => {\n    dispatch(actions.submitFormStart());\n    let formContent = new FormData();\n\n    for (let key in formData) {\n      if (key !== 'video' && key !== 'image') {\n        formContent.append(key, formData[key]);\n      }\n\n      if (key === 'video' && formData[key].length > 0) {\n        for (let video of formData[key]) {\n          let ext = video.file.type.split('/').pop();\n          formContent.append(key, video.file, `${video.id}.${ext}`);\n        }\n      }\n\n      if (key === 'image' && formData[key].length > 0) {\n        for (let image of formData[key]) {\n          let ext = image.file.type.split('/').pop();\n          formContent.append(key, image.file, `${image.id}.${ext}`);\n        }\n      }\n    }\n\n    axios.post('/add/question', formContent, {\n      onUploadProgress: function (progressEvent) {\n        if (progressEvent.lengthComputable) {\n          const percentage = Math.round(progressEvent.loaded * 100 / progressEvent.total);\n          dispatch(actions.submitFormSuccess(percentage));\n        }\n      }\n    }).then(res => {\n      dispatch(actions.formSubmitted(res.data));\n    }).catch(err => {\n      dispatch(actions.submitFormFail(err));\n    });\n  };\n};","map":null,"metadata":{},"sourceType":"module"}