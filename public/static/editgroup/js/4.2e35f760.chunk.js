(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{821:function(e,t,a){"use strict";a.r(t);var r=a(74),n=a(27),i=a(28),s=a(30),o=a(29),l=a(321),c=a(31),m=a(0),d=a.n(m),u=a(36),p=a(7),f=a(812),_=a.n(f),v=a(817),h=a.n(v),g=(a(819),a(5)),b=a(6),E=d.a.createRef(null),k=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(i)))).state={url:null},a.cropHandler=function(){var e=E.current.cropper.getCroppedCanvas({imageSmoothingQuality:"high"}).toDataURL(),t=Object(g.c)(e),r=window.URL.createObjectURL(t);a.setState({url:r}),a.props.onImageCapture({imageUrl:a.props.url,imageCapture:t,id:_()()})},a}return Object(c.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=null;return this.state.url&&(e=d.a.createElement("img",{src:this.state.url,alt:"",className:"reuse-form__itm--det__view-select--media__wrapper--preview "})),d.a.createElement("div",{className:"reuse-form__itm--det__view-select--media"},d.a.createElement("div",{className:"reuse-form__itm--det__view-select--media__wrapper"},e,d.a.createElement(h.a,{ref:E,src:this.props.url,className:"reuse-form__itm--det__view-select--media__wrapper--cnt",guides:!1,cropBoxResizable:!1,minCropBoxHeight:100,minCropBoxWidth:100,dragMode:"none",ready:function(){E.current.cropper.setCropBoxData({width:100,height:100})},crop:this.cropHandler})))}}]),t}(m.Component),w=Object(u.b)(null,function(e){return{onImageCapture:function(t){return e(b.U(t))}}})(k),C=d.a.createRef(null),O=function(e){function t(){var e,a;Object(n.a)(this,t);for(var i=arguments.length,c=new Array(i),m=0;m<i;m++)c[m]=arguments[m];return(a=Object(s.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(c)))).state={inputValue:"",media:null,removeMediaItemIndex:null,snapshotErr:null,mediaUrl:a.props.media&&a.props.media.image&&a.props.media.image.length>0?a.props.media.image[0].imageUrl:null,err:null,startCapture:!1,start:!1},a.linkVerifyHandler=function(e){var t=e.target.value;a.setState({inputValue:t,snapshotErr:null}),a.props.onCheckLink(t),a.state.startCapture&&(C.current.srcObject.getVideoTracks().forEach(function(e){e.stop()}),a.setState({startCapture:!1}))},a.addMediaHandler=function(){a.props.linkValid&&a.props.linkValid.media&&(a.setState({media:{file:a.props.linkValid.media.file,url:a.props.linkValid.media.url,id:_()()},inputValue:""}),a.props.onResetLink())},a.openCameraHandler=function(){"mediaDevices"in navigator||(navigator.mediaDevices={}),"getUserMedia"in navigator.mediaDevices||(navigator.mediaDevices.getUserMedia=function(e){var t=navigator.webkitGetUserMedia||navigator.mozGetUserMedia;return t?new Promise(function(a,r){t.call(navigator,e,a,r)}):Promise.reject(new Error("getUserMedia is not implemented!"))});var e=Object(l.a)(a);navigator.mediaDevices.getUserMedia({video:!0}).then(function(t){C.current.srcObject=t,e.setState({startCapture:!0,mediaUrl:null})}).catch(function(t){e.setState({err:t,startCapture:!1})})},a.captureImageHandler=function(){Object(g.e)(C.current).then(function(e){C.current.srcObject.getVideoTracks().forEach(function(e){e.stop()});var t=Object(g.c)(e),r=window.URL.createObjectURL(t);a.setState({mediaUrl:r,startCapture:!1})}).catch(function(e){a.setState({err:e})})},a.selectMediaHandler=function(e){if(a.setState({snapshotErr:null}),e.stopPropagation(),e.preventDefault(),e.target.files){var t=e.target.files;a.handleFiles(t)}},a.dragEnterMediaHandler=function(e){e.stopPropagation(),e.preventDefault()},a.dragOverMediaHandler=function(e){e.stopPropagation(),e.preventDefault()},a.dropMediaHandler=function(e){if(e.stopPropagation(),e.preventDefault(),e.dataTransfer){var t=e.dataTransfer.files;a.handleFiles(t)}},a.removeMediaItemEnableHandler=function(e){a.setState({removeMediaItemIndex:e})},a.removeMediaItemDisableHandler=function(){a.setState({removeMediaItemIndex:null})},a.removeMediaItemHandler=function(){if(!a.props.imageEdit&&a.props.media&&a.props.media.image&&a.props.media.image.length>0&&!a.props.media.image[0].imageUrl){a.props.onImageEdit();var e=[Object(r.a)({},a.props.media.image[0])];a.props.onSaveRemoveSnap(e[0])}},a.handleFiles=function(e){a.state.startCapture&&(C.current.srcObject.getVideoTracks().forEach(function(e){e.stop()}),a.setState({startCapture:!1}));var t=e[0];if(t.type.startsWith("image/")){var r=window.URL.createObjectURL(t);a.setState({mediaUrl:r})}},a.submitMediaHandler=function(){var e=Object(r.a)({},a.props.media);a.removeMediaItemHandler(),a.props.onSubmitMedia(Object(g.g)(e,{image:[Object(r.a)({},a.props.imageCapture)]})),C.current&&C.current.srcObject&&C.current.srcObject.getVideoTracks().forEach(function(e){e.stop()})},a.closeMediaBoxHandler=function(){a.props.onhideMediaBox(),C.current&&C.current.srcObject&&C.current.srcObject.getVideoTracks().forEach(function(e){e.stop()})},a}return Object(c.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=null,t=null,a=["reuse-form__itm--det__view-select--media__wrapper--video"],r=null;return(this.props.linkValid||this.state.err)&&(e=this.props.linkValid&&this.props.linkValid.err?d.a.createElement("div",{className:"reuse-form__err"},this.props.linkValid.err.message):this.state.err?d.a.createElement("div",{className:"reuse-form__err"},this.state.err.message):null),this.state.mediaUrl&&(t=d.a.createElement("div",{className:"reuse-form__itm--det__view-select"},d.a.createElement(w,{url:this.state.mediaUrl}))),!this.state.err&&this.state.startCapture&&(a.push("reuse-form__itm--det__view-select--media__wrapper--video__show"),r=d.a.createElement("div",{className:"reuse-form__itm--footer reuse-form__btn"},d.a.createElement("button",{type:"button",className:"reuse-form__btn--add",onClick:this.captureImageHandler},"Capture"))),d.a.createElement("div",{className:"reuse-form__itm"},d.a.createElement("h4",{className:"reuse-form__itm--title"},d.a.createElement(p.a,{icon:["fas","images"],className:"icon icon__reuse-form--itm--title"}),"Add Image"),d.a.createElement("div",{className:"reuse-form__itm--det"},d.a.createElement("div",{className:"reuse-form__cnt"},d.a.createElement("label",{className:"reuse-form__cnt--title"},"Image Link"),d.a.createElement("div",{className:"reuse-form__cnt--det"},d.a.createElement("input",{type:"url",name:"",className:"reuse-form__cnt--det__input reuse-form__cnt--det__input--lg",placeholder:"paste link",onChange:this.linkVerifyHandler,value:this.state.inputValue,spellCheck:!1,pattern:"https://.*"}),d.a.createElement("button",{type:"button",onClick:this.addMediaHandler,disabled:!this.props.linkValid||null!==this.props.linkValid.err,className:"reuse-form__cnt--det__btn"},d.a.createElement(p.a,{icon:["fas","plus"]})))),d.a.createElement("div",{className:"reuse-form__itm--det__view"},e),d.a.createElement("div",{className:"reuse-form__itm--det__alt"},"OR"),d.a.createElement("div",{className:"reuse-form__itm--det__camera",onClick:this.openCameraHandler},d.a.createElement(p.a,{icon:["fas","camera"],className:"icon icon__reuse-form--itm--camera"}),"Take Snapshot"),d.a.createElement("div",{className:"reuse-form__cnt"},d.a.createElement("div",{className:"reuse-form__cnt--det"},d.a.createElement("div",{className:"reuse-form__cnt--det__fil"},d.a.createElement("div",null,"Upload Image"),d.a.createElement("input",{type:"file",name:"",className:"reuse-form__cnt--det__fil--input",onChange:this.selectMediaHandler,onDragEnter:this.dragEnterMediaHandler,onDragOver:this.dragOverMediaHandler,onDrop:this.dropMediaHandler,accept:"image/*"})))),d.a.createElement("video",{ref:C,autoPlay:!0,className:a.join(" ")},d.a.createElement("p",null,"our browser doesn't support embedded videos")),r,this.state.snapshotErr?d.a.createElement("div",{className:"reuse-form__err"},"Some features are not available in your browser, ",this.state.snapshotErr):null,t),d.a.createElement("div",{className:"reuse-form__itm--footer reuse-form__btn"},d.a.createElement("button",{type:"button",className:"reuse-form__btn--close",onClick:this.closeMediaBoxHandler},"Exit"),d.a.createElement("button",{type:"button",className:"reuse-form__btn--add",onClick:this.submitMediaHandler,disabled:!this.props.imageCapture},"Add")))}}]),t}(m.Component);t.default=Object(u.b)(function(e){return{linkValid:e.form.linValid,media:e.form.media,imageCapture:e.form.imageCapture,editImage:e.form.editImage}},function(e){return{onCheckLink:function(t){return e(b.i(t,"image"))},onResetLink:function(){return e(b.jb())},onImageEdit:function(){return e(b.fb())},onRemoveMedia:function(t){return e(b.hb(t))},onSaveRemoveSnap:function(t){return e(b.lb(t))},onSubmitMedia:function(t){return e(b.wb(t))},onhideMediaBox:function(){return e(b.eb())}}})(O)}}]);
//# sourceMappingURL=4.2e35f760.chunk.js.map