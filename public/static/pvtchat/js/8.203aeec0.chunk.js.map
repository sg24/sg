{"version":3,"sources":["containers/SiteMain/MainContent/Main/Search/Search.js"],"names":["Search","state","search","searchTotal","searchSeek","id","_this","props","match","params","categ","searchChatHandler","event","setState","target","value","onSearchChat","scrollUpHandler","seek","i","document","querySelectorAll","scrollIntoView","setAttribute","scrollDownHandler","closeSearchHandler","onCloseBackdrop","history","push","concat","elem","this","length","react__WEBPACK_IMPORTED_MODULE_4___default","a","createElement","className","onClick","_fortawesome_react_fontawesome__WEBPACK_IMPORTED_MODULE_5__","icon","disabled","type","placeholder","onChange","Component","withRouter","connect","cnt","cnts","userBackdrop","dispatch","actions"],"mappings":"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","file":"static/js/8.203aeec0.chunk.js","sourcesContent":["import React, { Component } from 'react';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { connect } from 'react-redux';\r\nimport { withRouter } from 'react-router-dom';\r\n\r\nimport './Search.css';\r\nimport * as actions from '../../../../../store/actions/index';\r\n\r\nclass Search extends Component {\r\n    state =  {\r\n        search: '',\r\n        searchTotal: 0,\r\n        searchSeek: 0,\r\n        id: this.props.match.params.id,\r\n        categ: this.props.match.params.categ\r\n    }\r\n\r\n    searchChatHandler = (event) => {\r\n        this.setState({search: event.target.value});\r\n        this.props.onSearchChat(event.target.value)\r\n    }\r\n\r\n    componentDidUpdate() {\r\n        let elem =  document.querySelectorAll('.site-main__chat--srch__highlight')\r\n        if (this.state.search && elem.length !== this.state.searchTotal) {\r\n            this.setState({searchTotal: elem.length, searchSeek: 0})\r\n            if (elem.length > 0) {\r\n                document.querySelectorAll('.site-main__chat--srch__highlight')[0].scrollIntoView()\r\n                document.querySelectorAll('.site-main__chat--srch__highlight')[0].setAttribute('style', 'background: #fffb00; color:#333')\r\n                this.setState({searchSeek: 1})\r\n            }\r\n        }\r\n    }\r\n\r\n    scrollUpHandler = () => {\r\n        let seek = this.state.searchSeek - 1; \r\n        if (seek > 0) {\r\n            for (let i = 0; i < this.state.searchTotal; i++) {\r\n                if (i === seek - 1) {\r\n                    document.querySelectorAll('.site-main__chat--srch__highlight')[i].scrollIntoView()\r\n                    document.querySelectorAll('.site-main__chat--srch__highlight')[i].setAttribute('style', 'background: #fffb00; color:#333')\r\n                    this.setState({searchSeek: seek})\r\n                } else {\r\n                    document.querySelectorAll('.site-main__chat--srch__highlight')[i].setAttribute('style', 'background: #d3e18a; color:#333')\r\n                }\r\n            }\r\n        } else {\r\n            for (let i = 0; i < this.state.searchTotal; i++) {\r\n                if (i === this.state.searchTotal -1) {\r\n                    document.querySelectorAll('.site-main__chat--srch__highlight')[i].scrollIntoView()\r\n                    document.querySelectorAll('.site-main__chat--srch__highlight')[i].setAttribute('style', 'background: #fffb00; color:#333')\r\n                    this.setState({searchSeek: this.state.searchTotal})\r\n                } else {\r\n                    document.querySelectorAll('.site-main__chat--srch__highlight')[i].setAttribute('style', 'background: #d3e18a; color:#333')\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    scrollDownHandler = () => {\r\n        let seek = this.state.searchSeek + 1; \r\n        if (seek <= this.state.searchTotal) {\r\n            for (let i = 0; i < this.state.searchTotal; i++) {\r\n                if (i === seek - 1) {\r\n                    document.querySelectorAll('.site-main__chat--srch__highlight')[i].scrollIntoView()\r\n                    document.querySelectorAll('.site-main__chat--srch__highlight')[i].setAttribute('style', 'background: #fffb00; color:#333')\r\n                    this.setState({searchSeek: seek})\r\n                } else {\r\n                    document.querySelectorAll('.site-main__chat--srch__highlight')[i].setAttribute('style', 'background: #d3e18a; color:#333')\r\n                }\r\n            }\r\n        } else {\r\n            for (let i = 0; i < this.state.searchTotal; i++) {\r\n                if (i === 0) {\r\n                    document.querySelectorAll('.site-main__chat--srch__highlight')[i].scrollIntoView()\r\n                    document.querySelectorAll('.site-main__chat--srch__highlight')[i].setAttribute('style', 'background: #fffb00; color:#333')\r\n                    // document.querySelectorAll('.site-main__chat--srch__highlight')[i].parentElement.parentElement.setAttribute('style', 'background-color: #fffb00 !important; color:#333')\r\n                     this.setState({searchSeek: 1})\r\n                } else {\r\n                    document.querySelectorAll('.site-main__chat--srch__highlight')[i].setAttribute('style', 'background: #d3e18a; color:#333')\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    closeSearchHandler = () => {\r\n        this.props.onCloseBackdrop();\r\n        this.props.history.push(`/chat/${this.state.categ}/${this.state.id}`)\r\n    };\r\n\r\n    render() {\r\n        let searchTotal = null;\r\n\r\n        if (this.state.search) {\r\n            searchTotal = (\r\n                <div className=\"site-main__chat--srch__cnt--total\">{this.state.searchSeek} / {this.state.searchTotal}</div>\r\n            )\r\n        }\r\n\r\n        return (\r\n            <div className=\"site-main__chat--srch\">\r\n                <div className=\"site-main__chat--srch__wrapper\">\r\n                    <div \r\n                        className=\"site-main__chat--srch__close\"\r\n                        onClick={this.closeSearchHandler}>\r\n                        <FontAwesomeIcon  icon={['fas', 'times']} className=\"icon icon__site-main--chat__close\"/>\r\n                    </div>\r\n                    <div className=\"site-main__chat--srch__cnt\">\r\n                        <div className=\"site-main__chat--srch__cnt--button\">\r\n                            <button \r\n                                className=\"site-main__chat--srch__cnt--next\"\r\n                                disabled={!this.state.searchTotal > 0}\r\n                                onClick={this.scrollUpHandler}><FontAwesomeIcon  icon={['fas', 'angle-up']} /></button>\r\n                            <button \r\n                                className=\"site-main__chat--srch__cnt--prev\"\r\n                                disabled={!this.state.searchTotal > 0}\r\n                                onClick={this.scrollDownHandler}><FontAwesomeIcon  icon={['fas', 'angle-down']}/></button>\r\n                        </div>\r\n                        <input \r\n                            type=\"text\" \r\n                            placeholder=\"search chat\" \r\n                            className=\"site-main__chat--srch__cnt--input\"\r\n                            onChange={this.searchChatHandler}\r\n                            value={this.state.search} />\r\n                        { searchTotal }\r\n                    </div>\r\n                </div>\r\n            </div> \r\n        )\r\n    }\r\n};\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        cnt: state.cnt.cnts,\r\n        userBackdrop: state.cnt.userBackdrop\r\n    };\r\n }\r\n\r\n const mapDispatchToProps = dispatch => {\r\n    return {\r\n        onCloseBackdrop: () => dispatch(actions.closeBackdrop()),\r\n        onSearchChat: (cnt) => dispatch(actions.searchChat(cnt))\r\n    };\r\n};\r\n\r\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(Search)); "],"sourceRoot":""}