(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{741:function(e,t,a){},744:function(e,t,a){"use strict";a.r(t);var n=a(22),r=a(23),c=a(25),i=a(26),o=a(0),s=a.n(o),d=a(7),p=a(24),u=a(96),l=a.n(u),m=a(97),h=(a(741),a(4)),f=a(5),v=a(49),g=a(140),b=a(141),_=s.a.createRef(null),k=function(e){Object(i.a)(a,e);var t=Object(c.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,c=new Array(r),i=0;i<r;i++)c[i]=arguments[i];return(e=t.call.apply(t,[this].concat(c))).state={start:!1,err:null,id:e.props.match.params.id,categ:e.props.match.params.categ},e.stopRecHandler=function(){_&&_.current&&Object(h.e)(_.current).then(function(t){_.current.srcObject.getVideoTracks().forEach(function(e){e.stop()}),e.props.history.goBack(),e.props.editChat?e.props.onUploadMedia([{file:t,type:"image",format:"png",chatID:{mainID:e.props.editChat.mainID,chatID:e.props.editChat.chatID}}],e.state.id,e.state.categ):e.props.onUploadMedia([{file:t,type:"image",format:"png",chatID:l()()}],e.state.id,e.state.categ)}).catch(function(t){e.setState({err:t})})},e}return Object(r.a)(a,[{key:"componentDidMount",value:function(){"mediaDevices"in navigator||(navigator.mediaDevices={});var e=this;"getUserMedia"in navigator.mediaDevices||(navigator.mediaDevices.getUserMedia=function(t){var a=navigator.webkitGetUserMedia||navigator.mozGetUserMedia;return a?new Promise(function(e,n){a.call(navigator,t,e,n)}):e.setState({err:"getUserMedia is not implemented!"})}),navigator.mediaDevices.getUserMedia({video:!0}).then(function(t){_.current.srcObject=t,e.setState({start:!0})}).catch(function(t){e.setState({err:t,start:!1})})}},{key:"componentWillUnmount",value:function(){_&&_.current&&_.current.srcObject&&_.current.srcObject.getVideoTracks().forEach(function(e){e.stop()})}},{key:"render",value:function(){var e=s.a.createElement(v.a,{bg:!0}),t=null;return this.state.start&&(e=null),this.state.err&&(t=s.a.createElement(g.a,{component:b.a,close:this.closeModelBackdropHandler,err:this.state.err,media:!0})),s.a.createElement("div",{className:"site-main__chat--cam"},t,s.a.createElement("div",{className:"site-main__chat--cam__wrapper"},e,s.a.createElement("video",{ref:_,autoPlay:!0,className:"site-main__chat--cam__video--wrapper"},s.a.createElement("p",null,"our browser doesn't support embedded videos")),s.a.createElement("button",{onClick:this.stopRecHandler,className:"site-main__chat--cam__control",disabled:!this.state.start},s.a.createElement(d.a,{icon:["fas","camera"],className:"icon icon__site-main--chat__footer--camera"}))))}}]),a}(o.Component);t.default=Object(m.e)(Object(p.b)(function(e){return{vidRecBackdrop:e.cnt.vidRecBackdrop,editChat:e.cnt.editChat}},function(e){return{onTypingErr:function(t){return e(f.P(t))},onUploadMedia:function(t,a,n){return e(f.dc(t,a,n))}}})(k))}}]);
//# sourceMappingURL=6.9e891737.chunk.js.map