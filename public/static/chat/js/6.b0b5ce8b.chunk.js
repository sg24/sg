(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{739:function(e,t,a){},742:function(e,t,a){"use strict";a.r(t);var n=a(22),r=a(23),c=a(25),i=a(24),o=a(26),s=a(0),u=a.n(s),d=a(7),l=a(27),m=a(112),p=a.n(m),f=a(96),v=(a(739),a(4)),h=a(5),g=a(50),b=a(139),_=a(140),k=u.a.createRef(null),j=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return(a=Object(c.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(o)))).state={start:!1,err:null,id:a.props.match.params.id,categ:a.props.match.params.categ},a.stopRecHandler=function(){k&&k.current&&Object(v.d)(k.current).then(function(e){k.current.srcObject.getVideoTracks().forEach(function(e){e.stop()}),a.props.history.goBack(),a.props.onUploadMedia([{file:e,type:"image",format:"png",chatID:p()()}],a.state.id,a.state.categ)}).catch(function(e){a.setState({err:e})})},a}return Object(o.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){"mediaDevices"in navigator||(navigator.mediaDevices={});var e=this;"getUserMedia"in navigator.mediaDevices||(navigator.mediaDevices.getUserMedia=function(t){var a=navigator.webkitGetUserMedia||navigator.mozGetUserMedia;return a?new Promise(function(e,n){a.call(navigator,t,e,n)}):e.setState({err:"getUserMedia is not implemented!"})}),navigator.mediaDevices.getUserMedia({video:!0}).then(function(t){k.current.srcObject=t,e.setState({start:!0})}).catch(function(t){e.setState({err:t,start:!1})})}},{key:"componentWillUnmount",value:function(){k&&k.current&&k.current.srcObject&&k.current.srcObject.getVideoTracks().forEach(function(e){e.stop()})}},{key:"render",value:function(){var e=u.a.createElement(g.a,{bg:!0}),t=null;return this.state.start&&(e=null),this.state.err&&(t=u.a.createElement(b.a,{component:_.a,close:this.closeModelBackdropHandler,err:this.state.err,media:!0})),u.a.createElement("div",{className:"site-main__chat--cam"},t,u.a.createElement("div",{className:"site-main__chat--cam__wrapper"},e,u.a.createElement("video",{ref:k,autoPlay:!0,className:"site-main__chat--cam__video--wrapper"},u.a.createElement("p",null,"our browser doesn't support embedded videos")),u.a.createElement("button",{onClick:this.stopRecHandler,className:"site-main__chat--cam__control",disabled:!this.state.start},u.a.createElement(d.a,{icon:["fas","camera"],className:"icon icon__site-main--chat__footer--camera"}))))}}]),t}(s.Component);t.default=Object(f.e)(Object(l.b)(function(e){return{vidRecBackdrop:e.cnt.vidRecBackdrop}},function(e){return{onTypingErr:function(t){return e(h.L(t))},onUploadMedia:function(t,a,n){return e(h.Yb(t,a,n))}}})(j))}}]);
//# sourceMappingURL=6.b0b5ce8b.chunk.js.map