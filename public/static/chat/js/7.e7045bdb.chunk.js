(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{738:function(t,e,a){},741:function(t,e,a){"use strict";a.r(e);var r=a(22),n=a(23),c=a(25),i=a(24),o=a(26),s=a(0),d=a.n(s),p=a(7),m=a(27),l=a(97),u=(a(738),a(4)),h=a(5),f=a(50),v=a(139),b=a(140),R=d.a.createRef(null),_=function(t){function e(){var t,a;Object(r.a)(this,e);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(a=Object(c.a)(this,(t=Object(i.a)(e)).call.apply(t,[this].concat(o)))).state={start:!1,mediaRecorder:null,id:a.props.match.params.id,categ:a.props.match.params.categ,err:null},a.stopRecHandler=function(){Object(u.h)(u.e,a.state.mediaRecorder,a.state.start,{video:!0,audio:!0},"video/mp4","mp4","media","mediaRecChat").then(function(t){a.setState({mediaRecorder:null,start:!1}),a.props.editChat?a.props.onUploadMedia([{file:t[0].file,type:t[0].type,format:t[0].format,chatID:{mainID:a.props.editChat.mainID,chatID:a.props.editChat.chatID}}],a.state.id,a.state.categ):a.props.onUploadMedia(t,a.state.id,a.state.categ),a.props.history.goBack()}).catch(function(t){a.setState({start:!1})})},a}return Object(o.a)(e,t),Object(n.a)(e,[{key:"componentDidMount",value:function(){var t=this;Object(u.h)(u.e,this.state.mediaRecorder,this.state.start,{video:!0,audio:!0},"video/mp4","mp4","media","pvtMediaRecChat").then(function(e){R.current.srcObject=e.stream,t.setState({mediaRecorder:e.mediaRecorder,start:!0})}).catch(function(e){t.setState({start:!1,err:e})})}},{key:"componentWillUnmount",value:function(){this.state.mediaRecorder&&this.state.mediaRecorder.stream.getTracks().forEach(function(t){return t.stop()})}},{key:"render",value:function(){var t=d.a.createElement(f.a,{bg:!0}),e=null;return this.state.start&&(t=null),this.state.err&&(e=d.a.createElement(v.a,{component:b.a,close:this.closeModelBackdropHandler,err:this.state.err,media:!0})),d.a.createElement("div",{className:"site-main__chat--vidcam"},e,d.a.createElement("div",{className:"site-main__chat--vidcam__wrapper"},t,d.a.createElement("video",{ref:R,autoPlay:!0,className:"site-main__chat--vidcam__video--wrapper"},d.a.createElement("p",null,"our browser doesn't support embedded videos")),d.a.createElement("button",{onClick:this.stopRecHandler,className:"site-main__chat--vidcam__control",disabled:!this.state.start},d.a.createElement(p.a,{icon:["fas","video"]}))))}}]),e}(s.Component);e.default=Object(l.e)(Object(m.b)(function(t){return{vidRecBackdrop:t.cnt.vidRecBackdrop,editChat:t.cnt.editChat}},function(t){return{onTypingErr:function(e){return t(h.M(e))},onUploadMedia:function(e,a,r){return t(h.Zb(e,a,r))}}})(_))}}]);
//# sourceMappingURL=7.e7045bdb.chunk.js.map