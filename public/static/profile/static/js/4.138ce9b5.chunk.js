(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{608:function(e,t,a){},615:function(e,t,a){"use strict";a.r(t);var r=a(20),n=a(21),i=a(23),s=a(22),o=a(261),l=a(24),c=a(0),m=a.n(c),u=a(29),d=a(7),p=(a(608),a(6)),f=a(609),_=a.n(f),h=(a(614),a(4)),v=m.a.createRef(null),g=function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(o)))).state={url:null},a.cropHandler=function(){var e=v.current.cropper.getCroppedCanvas({imageSmoothingQuality:"high"}).toDataURL(),t=Object(h.c)(e),r=window.URL.createObjectURL(t);a.setState({url:r}),a.props.onImageChange(e,r)},a}return Object(l.a)(t,e),Object(n.a)(t,[{key:"render",value:function(){var e=null;return this.state.url&&(e=m.a.createElement("img",{src:this.state.url,alt:"",className:"reuse-form__itm--det__view-select--media__wrapper--preview "})),m.a.createElement("div",{className:"reuse-form__itm--det__view-select--media"},m.a.createElement("div",{className:"reuse-form__itm--det__view-select--media__wrapper"},e,m.a.createElement(_.a,{ref:v,src:this.props.url,className:"reuse-form__itm--det__view-select--media__wrapper--cnt",guides:!1,cropBoxResizable:!1,minCropBoxHeight:100,minCropBoxWidth:100,dragMode:"none",ready:function(){v.current.cropper.setCropBoxData({width:100,height:100})},crop:this.cropHandler})))}}]),t}(c.Component),b=Object(u.b)(null,function(e){return{onImageChange:function(t,a){return e(p.q(t,a))}}})(g),E=(a(49),m.a.createRef(null)),w=function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(l)))).state={inputValue:"",mediaUrl:null,err:null,startCapture:!1},a.linkVerifyHandler=function(e){var t=e.target.value;a.setState({inputValue:t}),a.props.onCheckLink(t),a.state.startCapture&&(E.current.srcObject.getVideoTracks().forEach(function(e){e.stop()}),a.setState({startCapture:!1}))},a.openCameraHandler=function(){"mediaDevices"in navigator||(navigator.mediaDevices={}),"getUserMedia"in navigator.mediaDevices||(navigator.mediaDevices.getUserMedia=function(e){var t=navigator.webkitGetUserMedia||navigator.mozGetUserMedia;return t?new Promise(function(a,r){t.call(navigator,e,a,r)}):Promise.reject(new Error("getUserMedia is not implemented!"))});var e=Object(o.a)(a);navigator.mediaDevices.getUserMedia({video:!0}).then(function(t){E.current.srcObject=t,e.setState({startCapture:!0,mediaUrl:null})}).catch(function(t){e.setState({err:t,startCapture:!1})})},a.captureImageHandler=function(){Object(h.e)(E.current).then(function(e){E.current.srcObject.getVideoTracks().forEach(function(e){e.stop()});var t=Object(h.c)(e),r=window.URL.createObjectURL(t);a.setState({mediaUrl:r,startCapture:!1})}).catch(function(e){a.setState({err:e})})},a.selectMediaHandler=function(e){if(a.setState({snapshotErr:null}),e.stopPropagation(),e.preventDefault(),e.target.files){var t=e.target.files;a.handleFiles(t)}},a.dragEnterMediaHandler=function(e){e.stopPropagation(),e.preventDefault()},a.dragOverMediaHandler=function(e){e.stopPropagation(),e.preventDefault()},a.dropMediaHandler=function(e){if(e.stopPropagation(),e.preventDefault(),e.dataTransfer){var t=e.dataTransfer.files;a.handleFiles(t)}},a.handleFiles=function(e){a.state.startCapture&&(E.current.srcObject.getVideoTracks().forEach(function(e){e.stop()}),a.setState({startCapture:!1}));var t=e[0];if(t.type.startsWith("image/")){var r=window.URL.createObjectURL(t);a.setState({mediaUrl:r})}},a.submitMediaHandler=function(){a.props.profileImage&&a.props.onSubmitImage(a.props.profileImage,a.props.imageUrl)},a.closeMediaBoxHandler=function(){a.props.onChangeImage()},a}return Object(l.a)(t,e),Object(n.a)(t,[{key:"componentDidUpdate",value:function(){this.props.linkValid&&!this.props.linkValid.err&&(this.setState({mediaUrl:this.state.inputValue}),this.props.onResetLink())}},{key:"render",value:function(){var e=null,t=null,a=["reuse-form__itm--det__view-select--media__wrapper--video"],r=null;return(this.props.linkValid||this.state.err)&&(e=this.props.linkValid&&this.props.linkValid.err?m.a.createElement("div",{className:"reuse-form__err"},this.props.linkValid.err.message):this.state.err?m.a.createElement("div",{className:"reuse-form__err"},this.state.err.message):null),this.state.mediaUrl&&(t=m.a.createElement("div",{className:"reuse-form__itm--det__view-select"},m.a.createElement(b,{url:this.state.mediaUrl}))),!this.state.err&&this.state.startCapture&&(a.push("reuse-form__itm--det__view-select--media__wrapper--video__show"),r=m.a.createElement("div",{className:"reuse-form__itm--footer reuse-form__btn"},m.a.createElement("button",{type:"button",className:"reuse-form__btn--add",onClick:this.captureImageHandler},"Capture"))),m.a.createElement("div",{className:"reuse-form__itm"},m.a.createElement("h4",{className:"reuse-form__itm--title"},m.a.createElement(d.a,{icon:["fas","image"],className:"icon icon__reuse-form--itm--title"}),"Change Profile Image"),m.a.createElement("div",{className:"reuse-form__itm--det"},m.a.createElement("div",{className:"reuse-form__cnt"},m.a.createElement("label",{className:"reuse-form__cnt--title"},"Image Link"),m.a.createElement("div",{className:"reuse-form__cnt--det"},m.a.createElement("input",{type:"url",name:"",className:"reuse-form__cnt--det__input reuse-form__cnt--det__input--lg",placeholder:"paste link",onChange:this.linkVerifyHandler,value:this.state.inputValue,spellCheck:!1,pattern:"https://.*"}))),m.a.createElement("div",{className:"reuse-form__itm--det__view"},e),m.a.createElement("div",{className:"reuse-form__itm--det__alt"},"OR"),m.a.createElement("div",{className:"reuse-form__itm--det__camera",onClick:this.openCameraHandler},m.a.createElement(d.a,{icon:["fas","camera"],className:"icon icon__reuse-form--itm--camera"}),"Take Snapshot"),m.a.createElement("div",{className:"reuse-form__cnt"},m.a.createElement("div",{className:"reuse-form__cnt--det"},m.a.createElement("div",{className:"reuse-form__cnt--det__fil"},"Upload Image",m.a.createElement("input",{type:"file",name:"",className:"reuse-form__cnt--det__fil--input",onChange:this.selectMediaHandler,onDragEnter:this.dragEnterMediaHandler,onDragOver:this.dragOverMediaHandler,onDrop:this.dropMediaHandler,accept:"image/*"})))),m.a.createElement("video",{ref:E,autoPlay:!0,className:a.join(" ")},m.a.createElement("p",null,"our browser doesn't support embedded videos")),r,this.state.snapshotErr?m.a.createElement("div",{className:"reuse-form__err"},"Some features are not available in your browser, ",this.state.snapshotErr):null,t),m.a.createElement("div",{className:"reuse-form__itm--footer reuse-form__btn"},m.a.createElement("button",{type:"button",className:"reuse-form__btn--close",onClick:this.closeMediaBoxHandler},"Exit"),m.a.createElement("button",{type:"button",className:"reuse-form__btn--add",disabled:!this.props.profileImage||this.props.startUpload||this.state.startCapture,onClick:this.submitMediaHandler},"Change")))}}]),t}(c.Component);t.default=Object(u.b)(function(e){return{linkValid:e.cnt.linkValid,profileImage:e.cnt.profileImage,imageUrl:e.cnt.imageUrl,startUpload:e.cnt.startUpload}},function(e){return{onCheckLink:function(t){return e(p.u(t,"image"))},onResetLink:function(){return e(p.db())},onSubmitImage:function(t,a){return e(p.mb(t,a))},onChangeImage:function(){return e(p.n())}}})(w)}}]);
//# sourceMappingURL=4.138ce9b5.chunk.js.map