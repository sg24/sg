{"version":3,"sources":["containers/SiteMain/Chat/axios.js","containers/SiteMain/Chat/shared/utility.js","containers/SiteMain/Chat/Loader/Loader.js","containers/SiteMain/Chat/ChatBox/Chats/Chat/Edits/Edit/Edit.js","containers/SiteMain/Chat/ChatBox/Chats/Chat/Edits/Edits.js","containers/SiteMain/Chat/ChatBox/Chats/Chat/Chat.js","containers/SiteMain/Chat/ChatBox/Chats/Chats.js","containers/SiteMain/Chat/ChatBox/utility.js","containers/SiteMain/Chat/ChatBox/ChatBox.js","containers/SiteMain/Chat/Footer/Footer.js","containers/SiteMain/Chat/Footer/Snapshot/Snapshot.js","containers/SiteMain/Chat/Footer/VideoRec/VideoRec.js","containers/SiteMain/Chat/Auth/Auth.js","containers/SiteMain/Chat/Chat.js"],"names":["instance","axios","create","baseURL","defaults","headers","common","post","updateObject","oldObject","updatedProperties","Object","objectSpread2","checkValidity","value","rules","isValid","required","trim","minLength","length","getImageURL","image","canvas","document","createElement","Promise","resolve","reject","getContext","width","videoWidth","height","videoHeight","drawImage","toBlob","blob","socket","io","chunks","webCameraApi","socketConnect","mediaRecorder","cnt","opt","format","formatType","type","socketKey","stop","onstop","e","Blob","stream","getTracks","forEach","track","file","chatID","uuid","navigator","mediaDevices","getUserMedia","constraints","webkitGetUserMedia","mozGetUserMedia","call","then","MediaRecorder","start","ondataavailable","push","data","catch","err","loader","props","loaderClass","loadingClass","nav","main","bg","react_default","a","className","join","edit","hstClass","replyClass","audioCnt","controls","src","concat","msg","videoCnt","imageCnt","alt","typedPlain","docContent","typedCnt","cntType","delete","upload","pending","Fragment","main_default","assign","extension","substr","defaultStyles","size","href","onClick","download","bind","index_es","icon","filterChat","replace","percentage","selected","_step","_iterator","createForOfIteratorHelper","s","n","done","f","editChat","chatCnt","onDoubleClick","hold","cntID","ID","dangerouslySetInnerHTML","__html","userID","position","edits","arraySort","cnts","reverse","map","index","Edit","key","users","userImage","chats","time","reply","Edits","timeFrame","dist_default","calendar","sameDay","nextDay","nextWeek","lastDay","lastWeek","sameElse","username","es","name","round","status","mainID","_step2","_iterator2","user","id","date","created","ChatBox_Chats_Chat_Chat","fetchChat","chat","updateChat","curPos","Date","setHours","beginning","getTime","content","updateCnt","createChatStart","msgType","msgID","lastChat","editMsg","sent","viewed","filter","findIndex","filterReply","replyCnt","filterIndex","addNewChat","curIndex","apply","toConsumableArray","uploadMediaStart","tempchat","replyID","holdChat","chatSelected","chatRemoved","_step3","_iterator3","_loop","ChatBox","state","searchTotal","scrollEnable","_this","match","params","cookie","chatLimit","removeSelected","typing","chatStart","addChat","chatTotal","skipChat","chatLoaded","uploadMedia","removeChat","defaultTemp","scrolled","onScroll","querySelector","scrollTop","data-categ","res","setState","chatHoldHandler","chatReleasedHandler","clearTimeout","downloadHandler","url","saveAs","_this2","this","these","on","JSON","stringify","chatHold","chatBoxWrapper","addEventListener","scrollHeight","querySelectorAll","clientHeight","createChat","Loader_Loader","Chats","released","message","toString","Component","withRouter","Footer","addItm","audioRec","vidRec","addImage","showEmoji","disable","resend","addItem","chatCntHandler","event","target","trimLeft","assertThisInitialized","emit","showBackdrop","stopTypingHandler","createChatHandler","showAddItmHandler","prevState","msgCateg","audioRecorderHandler","audio","media","videoRecHandler","videoRec","snapshotHandler","snapshot","addImageHandler","click","addAudioHandler","addDocHandler","addVideoHandler","selectMediaHandler","stopPropagation","preventDefault","files","handleFiles","i","split","emojiHandler","addEmojiHandler","native","shareLocationHandler","window","geolocation","getCurrentPosition","fetchedLocation","lat","coords","latitude","lng","longitude","loc","get","error_message","results","formatted_address","timeout","closeModelBackdropHandler","submit","formContent","FormData","ext","pop","append","onUploadProgress","progressEvent","lengthComputable","Math","loaded","total","mediaUploaded","closeContent","connect","resendChat","startRecClass","userOpt","shareOpt","emojiCnt","multiple","onChange","accept","dist_es","set","onSelect","style","bottom","left","transform","zIndex","onSubmit","placeholder","autoFocus","onKeyUp","onMouseLeave","disabled","videoRef","React","createRef","Snapshot","stopRecHandler","current","imageData","srcObject","getVideoTracks","closeMedia","closeRecHandler","video","ref","autoPlay","VideoCam","Auth","formElement","validation","valid","touched","password","signup","email","formIsValid","formMode","confirmPass","signupIsValid","inputChangedHandler","inputType","updateFormType","updateFormElement","defineProperty","changeTabHandler","mode","contentChangedHandler","confirmPasswordHandler","signupHandler","userAuth","error","response","keyValue","loginHandler","Chat","classCallCheck","_super","userAuthHandler","auth","closeAroundmeHandler","history","goBack","showBackdropHandler","isShow","closeBackdropHandler","createChatStartHandler","addNewChatHandler","uploadMediaStartHandler","mediaUploadedHandler","holdChatHandler","editChatHandler","deleteChatHandler","closeSelectedHandler","closeMediaHandler","expiresIn","userDet","room","host","public","disconnected","chatOpt","deleteClass","userStatusIcn","header","location","Chat_ChatBox_ChatBox","Chat_Footer_Footer","Footer_Snapshot_Snapshot","VideoRec_VideoRec","Chat_Auth_Auth"],"mappings":"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","file":"static/js/4.5120fe54.chunk.js","sourcesContent":["import axios from 'axios';\r\n\r\nconst instance = axios.create({\r\n    baseURL: 'https://www.slodge24.com'\r\n});\r\ninstance.defaults.headers.common['authorization'] = 'authorization';\r\ninstance.defaults.headers.post['Content-Type'] = 'application/x-www-form-urlencoded'\r\nexport default instance;","import io from 'socket.io-client';\r\nimport uuid from 'uuid';\r\nimport axios from '../axios'\r\n\r\nexport const updateObject = (oldObject, updatedProperties) => {\r\n    return {\r\n        ...oldObject,\r\n        ...updatedProperties\r\n    }\r\n}\r\n\r\nexport const transformNumber = (favNumber) => {\r\n    const favNumArray = String(favNumber).split(\"\");\r\n    \r\n    if (favNumArray.length === 4 ) {\r\n        return `${favNumArray[0]}K`\r\n    }\r\n\r\n    if (favNumArray.length === 5 ) {\r\n        const favNum = favNumArray[0] + favNumArray[1]\r\n        return `${favNum}K`\r\n    }\r\n\r\n    if (favNumArray.length === 6 ) {\r\n        const favNum = favNumArray[0] + favNumArray[1] + favNumArray[2];\r\n        return `${favNum}K`\r\n    }\r\n\r\n    if (favNumArray.length === 7 ) {\r\n        const favNum = favNumArray[0];\r\n        return `${favNum}M`\r\n    }\r\n\r\n    if (favNumArray.length === 8 ) {\r\n        const favNum = favNumArray[0] + favNumArray[1];\r\n        return `${favNum}M`\r\n    }\r\n\r\n    if (favNumArray.length === 9 ) {\r\n        const favNum = favNumArray[0] + favNumArray[1] + favNumArray[2];\r\n        return `${favNum}M`\r\n    }\r\n\r\n    if (favNumArray.length === 10 ) {\r\n        const favNum = favNumArray[0];\r\n        return `${favNum}B`\r\n    }\r\n\r\n    if (favNumArray.length === 11 ) {\r\n        const favNum = favNumArray[0] + favNumArray[1];\r\n        return `${favNum}B`\r\n    }\r\n\r\n    return favNumber\r\n};\r\n\r\n\r\nexport const transformString = (val) => {\r\n    const curVal = String(val).substr(0, 115);\r\n    return curVal;\r\n};\r\n\r\nexport function changeFav(datas, dataID) {\r\n    const dataArray = [...datas];\r\n    let dtIndex;\r\n    let dtArray = dataArray.filter((data, index) => {\r\n        if (data.id === dataID) {\r\n            dtIndex = index\r\n            return true\r\n        }\r\n        return false\r\n    });\r\n\r\n   if (dtArray.length > 0) {\r\n    let data = dtArray[0];\r\n    data = updateObject(data, {liked: !data.liked})\r\n\r\n    if (data.liked) {\r\n        data = updateObject(data, {favorite: data.favorite + 1})\r\n\r\n    } else {\r\n        data = updateObject(data, {favorite: data.favorite - 1})\r\n    }\r\n\r\n    const updateDataArray = [...dataArray];\r\n    updateDataArray[dtIndex] = data;\r\n    let updateStartArray = [...updateDataArray];\r\n    data = updateObject(data, {changeFavActive: data.liked})\r\n    updateStartArray[dtIndex] = data;\r\n    return {\r\n        updateStartArray,\r\n        updateDataArray \r\n    }\r\n   }\r\n\r\n   return dataArray;\r\n};\r\n\r\nexport const checkValidity = (value, rules) => {\r\n    let isValid = true;\r\n\r\n    if (!rules) {\r\n        return true;\r\n    }\r\n\r\n    if (rules.required) {\r\n        isValid =  value.trim() !== '' && isValid;\r\n    }\r\n\r\n    if (rules.minLength) {\r\n        isValid =  value.length >= rules.minLength  && isValid\r\n    }\r\n\r\n    return isValid;\r\n}\r\n\r\nexport const getSnapshot = (url, mediaType) => {\r\n    return new Promise ((resolve, reject) => {\r\n            let media = document.createElement(mediaType);\r\n            function multipleEventListener(el, mediaLoadHandler) {\r\n                'loadedmetadata loadeddata suspend'.split(' ').forEach(event => {\r\n                    el.addEventListener(event, mediaLoadHandler, false)\r\n                })\r\n            }\r\n            media.onerror = function() {\r\n                reject(media.error.message);\r\n            }\r\n            media.src = url;\r\n            multipleEventListener(media, mediaLoadHandler)\r\n            let event_fired = 0;\r\n            function mediaLoadHandler() {\r\n                if (++event_fired === 3) {\r\n                    media.currentTime = 1;\r\n                    media.addEventListener('seeked', function(event) {\r\n                        resolve();\r\n                    })\r\n                }\r\n            }\r\n    })\r\n}\r\n\r\nexport const getImageURL = image => {\r\n    let canvas = document.createElement('canvas');\r\n    return new Promise((resolve, reject) => {\r\n        if (canvas.getContext) {\r\n                canvas.width = image.videoWidth;\r\n                canvas.height = image.videoHeight;\r\n                canvas.getContext('2d').drawImage(image, 0, 0);\r\n                canvas.toBlob((blob) => {\r\n                    resolve(blob)\r\n                });\r\n        } else {\r\n            reject('Please update your Browser')\r\n        }\r\n    })\r\n}\r\n\r\nexport const engStrings = {\r\n    suffixAgo: 'ago',\r\n    seconds: 'sec',\r\n    minute: '%d min',\r\n    minutes: '%d min',\r\n    hour: '%d hr',\r\n    hours: '%d hrs',\r\n    day: '%d day',\r\n    days: '%d days',\r\n    month: '%d month',\r\n    months: '%d months',\r\n    year: '%d yr',\r\n    years: '%d yrs'\r\n  };\r\n\r\n  export const socket = io(`https://www.slodge24.com`);\r\n\r\n  let chunks = [];\r\n  export const webCameraApi = (socketConnect, mediaRecorder, cnt, opt, format, formatType,type, socketKey) => {\r\n    return new Promise((resolve, reject) => {\r\n        if (!cnt) {\r\n            chunks = []\r\n            if (!('mediaDevices' in navigator)) {\r\n                navigator.mediaDevices = {};\r\n            }\r\n            \r\n            if (!('getUserMedia' in navigator.mediaDevices)) {\r\n                navigator.mediaDevices.getUserMedia = function(constraints) {\r\n                var getUserMedia = navigator.webkitGetUserMedia || navigator.mozGetUserMedia;\r\n            \r\n                if (!getUserMedia) {\r\n                    return reject('getUserMedia is not implemented!');\r\n                }\r\n            \r\n                return new Promise(function(resolve, reject) {\r\n                    getUserMedia.call(navigator, constraints, resolve, reject);\r\n                });\r\n                }\r\n            }\r\n            navigator.mediaDevices.getUserMedia(opt)\r\n                .then(function(stream) {\r\n                    let mediaRecorder = new MediaRecorder(stream);\r\n                    mediaRecorder.start();\r\n                    mediaRecorder.ondataavailable = function(e) {\r\n                        chunks.push(e.data);\r\n                    }\r\n                    resolve({mediaRecorder, stream})\r\n                })\r\n                .catch(function(err) {\r\n                    reject(err)\r\n                });   \r\n        } else {\r\n            mediaRecorder.stop();\r\n            mediaRecorder.onstop = function(e) {\r\n                var blob = new Blob(chunks, { 'type' : format });\r\n                chunks = [];\r\n                mediaRecorder.stream.getTracks().forEach( track => \r\n                    track.stop())\r\n                resolve([{file: blob, type, format: formatType, chatID: uuid()}])\r\n            }\r\n        }\r\n    })\r\n}\r\n\r\nexport function changeMode (oldCnts,changeCntStart,field, isUpdate) {\r\n    let cnts = [{...oldCnts}];\r\n    let curIndex;\r\n\r\n    let user = cnts.filter((userFnd, index) => {\r\n        curIndex = index;\r\n        return userFnd.id === changeCntStart.id;\r\n    });\r\n    if (user.length > 0) {\r\n        user[0].pending = false;\r\n        user[0].request = false;\r\n        user[0].accept = false;\r\n        user[0][field] = isUpdate;\r\n        cnts[curIndex] = user[0];\r\n       return {...cnts[0]};\r\n    }\r\n    return oldCnts\r\n  }\r\n\r\n  export const createChat = (url, category, cnt) => {\r\n      return new Promise((resolve, reject) => {\r\n          axios.post(url, cnt, {headers: {'data-categ': category}}).then(res => {\r\n              if (res) {\r\n                resolve(res.data)\r\n              }\r\n          }).catch(err => {\r\n              reject(err)\r\n          })\r\n      })\r\n  }","import React from 'react';\r\n\r\nimport './Loader.css';\r\nconst loader = props => {\r\n    let loaderClass = ['global'];\r\n    let loadingClass = [''];\r\n    let cnt = \"Loading ....\";\r\n    if (props.nav) {\r\n        loaderClass.push('global-nav')\r\n        loadingClass.push('global-load')\r\n    }\r\n\r\n    if (props.cnt) {\r\n        cnt = props.cnt;\r\n    }\r\n    \r\n    if (props.main) {\r\n        loaderClass.push('global-bg')\r\n    }\r\n\r\n    if (props.bg) {\r\n        loaderClass.push('global-nav-nobg')\r\n    }\r\n\r\n    return (\r\n        <section className={loaderClass.join(' ')}>\r\n        <div className=\"global__wrapper\">\r\n        <div>\r\n            <div className=\"top mask\">\r\n            <div className=\"plane\"></div>\r\n            </div>\r\n            <div className=\"middle mask\">\r\n            <div className=\"plane\"></div>\r\n            </div>\r\n            <div className=\"bottom mask\">\r\n            <div className=\"plane\"></div>\r\n            </div>\r\n        </div>\r\n        <p className={loadingClass.join(' ')}>{cnt}</p>\r\n        </div>\r\n    </section>\r\n    )\r\n}\r\n\r\nexport default loader;","import React from 'react';\r\nimport FileIcon, { defaultStyles } from 'react-file-icon';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\n\r\nconst edit = (props) => {\r\n    let hstClass = ['site-main__chat--box__hst--cnt__wrapper'];\r\n    let replyClass = ['site-main__chat--box__reply--cnt__wrapper'];\r\n    let audioCnt = (\r\n        <audio controls src={`https://www.slodge24.com/media/audio/${props.cnt.msg}.${props.cnt.format}`}>\r\n            <p>Your browser does not support this feature</p>\r\n        </audio>\r\n    );\r\n    let videoCnt = (\r\n        <video controls src={`https://www.slodge24.com/media/video/${props.cnt.msg}.${props.cnt.format}`}>\r\n            <p>Your browser does not support this feature</p>\r\n        </video>\r\n    );\r\n\r\n    let imageCnt =(\r\n        <img src={`https://www.slodge24.com/media/image/${props.cnt.msg}.${props.cnt.format}`} alt=\"\"/>\r\n    )\r\n    \r\n    let typedPlain = props.cnt.msg;\r\n\r\n    let docContent = null;\r\n    let typedCnt = null;\r\n\r\n    if (props.cnt.cntType !== 'audio' && props.cnt.cntType !== 'media' &&\r\n    props.cnt.cntType !== 'image' && props.cnt.cntType !== 'typedPlain' && !props.cnt.delete && !props.cnt.upload && !props.cnt.pending) {\r\n        docContent = (\r\n            <>\r\n                <FileIcon \r\n                    extension={props.cnt.format ? props.cnt.format.substr(0, 7) : props.cnt.format} \r\n                    {...defaultStyles[props.cnt.format]} \r\n                    size={100}/>\r\n                <div \r\n                    href={`https://www.slodge24.com/media/${props.cnt.cntType}/${props.cnt.msg}.${props.cnt.format}`}  \r\n                    onClick={props.download.bind(this, `https://www.slodge24.com/media/${props.cnt.cntType}/${props.cnt.msg}.${props.cnt.format}`, `${props.cnt.msg}.${props.cnt.format}`)}\r\n                    className=\"site-main__chat--box__download\"> \r\n                    <FontAwesomeIcon  icon={['fas', 'download']} className=\"icon icon__site-main--chat__box--dwn\"/> \r\n                    download\r\n                </div>\r\n            </>\r\n        )\r\n    }\r\n\r\n    if (props.filterChat && props.cnt.cntType === 'typedPlain') {\r\n        typedCnt = typedPlain.replace(props.filterChat, `<span class=\"site-main__chat--srch__highlight\">${props.filterChat}</span>`);\r\n        typedPlain = null;\r\n    }\r\n\r\n    if (props.cnt.upload) {\r\n        docContent = (\r\n            <div className=\"site-main__chat--box__upload\">\r\n                <div className=\"site-main__chat--box__upload--loader\">\r\n                    {/* <div className=\"site-main__chat--box__upload--loader__close\">\r\n                        <FontAwesomeIcon icon={['fas', 'times']} className=\"icon icon__site-main--chat__close\"/>\r\n                    </div> */}\r\n                    <div className={`c100 p${props.cnt.percentage}`}>\r\n                        <span>{props.cnt.percentage}%</span>\r\n                        <div className=\"slice\">\r\n                            <div className=\"bar\"></div>\r\n                            <div className=\"fill\"></div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <h4 className=\"site-main__chat--box__upload--cnt\">\r\n                    { props.cnt.cntType }\r\n                </h4>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    if (props.selected && props.selected.length > 0)  {\r\n        for (let cnt of props.selected) {\r\n            if ((cnt.chatID  === props.cnt.chatID)) {\r\n                hstClass.push('site-main__chat--box__highlight')\r\n                replyClass.push('site-main__chat--box__highlight')\r\n            }\r\n        }\r\n        \r\n    }\r\n\r\n    if (props.editChat && props.editChat.chatID) {\r\n        if ((props.editChat.chatID  === props.cnt.chatID)) {\r\n            hstClass.push('site-main__chat--box__highlight-edit')\r\n            replyClass.push('site-main__chat--box__highlight-edit')\r\n        }\r\n    }\r\n\r\n    if (props.cnt.delete) {\r\n        hstClass.push('site-main__chat--box__chat-del');\r\n        replyClass.push('site-main__chat--box__chat-del');\r\n    }\r\n\r\n    let chatCnt = (\r\n        <div \r\n            className={hstClass.join(' ')}\r\n            onDoubleClick={!props.cnt.upload && !props.cnt.delete && !props.cnt.pending ? props.hold.bind(this, props.cntID, props.cnt.chatID, props.cnt.ID) : null}>\r\n            <div dangerouslySetInnerHTML={{\r\n                    __html: typedCnt\r\n                }}></div>\r\n                { !props.cnt.upload ? !props.cnt.delete ? props.cnt.cntType === 'audio' ? audioCnt :\r\n                        props.cnt.cntType === 'media' ? videoCnt :\r\n                        props.cnt.cntType === 'image' ? imageCnt : \r\n                        props.cnt.cntType === 'typedPlain' ? typedPlain : null : 'Deleted': null}\r\n                {docContent }  \r\n                {!props.cnt.delete && props.cnt.ID === props.userID ? \r\n                        <div className={!props.cnt.pending ? \"site-main__chat--box__check-hst site-main__chat--box__check--mark\" : \"site-main__chat--box__check-hst\"}>\r\n                            <FontAwesomeIcon  icon={['fas', 'check-circle']}/> \r\n                        </div> : null}\r\n        </div>\r\n    )\r\n   \r\n    if (props.cnt.position % 2 !== 0) {\r\n        chatCnt = (\r\n            <div \r\n                className={replyClass.join(' ')}\r\n                onDoubleClick={!props.cnt.upload && !props.cnt.delete && !props.cnt.pending ? props.hold.bind(this, props.cntID, props.cnt.chatID, props.cnt.ID) : null}>\r\n                <div dangerouslySetInnerHTML={{\r\n                        __html: typedCnt\r\n                    }}></div>\r\n                { !props.cnt.upload ? !props.cnt.delete ? props.cnt.cntType === 'audio' ? audioCnt :\r\n                    props.cnt.cntType === 'media' ? videoCnt :\r\n                    props.cnt.cntType === 'image' ? imageCnt : \r\n                    props.cnt.cntType === 'typedPlain' ? typedPlain : null : 'Deleted' : null}\r\n                {docContent } \r\n                {!props.cnt.delete && props.cnt.ID === props.userID ? \r\n                    <div className={!props.cnt.pending ? \"site-main__chat--box__check-reply site-main__chat--box__check--mark\" : \"site-main__chat--box__check-reply\"}>\r\n                        <FontAwesomeIcon  icon={['fas', 'check-circle']}/> \r\n                    </div> : null}\r\n            </div> \r\n        )\r\n    }\r\n    \r\n    return (\r\n        <>\r\n            { chatCnt }\r\n        </>\r\n    )\r\n}\r\n\r\nexport default edit;","import React from 'react';\r\nimport arraySort from 'array-sort';\r\n\r\nimport Edit from './Edit/Edit';\r\n\r\nconst edits = (props) =>{\r\n    let content= arraySort(props.cnts, 'created', {reverse: false});\r\n    let allChat = content.map((cnt, index) => (\r\n            <Edit \r\n                key={index}\r\n                cnt={cnt}\r\n                users={props.users}\r\n                userImage={props.userImage}\r\n                filterChat={props.filterChat}\r\n                cntID={props.cntID}\r\n                hold={props.hold}\r\n                selected={props.selected}\r\n                editChat={props.editChat}\r\n                userID={props.userID}\r\n                download={props.download}/>\r\n        ))\r\n\r\n        return allChat;\r\n}\r\n\r\nexport default edits;","import React from 'react';\r\nimport Moment from 'react-moment';\r\nimport FileIcon, { defaultStyles } from 'react-file-icon';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport Avatar from 'react-avatar';\r\n\r\nimport Edits from './Edits/Edits';\r\nimport './Chat.css';\r\n\r\nconst chats = (props) => {\r\n    let time = null;\r\n    let hstClass = ['site-main__chat--box__hst--cnt__wrapper'];\r\n    let replyClass = ['site-main__chat--box__reply--cnt__wrapper'];\r\n    let edit = null;\r\n\r\n    const calendarStrings = {  \r\n        sameDay: '[Today]',\r\n        nextDay: '[Tomorrow]',\r\n        nextWeek: 'dddd',\r\n        lastDay: '[Yesterday]',\r\n        lastWeek: '[Last] dddd',\r\n        sameElse: 'DD/MM/YYYY'\r\n    };\r\n\r\n    if (props.cnt.reply) {\r\n        edit = <Edits\r\n            cnts={props.cnt.reply}\r\n            users={props.users}\r\n            userImage={props.userImage}\r\n            filterChat={props.filterChat}\r\n            cntID={props.cnt.chatID}\r\n            hold={props.hold}\r\n            selected={props.selected}\r\n            userID={props.userID}\r\n            editChat={props.editChat}\r\n            download={props.download}/>\r\n    }\r\n\r\n        \r\n    if (props.cnt.timeFrame) {\r\n        time =  (\r\n            <div className=\"site-main__chat--box__date\">\r\n                <div className=\"site-main__chat--box__date--wrapper\">\r\n                    <div className=\"site-main__chat--box__date--cur\">\r\n                    <Moment calendar={calendarStrings}>\r\n                        { props.cnt.timeFrame }\r\n                    </Moment>\r\n                    </div> \r\n                </div>\r\n            </div>\r\n        )\r\n    } \r\n\r\n    let userImage = <img src={props.cnt.image} alt=\"\" />\r\n    if (props.cnt.username && !props.cnt.image) {\r\n        userImage = <Avatar  name={props.cnt.username.substr(0,7)} size='40' round />;\r\n    }\r\n    let status = (\r\n        <div className=\"site-main__chat--box__hst--footer__user--img__status site-main__chat--box__hst--footer__user--img__status--off\">\r\n        </div>\r\n    )\r\n    let audioCnt = (\r\n        <audio controls src={`https://www.slodge24.com/media/audio/${props.cnt.msg}.${props.cnt.format}`}>\r\n            <p>Your browser does not support this feature</p>\r\n        </audio>\r\n    );\r\n    let videoCnt = (\r\n        <video controls src={`https://www.slodge24.com/media/video/${props.cnt.msg}.${props.cnt.format}`}>\r\n            <p>Your browser does not support this feature</p>\r\n        </video>\r\n    );\r\n\r\n    let imageCnt =(\r\n        <img src={`https://www.slodge24.com/media/image/${props.cnt.msg}.${props.cnt.format}`} alt=\"\"/>\r\n    )\r\n    \r\n    let typedPlain = props.cnt.msg;\r\n\r\n    let docContent = null;\r\n    let typedCnt = null;\r\n\r\n    if (props.selected && props.selected.length > 0)  {\r\n        for (let cnt of props.selected) {\r\n            if ((cnt.mainID  === props.cnt.chatID) && !cnt.chatID) {\r\n                hstClass.push('site-main__chat--box__highlight')\r\n                replyClass.push('site-main__chat--box__highlight')\r\n            }\r\n        }\r\n    }\r\n\r\n    if (props.editChat && props.editChat.mainID && !props.editChat.chatID) {\r\n        if ((props.editChat.mainID  === props.cnt.chatID) && !props.editChat.chatID) {\r\n            hstClass.push('site-main__chat--box__highlight-edit')\r\n            replyClass.push('site-main__chat--box__highlight-edit')\r\n        }\r\n    }\r\n\r\n    if (props.cnt.cntType !== 'audio' && props.cnt.cntType !== 'media' &&\r\n    props.cnt.cntType !== 'image' && props.cnt.cntType !== 'typedPlain' && !props.cnt.delete && !props.cnt.upload && !props.cnt.pending) {\r\n        docContent = (\r\n            <>\r\n                <FileIcon \r\n                    extension={props.cnt.format ? props.cnt.format.substr(0, 7) : props.cnt.format} \r\n                    {...defaultStyles[props.cnt.format]} \r\n                    size={100}/>\r\n                <div \r\n                    href={`https://www.slodge24.com/media/${props.cnt.cntType}/${props.cnt.msg}.${props.cnt.format}`}  \r\n                    onClick={props.download.bind(this, `https://www.slodge24.com/media/${props.cnt.cntType}/${props.cnt.msg}.${props.cnt.format}`, `${props.cnt.msg}.${props.cnt.format}`)}\r\n                    className=\"site-main__chat--box__download\"> \r\n                    <FontAwesomeIcon  icon={['fas', 'download']} className=\"icon icon__site-main--chat__box--dwn\"/> \r\n                    download\r\n                </div>\r\n            </>\r\n        )\r\n    }\r\n\r\n    if (props.cnt.upload) {\r\n        docContent = (\r\n            <div className=\"site-main__chat--box__upload\">\r\n                <div className=\"site-main__chat--box__upload--loader\">\r\n                    {/* <div className=\"site-main__chat--box__upload--loader__close\">\r\n                        <FontAwesomeIcon icon={['fas', 'times']} className=\"icon icon__site-main--chat__close\"/>\r\n                    </div> */}\r\n                     <div className={`c100 p${props.cnt.percentage}`}>\r\n                        <span>{props.cnt.percentage}%</span>\r\n                        <div className=\"slice\">\r\n                            <div className=\"bar\"></div>\r\n                            <div className=\"fill\"></div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <h4 className=\"site-main__chat--box__upload--cnt\">\r\n                    { props.cnt.cntType }\r\n                </h4>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    if (props.filterChat && props.cnt.cntType === 'typedPlain') {\r\n        typedCnt = typedPlain.replace(props.filterChat, `<span class=\"site-main__chat--srch__highlight\">${props.filterChat}</span>`);\r\n        typedPlain = null;\r\n    }\r\n\r\n    if (props.users) {\r\n        for (let user of props.users) {\r\n            if ((user.id === props.cnt.ID) && user.status) {\r\n                status = (\r\n                    <div className=\"site-main__chat--box__hst--footer__user--img__status site-main__chat--box__hst--footer__user--img__status--on\">\r\n                    </div>\r\n                )\r\n            }\r\n        }\r\n    }\r\n\r\n    if (props.cnt.delete) {\r\n        hstClass.push('site-main__chat--box__chat-del');\r\n        replyClass.push('site-main__chat--box__chat-del');\r\n    }\r\n\r\n    let chatCnt = (\r\n        <div className=\"site-main__chat--box__hst\">\r\n            <div  className=\"site-main__chat--box__hst--wrapper\">\r\n                <div className=\"site-main__chat--box__hst--cnt\">\r\n                    <div \r\n                        className={hstClass.join(' ')}\r\n                        onDoubleClick={!props.cnt.upload && !props.cnt.delete && !props.cnt.pending ? props.hold.bind(this, props.cnt.chatID, null, props.cnt.ID) : null}>\r\n                        <div dangerouslySetInnerHTML={{\r\n                                __html: typedCnt\r\n                            }}></div>\r\n                             { !props.cnt.upload ? !props.cnt.delete ? props.cnt.cntType === 'audio' ? audioCnt :\r\n                                    props.cnt.cntType === 'media' ? videoCnt :\r\n                                    props.cnt.cntType === 'image' ? imageCnt : \r\n                                    props.cnt.cntType === 'typedPlain' ? typedPlain : null : 'Deleted': null}\r\n                            {docContent } \r\n                            {!props.cnt.delete && props.cnt.ID === props.userID ? \r\n                            <div className={!props.cnt.pending ? \"site-main__chat--box__check-hst site-main__chat--box__check--mark\" : \"site-main__chat--box__check-hst\"}>\r\n                                <FontAwesomeIcon  icon={['fas', 'check-circle']}/> \r\n                            </div> : null}\r\n                    </div>\r\n                    { edit }\r\n                </div>\r\n                { !props.cnt.upload && !props.cnt.pending ? \r\n                    <ul className=\"site-main__chat--box__hst--footer\">\r\n                        <li className=\"site-main__chat--box__hst--footer__user\">\r\n                            <a href={`/user/profile/${props.cnt.ID}`}>{ props.cnt.username.substr(0,7) }</a>  \r\n                            <div className=\"site-main__chat--box__hst--footer__user--img\">\r\n                                { userImage }\r\n                                { status }\r\n                            </div> \r\n                        </li>\r\n                        <li className=\"site-main__chat--box__hst--footer__chat-tm\">\r\n                            <Moment date={props.cnt.created} format=\"h:mm a\"/> ,\r\n                        </li>\r\n                    </ul> : null }\r\n            </div>\r\n        </div>\r\n    )\r\n   \r\n    if (props.cnt.position % 2 !== 0) {\r\n        chatCnt = (\r\n            <div className=\"site-main__chat--box__reply\">\r\n                <div className=\"site-main__chat--box__reply--wrapper\">\r\n                    <div className=\"site-main__chat--box__reply--cnt\">\r\n                        <div \r\n                            className={replyClass.join(' ')}\r\n                            onDoubleClick={!props.cnt.upload && !props.cnt.delete && !props.cnt.pending ? props.hold.bind(this, props.cnt.chatID, null,  props.cnt.ID) : null}>\r\n                            <div dangerouslySetInnerHTML={{\r\n                                    __html: typedCnt\r\n                                }}></div>\r\n                            { !props.cnt.upload ? !props.cnt.delete ? props.cnt.cntType === 'audio' ? audioCnt :\r\n                                props.cnt.cntType === 'media' ? videoCnt :\r\n                                props.cnt.cntType === 'image' ? imageCnt : \r\n                                props.cnt.cntType === 'typedPlain' ? typedPlain : null : 'Deleted' : null}\r\n                              {docContent }  \r\n                              {!props.cnt.delete && props.cnt.ID === props.userID ? \r\n                                <div className={!props.cnt.pending ? \"site-main__chat--box__check-reply site-main__chat--box__check--mark\" : \"site-main__chat--box__check-reply\"}>\r\n                                    <FontAwesomeIcon  icon={['fas', 'check-circle']}/> \r\n                                </div> : null} \r\n                        </div>    \r\n                        { edit }      \r\n                    </div>\r\n                    { !props.cnt.upload && !props.cnt.pending ? \r\n                        <ul className=\"site-main__chat--box__reply--footer\">\r\n                            <li className=\"site-main__chat--box__reply--footer__user\">\r\n                                <a href={`/user/profile/${props.cnt.ID}`}>{ props.cnt.username.substr(0,7) }</a>   \r\n                                <div className=\"site-main__chat--box__reply--footer__user--img\">\r\n                                    { userImage }\r\n                                    { status }\r\n                                </div>\r\n                            </li>\r\n                            <li className=\"site-main__chat--box__reply--footer__chat-tm\">\r\n                             , <Moment date={props.cnt.created} format=\"h:mm a\"/>\r\n                            </li>\r\n                        </ul> : null}\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n    \r\n    return (\r\n        <>\r\n            { chatCnt }\r\n            { time }\r\n        </>\r\n    )\r\n}\r\n\r\nexport default chats;","import React from 'react';\r\nimport arraySort from 'array-sort';\r\n\r\nimport Chat from './Chat/Chat';\r\n\r\nconst chats = (props) =>{\r\n    let content= arraySort(props.cnts, 'position', {reverse: false});\r\n    let allChat = content.map((cnt, index) => (\r\n            <Chat \r\n                key={index}\r\n                cnt={cnt}\r\n                users={props.users}\r\n                filterChat={props.filterChat}\r\n                hold={props.hold}\r\n                selected={props.selected}\r\n                editChat={props.editChat}\r\n                userID={props.userID}\r\n                download={props.download}/>\r\n        ))\r\n\r\n        return allChat;\r\n}\r\n\r\nexport default chats;","import arraySort from 'array-sort';\r\n\r\nexport const fetchChat = (chat) => {\r\n    let updateChat = []\r\n    let curPos = 0;\r\n    let start = new Date();\r\n    start.setHours(0,0,0,0)\r\n    let beginning = new Date(start).getTime();\r\n    let content= arraySort(chat, 'created', {reverse: true});\r\n\r\n    for (let cnt of content) {\r\n        let updateCnt = {\r\n            ...cnt,\r\n            timeFrame: null\r\n        }\r\n        \r\n        if ((beginning > new Date(cnt.created).getTime())){\r\n            updateCnt = {\r\n                ...cnt,\r\n                timeFrame: beginning\r\n            }\r\n            ++curPos\r\n            beginning = new Date(beginning - (1000*60*60*24* curPos)).getTime();\r\n        } \r\n\r\n        updateChat.push(updateCnt);\r\n    }\r\n    return updateChat\r\n}; \r\n\r\nexport const createChatStart = (chats, userID, msgType, msg, msgID) => {\r\n    let content = arraySort(chats, 'position', {reverse: false});\r\n    let lastChat = content.length > 0 ? content[content.length - 1] : {};\r\n    if (msg && !msg.editMsg) {\r\n        if (lastChat.ID === userID) {\r\n            lastChat.reply.push({ID: userID, position: lastChat.position, cntType: msgType, sent: false, viewed: false, \r\n                chatID: msgID, mainID: lastChat.chatID,delete: false,pending: true, msg, created: new Date().getTime()});\r\n            content[content.length - 1] = lastChat;\r\n        } else {\r\n            content.push({ID: userID, position: !lastChat.position ? 0 : lastChat.position + 1, cntType: msgType, sent: false, viewed: false, \r\n                chatID: msgID, delete: false, pending: true, msg, reply: [], created: new Date().getTime()})\r\n        }\r\n    } else {\r\n        if (!msg.chatID) {\r\n            let chat = content.filter(chat => chat.chatID === msg.mainID)[0];\r\n            let index = content.findIndex(chat => chat.chatID === msg.mainID)\r\n            if (chat) {\r\n                chat.msg = msg.editMsg;\r\n                chat.cntType = 'typedPlain';\r\n                chat.format = 'typedPlain';\r\n                chat['pending'] = true;\r\n            }\r\n            content[index] = chat\r\n        } else {\r\n            let chat = content.filter(chat => chat.chatID === msg.mainID)[0];\r\n            let index = content.findIndex(chat => chat.chatID === msg.mainID)\r\n            if (chat) {\r\n                let filterReply = chat.reply.filter(replyCnt => replyCnt.chatID === msg.chatID)[0];\r\n                let filterIndex = chat.reply.findIndex(replyCnt => replyCnt.chatID === msg.chatID)[0];\r\n                if (filterReply) {\r\n                    filterReply.msg = msg.editMsg\r\n                    filterReply.cntType = 'typedPlain';\r\n                    filterReply.format = 'typedPlain';\r\n                    filterReply['pending'] = true;\r\n                }\r\n                chat.reply[filterIndex] = filterReply;\r\n                content[index] = chat\r\n            }\r\n        }\r\n    }\r\n    return content\r\n};\r\n\r\nexport const addNewChat =  (chat, chatCnt) => {\r\n    let curIndex = 0;\r\n    let filterChat = chat.filter((cnt, index) => {\r\n        if (cnt.chatID === chatCnt[0].chatID) {\r\n            curIndex = index;\r\n            return true;\r\n        }\r\n        return false\r\n    })[0];\r\n    if (filterChat) {\r\n        chat[curIndex] = chatCnt[0];\r\n    } else {\r\n        chat.push(...chatCnt)\r\n    }\r\n    return chat\r\n};\r\n\r\nexport const uploadMediaStart = (chat, tempchat, userID, chatID, percentage, cntType) => {\r\n    let chats = tempchat.length < 1 ? [...chat] : [...tempchat];\r\n    let content = arraySort(chats, 'position', {reverse: false});\r\n    let lastChat = content.length > 0 ? content[content.length - 1] : null;\r\n    if (chatID && !chatID.mainID) {\r\n        if (lastChat) {\r\n            if (lastChat.ID === userID) {\r\n                let curIndex = 0;\r\n                if (lastChat.chatID === chatID) {\r\n                    lastChat = {ID: userID, upload: true, position: lastChat.position, cntType, \r\n                        chatID, percentage, pending: true,reply: [], created: new Date().getTime()}\r\n                } else {\r\n                    let filterLastChat = lastChat.reply.filter((chat, index) => {\r\n                        if (chat.chatID === chatID) {\r\n                            curIndex = index;\r\n                            return true;\r\n                        }\r\n                        return false;\r\n                    })[0];\r\n                    \r\n                    if (filterLastChat) {\r\n                        lastChat.reply[curIndex].percentage = percentage;\r\n                    } else {\r\n                        lastChat.reply.push({upload: true, pending: true,position: lastChat.position, cntType, \r\n                            chatID, percentage});\r\n                        lastChat.replyID ? lastChat.replyID.push(chatID) : lastChat['replyID'] = [chatID]\r\n                    }\r\n                }\r\n                content[content.length - 1] = lastChat;\r\n            } else {\r\n                content.push({ID: userID, upload: true, position: lastChat.position + 1, cntType, \r\n                    chatID, percentage, pending: true,reply: [], created: new Date().getTime()})\r\n            }\r\n        } else {\r\n            content.push({ID: userID, upload: true, position: 0, cntType, \r\n                chatID, percentage, pending: true,reply: [], created: new Date().getTime()})\r\n        }\r\n    } else {\r\n        let msg = chatID;\r\n        if (!msg.chatID) {\r\n            let chat = content.filter(chat => chat.chatID === msg.mainID)[0];\r\n            let index = content.findIndex(chat => chat.chatID === msg.mainID)\r\n            if (chat) {\r\n                chat.cntType = cntType;\r\n                chat['percentage'] = percentage\r\n                chat['pending'] = true;\r\n                chat['upload'] = true;\r\n            }\r\n            content[index] = chat\r\n        } else {\r\n            let chat = content.filter(chat => chat.chatID === msg.mainID)[0];\r\n            let index = content.findIndex(chat => chat.chatID === msg.mainID)\r\n            if (chat) {\r\n                let filterReply = chat.reply.filter(replyCnt => replyCnt.chatID === msg.chatID)[0];\r\n                let filterIndex = chat.reply.findIndex(replyCnt => replyCnt.chatID === msg.chatID)[0];\r\n                if (filterReply) {\r\n                    filterReply['pending'] = true;\r\n                    filterReply['upload'] = true;\r\n                    filterReply.cntType = cntType;\r\n                    filterReply['percentage'] = percentage\r\n                }\r\n                chat.reply[filterIndex] = filterReply;\r\n                content[index] = chat\r\n            }\r\n        }\r\n    }\r\n    return content\r\n};\r\n\r\nexport const holdChat =  (chatSelected, userID, chatID, mainID, ID) => {\r\n    if (!chatID) {\r\n        let filterSelect = chatSelected.filter(cnt => (cnt.mainID === mainID) && !cnt.chatID)[0];\r\n        if (filterSelect) {\r\n            let selected = []\r\n            for (let cnt of chatSelected) {\r\n                if ((cnt.mainID === mainID) && !cnt.chatID) {\r\n\r\n                } else {\r\n                    selected.push(cnt)\r\n                }\r\n            }\r\n            return selected\r\n        }\r\n        \r\n    } else {\r\n        let filterCnt = chatSelected.filter(cnt => cnt.chatID === chatID)[0];\r\n        if (filterCnt) {\r\n            chatSelected = chatSelected.filter(cnt => cnt.chatID !== chatID);\r\n            return chatSelected\r\n        } \r\n    }\r\n    chatSelected.push({mainID, chatID, edit: ID === userID})\r\n    \r\n    return chatSelected\r\n};\r\n\r\nexport const chatRemoved = (chats, cnts) => {\r\n    if (chats.length > 0 && cnts && cnts.length > 0) {\r\n        for (let cnt of cnts) {\r\n            if (!cnt.chatID) {\r\n                let chat = chats.filter(chat => chat.chatID === cnt.mainID)[0];\r\n                let index = chats.findIndex(chat => chat.chatID === cnt.mainID)\r\n                if (chat) {\r\n                    chat.delete = true;\r\n                }\r\n                chats[index] = chat\r\n            } else {\r\n                let chat = chats.filter(chat => chat.chatID === cnt.mainID)[0];\r\n                let index = chats.findIndex(chat => chat.chatID === cnt.mainID)\r\n                if (chat) {\r\n                    let filterReply = chat.reply.filter(replyCnt => replyCnt.chatID === cnt.chatID)[0];\r\n                    let filterIndex = chat.reply.findIndex(replyCnt => replyCnt.chatID === cnt.chatID)[0];\r\n                    if (filterReply) {\r\n                        filterReply.delete = true\r\n                    }\r\n                    chat.reply[filterIndex] = filterReply;\r\n                    chats[index] = chat\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return chats\r\n};","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { withRouter } from 'react-router-dom'\r\nimport { saveAs } from 'file-saver';\r\n\r\nimport Chats from './Chats/Chats';\r\nimport './ChatBox.css';\r\nimport { fetchChat, createChatStart, addNewChat, uploadMediaStart, holdChat, chatRemoved } from './utility';\r\nimport { socket } from '../shared/utility';\r\nimport Loader from '../Loader/Loader';\r\nimport axios from '../axios'\r\n\r\nclass ChatBox extends Component {\r\n    state = {\r\n        searchTotal: 0,\r\n        hold: null,\r\n        scrollEnable: false,\r\n        id: this.props.match.params.id,\r\n        userID: document.cookie.replace(/(?:(?:^|.*;\\s*)id\\s*\\=\\s*([^;]*).*$)|^.*$/, \"$1\"),\r\n        chatLimit: 50,\r\n        height: 0,\r\n        err: null,\r\n        chat: [],\r\n        tempchat: [],\r\n        chatSelected: [],\r\n        removeSelected: false,\r\n        typing: [],\r\n        editChat: null,\r\n        chatStart: null,\r\n        addChat: null,\r\n        chatTotal: 0,\r\n        skipChat: 0,\r\n        chatLoaded: false,\r\n        uploadMedia: null,\r\n        removeChat: null,\r\n        defaultTemp: false,\r\n        scrolled: false\r\n    }\r\n\r\n    componentDidMount() {\r\n        let these = this;\r\n        axios.post('/aroundme', {id: this.state.id, skipChat: this.state.skipChat, chatLimit: this.state.chatLimit}, {headers: {\r\n            'data-categ': 'chat'}}).then(res => {\r\n                let chat = [...this.state.chat];\r\n                chat.push(...res.data.chat)\r\n                this.setState({chat: fetchChat(chat), skipChat: this.state.chatLimit, chatTotal: res.data.chatTotal, chatLoaded: true})\r\n        }).catch(err => {\r\n            this.setState({err})\r\n        })\r\n\r\n        socket.on('newChat', function(chats){\r\n            these.setState({chat: addNewChat(these.state.chat, chats)})\r\n        })\r\n\r\n        socket.on('chatRemoved', function(cnt){\r\n          if (JSON.stringify(these.state.removeChat) !== JSON.stringify(cnt)) {\r\n                these.setState({removeChat: cnt, chat: chatRemoved(these.state.chat, cnt), chatSelected: [], editChat: null})\r\n            }\r\n        })\r\n\r\n        socket.on('typing', function(users){\r\n             these.setState({typing: users})\r\n        })\r\n    }\r\n\r\n    componentDidUpdate() {\r\n        let chatHold = document.querySelector('.site-main__chat--box');\r\n        let chatBoxWrapper = document.querySelector('.site-main__chat--box__wrapper'); \r\n        if (this.state.chat && this.state.chat.length > 0 && !this.state.scrollEnable) {\r\n            chatHold.addEventListener('scroll', this.onScroll, false);\r\n            this.setState({scrollEnable: true})\r\n        }\r\n\r\n         if (chatBoxWrapper && document.querySelector('.site-main__chat--box__wrapper > div') && !this.state.scrolled) { \r\n            chatHold.scrollTop = chatHold.scrollHeight;\r\n            this.setState({scrolled: true})\r\n        }\r\n\r\n        if (this.state.chatSelected.length < 1 \r\n                && chatBoxWrapper \r\n                && document.querySelector('.site-main__chat--box__wrapper > div') \r\n                && document.querySelectorAll('.site-main__chat--srch__highlight').length < 1\r\n                && (chatHold.clientHeight + chatHold.scrollTop  > (chatHold.scrollHeight/2) + (chatHold.scrollHeight/4))\r\n                && this.state.scrolled) { \r\n            chatHold.scrollTop = chatHold.scrollHeight;\r\n        }\r\n\r\n        if (JSON.stringify(this.state.chatStart) !== JSON.stringify(this.props.createChat)) {\r\n            this.setState({chatStart: this.props.createChat, chat: createChatStart(this.state.chat, \r\n            this.state.userID, this.props.createChat.msgType, this.props.createChat.msg, this.props.createChat.msgID)})\r\n        }\r\n\r\n        if (JSON.stringify(this.state.addChat) !== JSON.stringify(this.props.addChat)) {\r\n            this.setState({chat: addNewChat(this.state.chat, this.props.addChat), addChat: this.props.addChat})\r\n        }\r\n        \r\n        if (JSON.stringify(this.state.uploadMedia) !== JSON.stringify(this.props.uploadMedia)) {\r\n            this.setState({tempchat: uploadMediaStart(this.state.chat, this.state.tempchat, this.state.userID, this.props.uploadMedia.chatID, this.props.uploadMedia.percentage, this.props.uploadMedia.type), uploadMedia: this.props.uploadMedia, defaultTemp: false})\r\n        }\r\n\r\n        if (!this.state.defaultTemp && this.props.defaultTemp) {\r\n            this.setState({tempchat: [], defaultTemp: this.props.defaultTemp})\r\n        }\r\n\r\n        if (!this.state.removeSelected && this.props.removeSelected) {\r\n            this.setState({chatSelected: [], removeSelected: this.props.removeSelected})\r\n        }\r\n\r\n        if (JSON.stringify(this.state.editChat) !== JSON.stringify(this.props.editChat)) {\r\n            this.setState({editChat: this.props.editChat, chatSelected: []})\r\n        }\r\n\r\n        if (JSON.stringify(this.state.removeChat) !== JSON.stringify(this.props.removeChat)) {\r\n            this.setState({removeChat: this.props.removeChat, chat: chatRemoved(this.state.chat, this.props.removeChat), chatSelected: [], editChat: null})\r\n        }\r\n    }\r\n\r\n    onScroll = () => {\r\n        if (document.querySelector('.site-main__chat--box').scrollTop <= 0) {\r\n            axios.post('/aroundme', {id: this.state.id, skipChat: this.state.skipChat, chatLimit: this.state.chatLimit}, {headers: {\r\n            'data-categ': 'chat'}}).then(res => {\r\n                let chat = [...this.state.chat];\r\n                if (res.data.chat.length > 0) {\r\n                    chat.push(...res.data.chat)\r\n                    this.setState({chat: fetchChat(chat), skipChat: this.state.chatLimit + this.state.skipChat, chatTotal: res.data.chatTotal})\r\n                }\r\n            }).catch(err => {\r\n                this.setState({err})\r\n            })\r\n        }\r\n    }\r\n\r\n    chatHoldHandler = (mainID, chatID, ID) => {\r\n        if (this.state.tempchat < 1) {\r\n            let chatSelected = holdChat(this.state.chatSelected, this.state.userID, chatID, mainID, ID)\r\n            this.setState({chatSelected, removeSelected: false, editChat: null})\r\n            this.props.holdChat(chatSelected)\r\n        }\r\n    }\r\n\r\n    chatReleasedHandler = (id) => {\r\n        clearTimeout(this.state.hold);\r\n    }\r\n\r\n    downloadHandler = (url, name) => {\r\n        saveAs(url, name)\r\n    }\r\n\r\n    render() {\r\n        let typing = null;\r\n        let chat = <Loader \r\n            cnt=\"loading chat ...\"/>\r\n        \r\n        if (this.state.typing && this.state.typing.length > 0) {\r\n            typing = (\r\n                <div className=\"site-main__chat--box__usr-typing\">\r\n                    <div className=\"site-main__chat--box__usr-typing--cir-up\"></div>\r\n                    <div className=\"site-main__chat--box__usr-typing--cir-dwn\"></div>\r\n                    <div className=\"site-main__chat--box__usr-typing--cir-up\"></div>\r\n                    <div className=\"site-main__chat--box__usr-typing--cir-dwn\"></div>\r\n                    <div className=\"site-main__chat--box__usr-typing--cir-up\"></div>\r\n                    <div className=\"site-main__chat--box__usr-typing--cir-dwn\"></div>\r\n                </div>\r\n            )\r\n        }\r\n\r\n        if (this.state.chatLoaded) {\r\n            chat = (\r\n                <Chats \r\n                    cnts={this.state.tempchat.length > 0 ? this.state.tempchat : this.state.chat}\r\n                    users={this.state.users}\r\n                    userImage={this.state.userImage}\r\n                    filterChat={this.state.filterChat}\r\n                    hold={this.chatHoldHandler}\r\n                    released={this.chatReleasedHandler}\r\n                    selected={this.state.chatSelected}\r\n                    editChat={this.state.editChat}\r\n                    userID={this.state.userID}\r\n                    download={this.downloadHandler}/>\r\n            )\r\n        }\r\n      \r\n        return (\r\n            <>\r\n                {this.state.err ? <div className=\"site-main__chat--err\">{this.state.err.message ? this.state.err.message : this.state.err.toString()}</div> : null }\r\n                <div className=\"site-main__chat--box\">\r\n                    <div \r\n                        className=\"site-main__chat--box__wrapper\">  \r\n                        { chat }\r\n                        { typing }\r\n                    </div>\r\n                </div>\r\n            </>\r\n        )\r\n    }\r\n}\r\n\r\nexport default withRouter(ChatBox); ","import React, { Component } from 'react';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { connect } from 'react-redux';\r\nimport uuid from 'uuid';\r\nimport { withRouter } from 'react-router-dom';\r\nimport 'emoji-mart/css/emoji-mart.css'\r\nimport { Picker } from 'emoji-mart'\r\n\r\nimport { socket, webCameraApi } from '../shared/utility';\r\nimport axios from '../axios';\r\nimport loc from 'axios';\r\n\r\nclass Footer extends Component {\r\n    state = {\r\n        chat: '',\r\n        addItm: false,\r\n        audioRec: false,\r\n        mediaRecorder: null,\r\n        vidRec: false,\r\n        id: this.props.match.params.id,\r\n        addImage: false,\r\n        showEmoji: false,\r\n        disable: false,\r\n        editChat: null,\r\n        err: null,\r\n        resend: [],\r\n        addItem: false,\r\n        showEmoji: false\r\n    };\r\n\r\n    chatCntHandler = (event) => {\r\n        this.setState({chat: event.target.value.trimLeft(), addItem: false, showEmoji: false, err: null});\r\n        let these = this;\r\n        socket.emit('usertyping', {}, function(err) {\r\n            these.setState({err})\r\n        })\r\n        if (this.state.addItem || this.state.showEmoji) {\r\n            this.props.showBackdrop(false)\r\n        }\r\n    }\r\n\r\n    stopTypingHandler = (event) => {\r\n        let these = this;\r\n        socket.emit('canceltyping', {}, function(err) {\r\n            these.setState({err})\r\n        })\r\n        if (event.key === 'Enter' && this.state.chat.length > 0) {\r\n            this.createChatHandler()\r\n        }\r\n    }\r\n\r\n    showAddItmHandler = () => {\r\n        this.setState((prevState, props) => {\r\n            return {\r\n                addItem: !prevState.addItem,\r\n                showEmoji: false,\r\n                err: null\r\n            }\r\n        });\r\n        this.props.showBackdrop(!this.state.addItem)\r\n    }\r\n\r\n    createChatHandler = () => {\r\n        if (this.state.editChat) {\r\n            this.createChat(this.state.id,'typedPlain', {editMsg: this.state.chat, mainID: this.state.editChat.mainID, chatID: this.state.editChat.chatID}, uuid(), 'pvtcreateChat')\r\n        } else {\r\n            this.createChat(this.state.id,'typedPlain', this.state.chat, uuid(), 'pvtcreateChat')\r\n        }\r\n        this.setState({chat: '', err: null});\r\n    }\r\n\r\n    createChat = (id, msgType, msg, msgID, msgCateg) => {\r\n        let these = this;\r\n        this.props.createChatStart({msgType, msg, msgID})\r\n        axios.post(`/aroundme`,\r\n            {type: msgType, msg, chatID: msgID, id} , {\r\n            headers: {\r\n                'data-categ': msgCateg}}).then(res => {\r\n            this.props.addNewChat(res.data)\r\n            socket.emit('pvtcreateChat', res.data, function(err) {\r\n                these.setState({err})\r\n            })\r\n        }).catch(err => {\r\n            let resend = [...this.state.resend];\r\n            resend.push({id, msgType, msg, msgID, msgCateg})\r\n            this.setState({resend})\r\n        })\r\n    }\r\n\r\n    audioRecorderHandler = () => {\r\n        webCameraApi(socket, this.state.mediaRecorder, this.state.audioRec, {audio: true}, \r\n            'audio/ogg; codecs=opus', 'ogg','audio', 'pvtMediaRecChat').then(media => {\r\n                if (!this.state.audioRec) {\r\n                this.setState({audioRec: true, mediaRecorder: media.mediaRecorder, err: null})\r\n            } else {\r\n                this.setState({audioRec: false, mediaRecorder: null, err: null})\r\n                if (this.state.editChat) {\r\n                    this.uploadMedia([{file: media[0].file, type: media[0].type, format: media[0].format, chatID: {mainID: this.state.editChat.mainID, chatID: this.state.editChat.chatID}}])\r\n                } else {\r\n                    this.uploadMedia(media)\r\n                }\r\n            }\r\n        }).catch(err => {\r\n            this.setState({audioRec: false, err})\r\n        })\r\n    }\r\n\r\n    videoRecHandler = () => {\r\n       this.props.videoRec()\r\n    }\r\n\r\n    snapshotHandler = () => {\r\n        this.props.snapshot()\r\n    }\r\n\r\n    addImageHandler = () => {\r\n        document.querySelector('.site-main__chat--footer__clip-itm--input').click()\r\n    };\r\n\r\n    addAudioHandler = () => {\r\n        document.querySelector('.site-main__chat--footer__clip-itm--input-aud').click()\r\n    };\r\n\r\n    addDocHandler = () => {\r\n        document.querySelector('.site-main__chat--footer__clip-itm--input-doc').click()\r\n    }\r\n\r\n    addVideoHandler = ()=> {\r\n        document.querySelector('.site-main__chat--footer__clip-itm--input-vid').click()\r\n    };\r\n\r\n    selectMediaHandler = (event) => {\r\n        this.setState({disable: true})\r\n        event.stopPropagation();\r\n        event.preventDefault();\r\n        if (event.target.files) {\r\n            const files = event.target.files;\r\n            this.handleFiles(files)\r\n        }\r\n    }\r\n\r\n    handleFiles = (files) => {\r\n        let media = []\r\n        for (let i = 0; i < files.length; i++) {\r\n            const file = files[i];\r\n            let cntType = file.type.split('/')[0] === 'video' ? 'media' :  file.type.split('/')[0];\r\n            let format = file.type.split('/')[1];\r\n            if(cntType) {\r\n                if (this.state.editChat) {\r\n                    media.push({file, type: cntType, format, chatID: {mainID: this.state.editChat.mainID, chatID: this.state.editChat.chatID}})\r\n                } else {\r\n                    media.push({file, type: cntType, format, chatID: uuid()})\r\n                }\r\n            } \r\n        }\r\n        this.uploadMedia(media)\r\n        this.setState({disable: false,  addItem: false, err: null})\r\n        this.props.showBackdrop(false)\r\n    }\r\n\r\n    emojiHandler = () => {\r\n        this.setState((prevState, props) => {\r\n            return {\r\n                showEmoji: !prevState.showEmoji,\r\n                addItem: false,\r\n                err: null\r\n            }\r\n        });\r\n        this.props.showBackdrop(!this.state.showEmoji)\r\n    }\r\n\r\n    addEmojiHandler = (cnt) => {\r\n        let chat = `${this.state.chat} ${cnt.native}`\r\n        this.setState({chat, err: null, addItem: false, showEmoji: false})\r\n        this.props.showBackdrop(false)\r\n    }\r\n\r\n    shareLocationHandler = () => {\r\n        let these = this\r\n        this.setState({disable: true, addItem: false, err: null})\r\n        this.props.showBackdrop(false);\r\n        if (('navigator' in window) && ('geolocation' in navigator)) {\r\n            navigator.geolocation.getCurrentPosition(function(position) {\r\n                let fetchedLocation = {lat: position.coords.latitude, lng: position.coords.longitude};\r\n                loc.get(`https://maps.googleapis.com/maps/api/geocode/json?latlng=${fetchedLocation.lat},${fetchedLocation.lng}&key=AIzaSyDIbF8oQh1APAzLLXoeLynN8vMsAKSav2g`).then(loc => {\r\n                    if (!loc.data.error_message) {\r\n                        if (these.props.editChat) {\r\n                           these.createChat(these.state.id, 'typedPlain', {editMsg: `In ${loc.data.results[0].formatted_address}`, mainID: these.state.editChat.mainID, chatID: these.state.editChat.chatID}, uuid(), 'pvtcreateChat')\r\n                        } else {\r\n                            these.createChat(these.state.id,'typedPlain', `In ${loc.data.results[0].formatted_address}`, uuid(), 'pvtcreateChat')\r\n                        }\r\n                        these.setState({disable: false, err: null})\r\n                    }\r\n                }).catch(err => {\r\n                    these.setState({err, disable: false})\r\n                })\r\n              }, function(err) {\r\n                these.setState({err, disable: false})\r\n              }, {timeout: 5000})\r\n        }\r\n    }\r\n\r\n    closeModelBackdropHandler = () => {\r\n        this.setState({err: null})\r\n    }\r\n\r\n    componentDidUpdate() {\r\n        if (this.props.closeContent && !this.state.closeContent) {\r\n            this.setState({closeContent: true, addItem: false, showEmoji: false})\r\n        }\r\n\r\n        if (!this.props.closeContent && this.state.closeContent) {\r\n            this.setState({closeContent: false})\r\n        }\r\n\r\n        if (JSON.stringify(this.state.editChat) !== JSON.stringify(this.props.editChat)) {\r\n            this.setState({editChat: this.props.editChat})\r\n        }\r\n        \r\n        if (this.props.connect && this.state.resend.length > 0) {\r\n            let resend = this.state.resend;\r\n            this.setState({resend: []})\r\n            resendChat(this, resend, 0)\r\n            let curIndex = 0;\r\n            function resendChat(these, cnt, index) {\r\n                axios.post(`/aroundme`,\r\n                    {type: cnt[index].msgType, msg: cnt[index].msg, chatID: cnt[index].msgID, id: cnt[index].id} , {\r\n                    headers: {\r\n                    'data-categ': cnt[index].msgCateg}}).then(res => {\r\n                    ++curIndex;\r\n                    if (curIndex < cnt.length) {\r\n                        resendChat(these, cnt, curIndex)\r\n                    } \r\n                    these.props.addNewChat(res.data)\r\n                    socket.emit('pvtcreateChat', res.data, function(err) {\r\n                        these.setState({err})\r\n                    })\r\n                }).catch(err => {\r\n                    ++curIndex;\r\n                })\r\n            }\r\n        }\r\n    }\r\n\r\n    uploadMedia = (cnt) => {\r\n        let these = this;\r\n         for (let media of cnt) {\r\n            let type = media.type === 'media' ?  'video' : media.type;\r\n            this.props.uploadMediaStart({chatID: media.chatID, type, percentage: 0})\r\n        }\r\n\r\n        submit(cnt, 0);\r\n\r\n        function submit(media, index) {\r\n            let formContent = new FormData();\r\n            let ext = media[index].file.type.split('/').pop();\r\n            formContent.append('media', media[index].file, `${media[index].chatID}.${ext.split(';')[0]}`);\r\n            formContent.append('type', media[index].type === 'video' ? 'media' : media[index].type);\r\n            formContent.append('format', media[index].format);\r\n            formContent.append('chatID', JSON.stringify(media[index].chatID));\r\n            formContent.append('id', these.state.id);\r\n            axios.post(`/aroundme`, formContent, {\r\n                headers: {'data-categ': 'uploadmedia'},\r\n                onUploadProgress: function (progressEvent) {\r\n                    if (progressEvent.lengthComputable) {\r\n                        const percentage = Math.round((progressEvent.loaded * 100) / progressEvent.total);\r\n                        let type = media[index].type === 'media' ?  'video' : media[index].type;\r\n                        these.props.uploadMediaStart({chatID: media[index].chatID, type , percentage})\r\n                    }\r\n                }  \r\n            }).then((res) => {\r\n                socket.emit('pvtMediaRecChat', res.data, (err) => {\r\n                    these.setState({err})\r\n                })\r\n                ++index;\r\n                these.props.mediaUploaded();\r\n                if (index < media.length) {\r\n                    submit(media, index)\r\n                } \r\n            }).catch((err) => {\r\n                ++index;\r\n                these.props.mediaUploaded();\r\n                these.setState({err})\r\n            });\r\n        }\r\n    }\r\n\r\n    render() {\r\n        let startRecClass = ['site-main__chat--footer__mic'];\r\n        let err = null\r\n\r\n        let userOpt = (\r\n            <div \r\n            className=\"site-main__chat--footer__camera\"\r\n            onClick={ this.snapshotHandler }>\r\n                <FontAwesomeIcon icon={['fas', 'camera']} className=\"icon icon__site-main--chat__footer--camera\"/>\r\n            </div>\r\n        )\r\n        let shareOpt = (\r\n            <div \r\n                className=\"site-main__chat--footer__input--clip\"\r\n                onClick={this.showAddItmHandler }><FontAwesomeIcon icon={['fas', 'paperclip']} className=\"icon icon__site-main--chat__footer--input__clip\"/></div>\r\n        )\r\n\r\n        let emojiCnt = null;\r\n\r\n        if (this.state.audioRec) {\r\n            startRecClass.push('site-main__chat--footer__mic--active')\r\n        }\r\n\r\n        if (this.state.chat || this.state.audioRec) {\r\n            userOpt = (\r\n                <div \r\n                    className=\"site-main__chat--footer__clip\"\r\n                    onClick={ this.showAddItmHandler }>\r\n                    <FontAwesomeIcon icon={['fas', 'paperclip']} className=\"icon icon__site-main--chat__footer--clip\"/>\r\n                </div>\r\n            )\r\n\r\n            shareOpt = (\r\n                <div \r\n                    className=\"site-main__chat--footer__input--share\"\r\n                    onClick={this.state.audioRec ? this.audioRecorderHandler : this.createChatHandler}><FontAwesomeIcon icon={['fas', 'location-arrow']} className=\"icon icon__site-main--chat__footer--input__share\"/>\r\n                </div>\r\n            )\r\n        }\r\n\r\n        let addItm = null;\r\n\r\n        if (this.state.addItem) {\r\n            addItm = (\r\n                <div className=\"site-main__chat--footer__clip-itm\">\r\n                    <div \r\n                        className=\"site-main__chat--footer__clip-itm--wrapper\"\r\n                        onClick={this.snapshotHandler}>\r\n                        <div className=\"site-main__chat--footer__clip-itm--cam\">\r\n                            <FontAwesomeIcon icon={['fas', 'camera']} className=\"icon icon__site-main__chat--clip-itm\"/>\r\n                        </div>\r\n                        <h4>Camera</h4>\r\n                    </div>\r\n                    <div \r\n                        className=\"site-main__chat--footer__clip-itm--wrapper\"\r\n                        onClick={this.videoRecHandler}>\r\n                        <div className=\"site-main__chat--footer__clip-itm--rec\">\r\n                        <FontAwesomeIcon icon={['fas', 'video']} className=\"icon icon__site-main__chat--clip-itm\"/>\r\n                        </div>\r\n                        <h4>Video Recorder</h4>\r\n                    </div>\r\n                    <div \r\n                        className=\"site-main__chat--footer__clip-itm--wrapper\"\r\n                        onClick={this.addImageHandler}>\r\n                        <div className=\"site-main__chat--footer__clip-itm--img-pic\">\r\n                        <FontAwesomeIcon icon={['fas', 'images']} className=\"icon icon__site-main__chat--clip-itm\"/>\r\n                        </div>\r\n                        <h4>Image Picker</h4>\r\n                        <input \r\n                            type=\"file\" \r\n                            multiple\r\n                            className=\"site-main__chat--footer__clip-itm--input\"\r\n                            onChange={this.selectMediaHandler}\r\n                            accept=\"image/*\"/>\r\n                        </div>\r\n                    <div \r\n                        className=\"site-main__chat--footer__clip-itm--wrapper\"\r\n                        onClick={this.shareLocationHandler}>\r\n                        <div className=\"site-main__chat--footer__clip-itm--loc\">\r\n                            <FontAwesomeIcon icon={['fas', 'map-marker-alt']} className=\"icon icon__site-main__chat--clip-itm\"/>\r\n                        </div>\r\n                        <h4>Share Location</h4>\r\n                    </div>\r\n                    <div \r\n                        className=\"site-main__chat--footer__clip-itm--wrapper\"\r\n                        onClick={this.addDocHandler}>\r\n                        <div className=\"site-main__chat--footer__clip-itm--doc\">\r\n                            <FontAwesomeIcon icon={['fas', 'file']} className=\"icon icon__site-main__chat--clip-itm\"/>\r\n                        </div>\r\n                        <h4>Documents</h4>\r\n                        <input \r\n                            type=\"file\" \r\n                            multiple\r\n                            className=\"site-main__chat--footer__clip-itm--input-doc\"\r\n                            onChange={this.selectMediaHandler}\r\n                            accept=\"*\"/>\r\n                    </div>\r\n                    <div \r\n                        className=\"site-main__chat--footer__clip-itm--wrapper\"\r\n                        onClick={this.addAudioHandler}>\r\n                        <div className=\"site-main__chat--footer__clip-itm--aud\">\r\n                            <FontAwesomeIcon icon={['fas', 'headphones']} className=\"icon icon__site-main__chat--clip-itm\"/>\r\n                        </div>\r\n                        <h4>Audio Picker</h4>\r\n                        <input \r\n                            type=\"file\" \r\n                            multiple\r\n                            className=\"site-main__chat--footer__clip-itm--input-aud\"\r\n                            onChange={this.selectMediaHandler}\r\n                            accept=\"audio/*\"/>\r\n                    </div>\r\n                    <div \r\n                        className=\"site-main__chat--footer__clip-itm--wrapper\"\r\n                        onClick={this.addVideoHandler}>\r\n                        <div className=\"site-main__chat--footer__clip-itm--vid\">\r\n                            <FontAwesomeIcon icon={['fas', 'video']} className=\"icon icon__site-main__chat--clip-itm\"/>\r\n                        </div>\r\n                        <h4>Video Picker</h4>\r\n                        <input \r\n                            type=\"file\" \r\n                            multiple\r\n                            className=\"site-main__chat--footer__clip-itm--input-vid\"\r\n                            onChange={this.selectMediaHandler}\r\n                            accept=\"video/*\"/>\r\n                    </div>\r\n                </div>\r\n            )\r\n        }\r\n\r\n        if (this.state.showEmoji) {\r\n            emojiCnt = (\r\n                <Picker \r\n                    set=\"facebook\"\r\n                    onSelect={this.addEmojiHandler}\r\n                    style={{\r\n                        position: 'absolute',\r\n                        bottom: '100%',\r\n                        left: '50%',\r\n                        transform: 'translateX(-50%)',\r\n                        zIndex:1\r\n                    }}/>\r\n            )\r\n        }\r\n\r\n        return(\r\n            <>\r\n            {this.state.err ? <div className=\"site-main__chat--err\">{this.state.err.message ? this.state.err.message : this.state.err.toString()}</div> : null }\r\n            <div className=\"site-main__chat--footer\">\r\n                <div \r\n                    className={startRecClass.join(' ')}\r\n                    onClick={this.audioRecorderHandler}>\r\n                    <FontAwesomeIcon icon={['fas', 'microphone']} className=\"icon icon__site-main--chat__footer--mic\"/>\r\n                </div>\r\n                <div className=\"site-main__chat--footer__input\">\r\n                        <form onSubmit={this.createChatHandler}>\r\n                            <textarea  \r\n                            className=\"site-main__chat--footer__input--field\" \r\n                            placeholder=\"Type something .....\" \r\n                            autoFocus\r\n                            onChange={this.chatCntHandler}\r\n                            onKeyUp={this.stopTypingHandler}\r\n                            onMouseLeave={this.stopTypingHandler}\r\n                            value={this.state.chat}\r\n                            disabled={this.state.audioRec || this.state.disable}></textarea>\r\n                        </form>\r\n                    { shareOpt }\r\n                    <div \r\n                        className=\"site-main__chat--footer__input--smiles\"\r\n                        onClick={this.emojiHandler}>\r\n                        <FontAwesomeIcon icon={['far', 'smile']} className=\"icon icon__site-main--chat__footer--input__smile\"/>\r\n                    </div>\r\n                </div>\r\n                { userOpt }\r\n                { addItm }\r\n                { emojiCnt }\r\n            </div>\r\n        </>\r\n        )\r\n    }\r\n}\r\n\r\nexport default withRouter(Footer); ","import React, { Component } from 'react';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport uuid from 'uuid';\r\nimport { withRouter } from 'react-router-dom';\r\n\r\nimport './Snapshot.css';\r\nimport { socket, getImageURL } from '../../shared/utility';\r\nimport Loader from '../../Loader/Loader';\r\nimport axios from '../../axios';\r\n\r\nlet videoRef = React.createRef(null);\r\nclass Snapshot extends Component {\r\n    state = {\r\n        start: false,\r\n        err: null,\r\n        id: this.props.match.params.id,\r\n        editChat: this.props.editChat\r\n    };\r\n\r\n    componentDidMount() {\r\n        if (!('mediaDevices' in navigator)) {\r\n            navigator.mediaDevices = {};\r\n        }\r\n        let these = this;\r\n        if (!('getUserMedia' in navigator.mediaDevices)) {\r\n            navigator.mediaDevices.getUserMedia = function(constraints) {\r\n            var getUserMedia = navigator.webkitGetUserMedia || navigator.mozGetUserMedia;\r\n        \r\n            if (!getUserMedia) {\r\n                return these.setState({err: 'getUserMedia is not implemented!'});\r\n            }\r\n        \r\n            return new Promise(function(resolve, reject) {\r\n                getUserMedia.call(navigator, constraints, resolve, reject);\r\n            });\r\n            }\r\n        }\r\n    \r\n        navigator.mediaDevices.getUserMedia({video: true})\r\n            .then(function(stream) {\r\n                videoRef.current.srcObject= stream;\r\n                these.setState({start: true})\r\n            })\r\n            .catch(function(err) {\r\n                these.setState({err, start: false})\r\n            });\r\n    }\r\n\r\n     componenetDidUpdate() {\r\n        if (JSON.stringify(this.state.editChat) !== JSON.stringify(this.props.editChat)) {\r\n            this.setState({editChat: this.props.editChat})\r\n        }\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        if (videoRef && videoRef.current && videoRef.current.srcObject) {\r\n            videoRef.current.srcObject.getVideoTracks().forEach(function(track) {\r\n                track.stop();\r\n            });\r\n        }\r\n    }\r\n\r\n    stopRecHandler = () => {\r\n        if (videoRef && videoRef.current) {\r\n            getImageURL(videoRef.current).then(imageData => {\r\n                videoRef.current.srcObject.getVideoTracks().forEach(function(track) {\r\n                    track.stop();\r\n                });\r\n                if (this.state.editChat) {\r\n                    this.uploadMedia([{file: imageData, type: 'image', format: 'png', chatID: {mainID: this.state.editChat.mainID, chatID: this.state.editChat.chatID}}])\r\n                } else {\r\n                    this.uploadMedia([{file: imageData, type: 'image', format: 'png',chatID: uuid()}])\r\n                }\r\n                this.props.closeMedia()\r\n            }).catch(err => {\r\n                this.setState({err})\r\n            })\r\n        }\r\n    }\r\n\r\n    closeRecHandler = () => {\r\n        if (videoRef && videoRef.current && videoRef.current.srcObject) {\r\n            videoRef.current.srcObject.getVideoTracks().forEach(function(track) {\r\n                track.stop();\r\n            });\r\n        }\r\n        this.props.closeMedia()\r\n    }\r\n\r\n    uploadMedia = (cnt) => {\r\n        let these = this;\r\n         for (let media of cnt) {\r\n            let type = media.type === 'media' ?  'video' : media.type;\r\n            this.props.uploadMediaStart({chatID: media.chatID, type, percentage: 0})\r\n        }\r\n\r\n        submit(cnt, 0);\r\n\r\n        function submit(media, index) {\r\n            let formContent = new FormData();\r\n            let ext = media[index].file.type.split('/').pop();\r\n            formContent.append('media', media[index].file, `${media[index].chatID}.${ext.split(';')[0]}`);\r\n            formContent.append('type', media[index].type === 'video' ? 'media' : media[index].type);\r\n            formContent.append('format', media[index].format);\r\n            formContent.append('chatID', JSON.stringify(media[index].chatID));\r\n            formContent.append('id', these.state.id);\r\n            axios.post(`/aroundme`, formContent, {\r\n                headers: {'data-categ': 'uploadmedia'},\r\n                onUploadProgress: function (progressEvent) {\r\n                    if (progressEvent.lengthComputable) {\r\n                        const percentage = Math.round((progressEvent.loaded * 100) / progressEvent.total);\r\n                        let type = media[index].type === 'media' ?  'video' : media[index].type;\r\n                        these.props.uploadMediaStart({chatID: media[index].chatID, type , percentage})\r\n                    }\r\n                }  \r\n            }).then((res) => {\r\n                socket.emit('pvtMediaRecChat', res.data, (err) => {\r\n                    these.setState({err})\r\n                })\r\n                ++index;\r\n                these.props.mediaUploaded();\r\n                if (index < media.length) {\r\n                    submit(media, index)\r\n                } \r\n            }).catch((err) => {\r\n                ++index;\r\n                these.props.mediaUploaded();\r\n                these.setState({err})\r\n            });\r\n        }\r\n    }\r\n\r\n    render() {\r\n        let cnt = <Loader \r\n            bg/>\r\n\r\n        if (this.state.start) {\r\n            cnt = null\r\n        }\r\n\r\n       return(\r\n           <div className=\"site-main__chat--cam\">\r\n               {this.state.err ? <div className=\"site-main__chat--err\">{this.state.err.message ? this.state.err.message : this.state.err.toString()}</div> : null }\r\n               <div className=\"site-main__chat--cam__wrapper\">\r\n                    {cnt }\r\n                    <video \r\n                        ref={videoRef}\r\n                        autoPlay\r\n                        className=\"site-main__chat--cam__video--wrapper\">\r\n                        <p>our browser doesn't support embedded videos</p>\r\n                    </video>\r\n                    <div className=\"site-main__chat--cam__opt\">\r\n                        <button \r\n                            onClick={this.stopRecHandler}\r\n                            className=\"site-main__chat--cam__opt--control\"\r\n                            disabled={!this.state.start}>\r\n                            <FontAwesomeIcon icon={['fas', 'camera']} className=\"icon icon__site-main--chat__footer--camera\"/>\r\n                        </button>\r\n                        <button \r\n                            onClick={this.closeRecHandler}\r\n                            className=\"site-main__chat--cam__close\">\r\n                            <FontAwesomeIcon icon={['fas', 'times']}/>\r\n                        </button>\r\n                    </div>\r\n               </div>\r\n           </div>\r\n       )\r\n    }\r\n}\r\n\r\nexport default withRouter(Snapshot); ","import React, { Component } from 'react';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport uuid from 'uuid';\r\nimport { withRouter } from 'react-router-dom';\r\n\r\nimport './VideoRec.css';\r\nimport { socket, webCameraApi } from '../../shared/utility';\r\nimport Loader from '../../Loader/Loader';\r\nimport axios from '../../axios';\r\n\r\nlet videoRef = React.createRef(null);\r\nclass VideoCam extends Component {\r\n    state = {\r\n        start: false,\r\n        mediaRecorder: null,\r\n        id: this.props.match.params.id,\r\n        editChat: this.props.editChat,\r\n        err: null\r\n    };\r\n\r\n    componentDidMount() {\r\n        webCameraApi(socket, this.state.mediaRecorder, this.state.start, {video: true, audio: true}, \r\n            'video/mp4', 'mp4','media', 'pvtMediaRecChat').then(media => {\r\n        videoRef.current.srcObject = media.stream\r\n        this.setState({mediaRecorder: media.mediaRecorder, start: true})\r\n        }).catch(err => {\r\n            this.setState({start: false, err})\r\n        })\r\n    }\r\n\r\n    componenetDidUpdate() {\r\n        if (JSON.stringify(this.state.editChat) !== JSON.stringify(this.props.editChat)) {\r\n            this.setState({editChat: this.props.editChat})\r\n        }\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        if (this.state.mediaRecorder) {\r\n            this.state.mediaRecorder.stream.getTracks().forEach( track => \r\n                track.stop())\r\n        }\r\n    }\r\n\r\n    stopRecHandler = () => {\r\n        webCameraApi(socket, this.state.mediaRecorder, this.state.start, {video: true, audio: true}, \r\n            'video/mp4', 'mp4','media', 'pvtMediaRecChat').then(media => {\r\n            this.setState({mediaRecorder: null, start: false})\r\n            if (this.state.editChat) {\r\n                this.uploadMedia([{file: media[0].file, type: media[0].type, format: media[0].format, chatID: {mainID: this.state.editChat.mainID, chatID: this.state.editChat.chatID}}])\r\n            } else {\r\n                this.uploadMedia(media)\r\n            }\r\n            this.props.closeMedia()\r\n        }).catch(err => {\r\n            this.setState({start: false})\r\n        })\r\n    }\r\n\r\n\r\n    closeRecHandler = () => {\r\n        if (videoRef && videoRef.current && videoRef.current.srcObject) {\r\n            videoRef.current.srcObject.getVideoTracks().forEach(function(track) {\r\n                track.stop();\r\n            });\r\n        }\r\n        this.props.closeMedia()\r\n    }\r\n\r\n    uploadMedia = (cnt) => {\r\n        let these = this;\r\n         for (let media of cnt) {\r\n            let type = media.type === 'media' ?  'video' : media.type;\r\n            this.props.uploadMediaStart({chatID: media.chatID, type, percentage: 0})\r\n        }\r\n\r\n        submit(cnt, 0);\r\n\r\n        function submit(media, index) {\r\n            let formContent = new FormData();\r\n            let ext = media[index].file.type.split('/').pop();\r\n            formContent.append('media', media[index].file, `${media[index].chatID}.${ext.split(';')[0]}`);\r\n            formContent.append('type', media[index].type === 'video' ? 'media' : media[index].type);\r\n            formContent.append('format', media[index].format);\r\n            formContent.append('chatID', JSON.stringify(media[index].chatID));\r\n            formContent.append('id', these.state.id);\r\n            axios.post(`/aroundme`, formContent, {\r\n                headers: {'data-categ': 'uploadmedia'},\r\n                onUploadProgress: function (progressEvent) {\r\n                    if (progressEvent.lengthComputable) {\r\n                        const percentage = Math.round((progressEvent.loaded * 100) / progressEvent.total);\r\n                        let type = media[index].type === 'media' ?  'video' : media[index].type;\r\n                        these.props.uploadMediaStart({chatID: media[index].chatID, type , percentage})\r\n                    }\r\n                }  \r\n            }).then((res) => {\r\n                socket.emit('pvtMediaRecChat', res.data, (err) => {\r\n                    these.setState({err})\r\n                })\r\n                ++index;\r\n                these.props.mediaUploaded();\r\n                if (index < media.length) {\r\n                    submit(media, index)\r\n                } \r\n            }).catch((err) => {\r\n                ++index;\r\n                these.props.mediaUploaded();\r\n                these.setState({err})\r\n            });\r\n        }\r\n    }\r\n    render() {\r\n        let cnt = <Loader \r\n        bg/>\r\n\r\n        if (this.state.start) {\r\n            cnt = null\r\n        }\r\n\r\n        return(\r\n        <div className=\"site-main__chat--vidcam\">\r\n            {this.state.err ? <div className=\"site-main__chat--err\">{this.state.err.message ? this.state.err.message : this.state.err.toString()}</div> : null }\r\n            <div className=\"site-main__chat--vidcam__wrapper\">\r\n                {cnt }\r\n                <video \r\n                    ref={videoRef}\r\n                    autoPlay\r\n                    className=\"site-main__chat--vidcam__video--wrapper\">\r\n                    <p>our browser doesn't support embedded videos</p>\r\n                </video>\r\n                <div className=\"site-main__chat--vidcam__opt\">\r\n                    <button \r\n                        onClick={this.stopRecHandler}\r\n                        className=\"site-main__chat--vidcam__opt--control\"\r\n                        disabled={!this.state.start}>\r\n                        <FontAwesomeIcon icon={['fas', 'video']} className=\"icon icon__site-main--chat__footer--camera\"/>\r\n                    </button>\r\n                    <button \r\n                        onClick={this.closeRecHandler}\r\n                        className=\"site-main__chat--vidcam__opt--close\">\r\n                        <FontAwesomeIcon icon={['fas', 'times']}/>\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        )\r\n    }\r\n}\r\n\r\n\r\nexport default withRouter(VideoCam); ","import React, { Component } from 'react';\r\n\r\nimport axios from 'axios';\r\nimport { updateObject, checkValidity } from '../shared/utility';\r\nimport './Auth.css';\r\n\r\nclass Auth extends Component {\r\n    state = {\r\n        formElement: {\r\n            username: {\r\n                value: '',\r\n                validation: {\r\n                    required: true,\r\n                    minLength: 1\r\n                },\r\n                valid: false,\r\n                touched: false\r\n            },\r\n            password: {\r\n                value: '',\r\n                validation: {\r\n                    required: true,\r\n                    minLength: 1\r\n                },\r\n                valid: false,\r\n                touched: false\r\n            }\r\n        },\r\n        signup: {\r\n            username: {\r\n                value: '',\r\n                validation: {\r\n                    required: true,\r\n                    minLength: 6\r\n                },\r\n                valid: false,\r\n                touched: false\r\n            },\r\n            email: {\r\n                value: '',\r\n                validation: {\r\n                    required: true,\r\n                    minLength: 6\r\n                },\r\n                valid: false,\r\n                touched: false\r\n            },\r\n            password: {\r\n                value: '',\r\n                validation: {\r\n                    required: true,\r\n                    minLength: 6\r\n                },\r\n                valid: false,\r\n                touched: false\r\n            }\r\n        },\r\n        formIsValid: false,\r\n        formMode: 'login',\r\n        confirmPass:{\r\n            value: '',\r\n            valid: false,\r\n            touched: false,\r\n            err: null\r\n        },\r\n        err: null,\r\n        start: false,\r\n        signupIsValid: false\r\n    }\r\n\r\n    inputChangedHandler = (event, inputType) => {\r\n        let value = event.target.value;\r\n        let updateFormType = updateObject(this.state.formElement[inputType], {\r\n            value,\r\n            valid: checkValidity(value, this.state.formElement[inputType].validation),\r\n            touched: true\r\n        });\r\n        \r\n        let formIsValid = true;\r\n        let updateFormElement = updateObject(this.state.formElement, {[inputType]: updateFormType})\r\n\r\n        for (let inputType in updateFormElement) {\r\n            formIsValid = updateFormElement[inputType].valid && formIsValid;\r\n        }\r\n\r\n        this.setState({formElement: updateFormElement, formIsValid})\r\n    }\r\n\r\n    changeTabHandler = (mode) => {\r\n        this.setState({formMode: mode, err: null})\r\n    }\r\n\r\n    contentChangedHandler = (event, inputType) => {\r\n        let updateFormType = updateObject(this.state.signup[inputType], {\r\n            value: event.target.value,\r\n            valid: checkValidity(event.target.value, this.state.signup[inputType].validation),\r\n            touched: true\r\n        });\r\n        \r\n        let signupIsValid = true;\r\n        let updateFormElement = updateObject(this.state.signup, {[inputType]: updateFormType})\r\n\r\n        for (let inputType in updateFormElement) {\r\n            signupIsValid = updateFormElement[inputType].valid && signupIsValid;\r\n        }\r\n\r\n        this.setState({signup: updateFormElement, signupIsValid, \r\n            confirmPass: this.state.confirmPass.touched && inputType === 'password' && this.state.confirmPass.value !== event.target.value ? updateObject(this.state.confirmPass, {valid: false, err: 'Password does not match'})\r\n            : !this.state.confirmPass.touched ?this.state.confirmPass :  updateObject(this.state.confirmPass, {valid: true, err: null})})\r\n    }\r\n\r\n    confirmPasswordHandler = (event) => {\r\n        let value = event.target.value;\r\n        if (this.state.signup.password.value && this.state.signup.password.valid) {\r\n            if (this.state.signup.password.value === event.target.value) {\r\n                this.setState({confirmPass: updateObject(this.state.confirmPass, {value,  valid: true, err: null})});\r\n                return \r\n            }\r\n            this.setState({confirmPass: updateObject(this.state.confirmPass, {value,valid: false,  touched: true, err: 'Password does not match'})})\r\n            return\r\n        }\r\n        this.setState({confirmPass: updateObject(this.state.confirmPass, {value, valid: false, touched: true,err: 'Please, enter valid password'})})\r\n    }\r\n\r\n    signupHandler = () => {\r\n        if (this.state.signupIsValid && this.state.confirmPass.valid) {\r\n            this.setState({start: true, err: null})\r\n             let cnt = {\r\n                 username: this.state.signup.username.value,\r\n                 password: this.state.signup.password.value,\r\n                 email: this.state.signup.email.value,\r\n             }\r\n             axios.post('https://www.slodge24.com/signup', cnt).then((res) => {\r\n                this.props.userAuth()\r\n            }).catch(err => {\r\n                let error = null\r\n                if (err.response) {\r\n                    if(err.response.data && err.response.data.keyValue) {\r\n                        for (let key in err.response.data.keyValue) {\r\n                            if (key === 'email') {\r\n                                error = `${key}  already taken`;\r\n                            } else if (key === 'username') {\r\n                                error = `${key} already taken`;\r\n                            } else {\r\n                                error = err.message\r\n                            }\r\n                        }\r\n                    } else {\r\n                        error = typeof err.response.data !== 'object' ? err.response.data : 'Connection Error';\r\n                    }\r\n                } else {\r\n                  error = err.message\r\n                }\r\n                this.setState({err: error, start: false})\r\n            })\r\n         return\r\n        }    \r\n    }\r\n\r\n    loginHandler = () => {\r\n        if (this.state.formIsValid) {\r\n            this.setState({start: true, err: null})\r\n             let cnt = {\r\n                username: this.state.formElement.username.value,\r\n                password: this.state.formElement.password.value\r\n             }\r\n             axios.post('https://www.slodge24.com/login', cnt).then((res) => {\r\n                this.props.userAuth()\r\n            }).catch(err => {\r\n                let error = err.response ? err.response.data : err.message;\r\n                this.setState({err: error, start: false})\r\n            })\r\n         return\r\n        }   \r\n    }\r\n\r\n    render() {\r\n        let cnt = (\r\n            <>\r\n                <div className=\"aroundme__form--cnt\">\r\n                    <div className=\"aroundme__form--cnt--wrapper\">\r\n                        <label className=\"aroundme__form--cnt__title\">Email Address</label>\r\n                        <div className=\"aroundme__form--cnt__det\">\r\n                            <input \r\n                                type=\"email\" \r\n                                name=\"\"\r\n                                required\r\n                                minLength=\"1\"\r\n                                value={this.state.formElement.username.value}\r\n                                className=\"aroundme__form--cnt__det--input\"\r\n                                onChange={(event) => this.inputChangedHandler(event, 'username')} />\r\n                        </div>\r\n                        { !this.state.formElement.username.valid && this.state.formElement.username.touched ?\r\n                            <div className=\"aroundme__form--err\">Email must not be empty</div>\r\n                            : null\r\n                        }\r\n                    </div>\r\n                </div>\r\n                <div className=\"aroundme__form--cnt\">\r\n                    <div className=\"aroundme__form--cnt--wrapper\">\r\n                        <label className=\"aroundme__form--cnt__title\">Password</label>\r\n                        <div className=\"aroundme__form--cnt__det\">\r\n                            <input \r\n                                type=\"password\" \r\n                                name=\"\"\r\n                                required\r\n                                value={this.state.formElement.password.value}\r\n                                className=\"aroundme__form--cnt__det--input\"\r\n                                onChange={(event) => this.inputChangedHandler(event, 'password')} />\r\n                        </div>\r\n                        { !this.state.formElement.password.valid && this.state.formElement.password.touched  ?\r\n                            <div className=\"aroundme__form--err\">Password must not be empty</div>\r\n                            : null\r\n                        }\r\n                    </div>\r\n                </div>\r\n                <div className=\"aroundme__form--footer\">\r\n                    <button \r\n                        type=\"button\" \r\n                        className=\"aroundme__form--footer__btn\"\r\n                        onClick={this.loginHandler}\r\n                        disabled={this.state.formIsValid && !this.state.start ? false : true}>\r\n                            Continue \r\n                    </button>\r\n                </div>\r\n            </>\r\n        )\r\n\r\n        if (this.state.formMode === 'signup') {\r\n            cnt = (\r\n                <>\r\n                <div className=\"aroundme__form--cnt\">\r\n                    <div className=\"aroundme__form--cnt--wrapper\">\r\n                        <label className=\"aroundme__form--cnt__title\">Username</label>\r\n                        <div className=\"aroundme__form--cnt__det\">\r\n                            <input \r\n                                type=\"text\" \r\n                                name=\"\"\r\n                                required\r\n                                minLength=\"6\"\r\n                                value={this.state.signup.username.value}\r\n                                className=\"aroundme__form--cnt__det--input\"\r\n                                onChange={(event) => this.contentChangedHandler(event, 'username')} />\r\n                        </div>\r\n                        { !this.state.signup.username.valid && this.state.signup.username.touched ?\r\n                            <div className=\"aroundme__form--err\">Username must be longer than 5 characters</div>\r\n                            : null\r\n                        }\r\n                    </div>\r\n                </div>\r\n                <div className=\"aroundme__form--cnt\">\r\n                    <div className=\"aroundme__form--cnt--wrapper\">\r\n                        <label className=\"aroundme__form--cnt__title\">Email Address</label>\r\n                        <div className=\"aroundme__form--cnt__det\">\r\n                            <input \r\n                                type=\"email\" \r\n                                required\r\n                                minLength=\"6\"\r\n                                value={this.state.signup.email.value}\r\n                                className=\"aroundme__form--cnt__det--input\"\r\n                                onChange={(event) => this.contentChangedHandler(event, 'email')} />\r\n                        </div>\r\n                        { !this.state.signup.email.valid && this.state.signup.email.touched ?\r\n                            <div className=\"aroundme__form--err\">Email must be longer than 5 characters</div>\r\n                            : null\r\n                        }\r\n                    </div>\r\n                </div>\r\n                <div className=\"aroundme__form--cnt\">\r\n                    <div className=\"aroundme__form--cnt--wrapper\">\r\n                        <label className=\"aroundme__form--cnt__title\">Password</label>\r\n                        <div className=\"aroundme__form--cnt__det\">\r\n                            <input \r\n                                type=\"password\" \r\n                                minLength=\"6\"\r\n                                value={this.state.signup.password.value}\r\n                                required\r\n                                className=\"aroundme__form--cnt__det--input\"\r\n                                onChange={(event) => this.contentChangedHandler(event, 'password')} />\r\n                        </div>\r\n                        { !this.state.signup.password.valid && this.state.signup.password.touched ?\r\n                            <div className=\"aroundme__form--err\">Password must be longer than 5 characters</div>\r\n                            : null\r\n                        }\r\n                    </div>\r\n                </div>\r\n                <div className=\"aroundme__form--cnt\">\r\n                    <div className=\"aroundme__form--cnt--wrapper\">\r\n                        <label className=\"aroundme__form--cnt__title\">Confirm Password</label>\r\n                        <div className=\"aroundme__form--cnt__det\">\r\n                            <input \r\n                                type=\"password\" \r\n                                className=\"aroundme__form--cnt__det--input\"\r\n                                required\r\n                                value={this.state.confirmPass.value}\r\n                                onChange={(event) => this.confirmPasswordHandler(event)} />\r\n                        </div>\r\n                        { this.state.confirmPass.err ?\r\n                                <div className=\"aroundme__form--err\">{this.state.confirmPass.err}</div>\r\n                                : null\r\n                            }\r\n                    </div>\r\n                </div>\r\n                <div className=\"aroundme__form--footer\">\r\n                    <button \r\n                        type=\"submit\" \r\n                        className=\"aroundme__form--footer__btn\"\r\n                        onClick={this.signupHandler}\r\n                        disabled={this.state.signupIsValid && this.state.confirmPass.valid && !this.state.start ? false : true}>\r\n                            Continue \r\n                    </button>\r\n                </div>\r\n            </>\r\n            )\r\n        }\r\n\r\n        return (\r\n            <div className=\"aroundme__form--auth\">\r\n                <ul className=\"aroundme__form--auth__tab\">\r\n                    <li \r\n                        className={this.state.formMode === 'login' ? 'aroundme__form--auth__tab--active' : null}\r\n                        onClick={this.changeTabHandler.bind(this, 'login')}>Login</li>\r\n                    <li className={this.state.formMode === 'signup' ? 'aroundme__form--auth__tab--active' : null}\r\n                        onClick={this.changeTabHandler.bind(this, 'signup')}>Sign Up</li>\r\n                </ul>\r\n                { this.state.err ?\r\n                    <div className=\"aroundme__form--err\">{this.state.err.toString()}</div>\r\n                    : null\r\n                }\r\n                { cnt }\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\n\r\nexport default Auth;\r\n","import React, { Component } from 'react';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport Avatar from 'react-avatar';\r\nimport { withRouter} from 'react-router-dom'\r\n\r\nimport './Chat.css';\r\nimport './Main.css';\r\nimport { socket } from './shared/utility';\r\nimport Loader from './Loader/Loader';\r\nimport axios from './axios';\r\nimport ChatBox from './ChatBox/ChatBox';\r\nimport Footer from './Footer/Footer';\r\nimport Snapshot from './Footer/Snapshot/Snapshot'\r\nimport VideoRec from './Footer/VideoRec/VideoRec'\r\nimport Auth from './Auth/Auth';\r\n\r\nclass Chat extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        let expiresIn =  document.cookie.replace(/(?:(?:^|.*;\\s*)expiresIn\\s*\\=\\s*([^;]*).*$)|^.*$/, \"$1\");\r\n        let auth = false;\r\n        if (expiresIn && (new Date(new Date(expiresIn*1000).getTime()) >= new Date().getTime())) {\r\n            auth = true;\r\n        } else {\r\n            auth= false\r\n        }\r\n        this.state = {\r\n            userDet: null,\r\n            id: this.props.match.params.id,\r\n            userID: document.cookie.replace(/(?:(?:^|.*;\\s*)id\\s*\\=\\s*([^;]*).*$)|^.*$/, \"$1\"),\r\n            showBackdrop: false,\r\n            closeContent: false,\r\n            createChat: null,\r\n            addChat: null,\r\n            uploadMedia: null,\r\n            chatSelected: null,\r\n            editChat: null,\r\n            defaultTemp: false,\r\n            snapshot: false,\r\n            removeSelected: false,\r\n            removeChat: null,\r\n            disable: false,\r\n            connect: false,\r\n            auth,\r\n            err: null\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        let these = this;\r\n        axios.post('/aroundme', {id: this.state.id}, {headers: {\r\n            'data-categ': 'userDet'}}).then(res => {\r\n                this.setState({userDet: res.data})\r\n        }).catch(err => {\r\n            this.setState({err})\r\n        })\r\n        socket.on('connect', function(msg) {\r\n            socket.emit('join',{room: these.state.id, host: these.state.userID, public: true}, function(err) {\r\n                these.setState({err})\r\n            });\r\n            these.setState({connect: true})\r\n        });\r\n        socket.on('disconnect', function(){\r\n            these.setState({connect: false})\r\n        })\r\n        if (!socket.disconnected) {\r\n            these.setState({connect: true})\r\n        }\r\n    }\r\n\r\n    userAuthHandler = () => {\r\n        this.setState({auth: true})\r\n    }\r\n\r\n    closeAroundmeHandler = () => {\r\n        this.props.history.goBack()\r\n    }\r\n\r\n    showBackdropHandler = (isShow) => {\r\n        this.setState({showBackdrop: isShow, closeContent: false})\r\n    }\r\n\r\n    closeBackdropHandler = () => {\r\n        this.setState({closeContent: true, showBackdrop: false})\r\n    }\r\n\r\n    createChatStartHandler = (cnt) => {\r\n        this.setState({createChat: cnt})\r\n    }\r\n\r\n    addNewChatHandler = (cnt) => {\r\n        this.setState({addChat: cnt, editChat: null})\r\n    }\r\n\r\n    uploadMediaStartHandler = (cnt) => {\r\n        this.setState({uploadMedia: cnt, defaultTemp: false})\r\n    }\r\n\r\n    mediaUploadedHandler = () => {\r\n        this.setState({defaultTemp: true, editChat: null})\r\n    }\r\n\r\n    snapshotHandler = () =>  {\r\n        this.setState({snapshot: true})\r\n    }\r\n\r\n    videoRecHandler = () => {\r\n        this.setState({videoRec: true})\r\n    }\r\n\r\n    holdChatHandler = (cnt) => {\r\n        this.setState({chatSelected: cnt, removeSelected: false, editChat: null})\r\n    }\r\n\r\n    editChatHandler = () => {\r\n        this.setState({editChat: this.state.chatSelected[0], chatSelected: []});\r\n    }\r\n\r\n    deleteChatHandler= () => {\r\n        let these = this;\r\n        this.setState({disable: true})\r\n        axios.post('/aroundme', \r\n            {cnt: this.state.chatSelected, id: this.state.id}, {headers: {\r\n                'data-categ': 'pvtDeleteChat'}}).then(cnt=> {\r\n            socket.emit('pvtDeleteChat', cnt.data, function(err) {\r\n                these.setState({err})\r\n            })\r\n            these.setState({removeChat: cnt.data, chatSelected: null, editChat: null, disable: false})\r\n        }).catch(err =>{\r\n            these.setState({err})\r\n        })\r\n    }\r\n\r\n    closeSelectedHandler = () => {\r\n        this.setState({removeSelected: true, chatSelected: null})\r\n    }\r\n\r\n    closeMediaHandler = () => {\r\n        this.setState({snapshot: false, videoRec: false, closeContent: true, showBackdrop: false})\r\n    }\r\n\r\n    render() {\r\n        let cnt = (\r\n            <Loader />\r\n        )\r\n        let chatOpt = null;\r\n        let deleteClass = ['site-main__chat--opt__del'];\r\n\r\n\r\n        if (this.state.disable) {\r\n            deleteClass.push('site-main__chat--opt__del--disable')\r\n        }\r\n\r\n        if (this.state.chatSelected && this.state.chatSelected.length > 0) {\r\n            chatOpt = (\r\n                <div className=\"site-main__chat--opt__wrapper\">\r\n                    <div \r\n                        className=\"site-main__chat--opt__close\"\r\n                        onClick={this.closeSelectedHandler}>\r\n                        <FontAwesomeIcon  icon={['fas', 'times']} className=\"icon icon__site-main--chat__close\"/>\r\n                    </div>\r\n                    <ul className=\"site-main__chat--opt\">\r\n                        <li \r\n                            onClick={!this.state.disable ? this.deleteChatHandler: null}\r\n                            className={deleteClass.join(' ')}><FontAwesomeIcon  icon={['far', 'trash-alt']} className=\"icon icon__site-main--chat__header--opt\"/></li>\r\n                        {this.state.chatSelected.length < 2 && this.state.chatSelected[0].edit ?\r\n                            <li \r\n                                onClick={!this.state.disable && this.state.chatSelected[0].edit ? this.editChatHandler : null}\r\n                                className=\"site-main__chat--opt__edit\"><FontAwesomeIcon  icon={['far', 'edit']} className=\"icon icon__site-main--chat__header--opt\"/></li> : null}\r\n                    </ul>\r\n                    <div className=\"site-main__chat--opt__total\">\r\n                        { this.state.chatSelected.length }\r\n                    </div>\r\n                </div>\r\n            )\r\n        }\r\n\r\n        if (this.state.userDet) {\r\n            let userImage = <Avatar  name={this.state.userDet.username} size='40' round />\r\n\r\n            let status = <div className=\"site-main__chat--header__status\"></div>\r\n            if (this.state.userDet.image && this.state.userDet.image.length > 0) {\r\n                userImage = <img src={this.state.userDet.image} alt=\"group\" />\r\n            }\r\n            let userStatusIcn = null;\r\n\r\n            if (this.state.userDet.status) {\r\n                userStatusIcn = (\r\n                    <div className=\"site-main__chat--header__img--status\">\r\n                    </div>\r\n                )\r\n            }\r\n\r\n            if (this.state.connect) {\r\n                status = (\r\n                    <div className=\"site-main__chat--header__status site-main__chat--header__status-on\"></div>\r\n                )\r\n            }\r\n\r\n            let header = (\r\n                <>\r\n                <div className=\"site-main__chat--header__img\">\r\n                        { userImage }\r\n                        { userStatusIcn }\r\n                    </div>\r\n                    <h3 className=\"site-main__chat--header__title\">\r\n                        { this.state.userDet.username }\r\n                    </h3>\r\n                    <div className=\"site-main__chat--header__det\">\r\n                        <div>\r\n                            <FontAwesomeIcon  icon={['fas', 'map-marker-alt']} className=\"icon icon__site-main--chat__header--map\"/>\r\n                        </div>\r\n                        {this.state.userDet.location}\r\n                    </div> \r\n                </>\r\n            )\r\n\r\n            cnt = (\r\n                <div className=\"site-main__chat\">\r\n                    { this.state.showBackdrop ? <div \r\n                        className=\"site-main__chat--overlay\"\r\n                        onClick={this.closeBackdropHandler}></div> : null}\r\n                    <div className=\"site-main__chat--main\">\r\n                        <div className=\"site-main__chat--main__wrapper\">\r\n                            {this.state.err ? <div className=\"site-main__chat--err\">{this.state.err.message ? this.state.err.message : this.state.err.toString()}</div> : null }\r\n                            <div className=\"site-main__chat--header\">\r\n                                <div className=\"site-main__chat--header__wrapper\">\r\n                                    { header }  \r\n                                </div>\r\n                                { status }\r\n                            </div>\r\n                            { chatOpt }\r\n                             <ChatBox \r\n                                createChat={this.state.createChat}\r\n                                addChat={this.state.addChat}\r\n                                uploadMedia={this.state.uploadMedia}\r\n                                defaultTemp={this.state.defaultTemp}\r\n                                holdChat={this.holdChatHandler}\r\n                                removeSelected={this.state.removeSelected}\r\n                                editChat={this.state.editChat}\r\n                                removeChat={this.state.removeChat}/>\r\n                            <Footer \r\n                                showBackdrop={this.showBackdropHandler}\r\n                                closeContent={this.state.closeContent}\r\n                                createChatStart={this.createChatStartHandler}\r\n                                addNewChat={this.addNewChatHandler}\r\n                                connect={this.state.connect}\r\n                                uploadMediaStart={this.uploadMediaStartHandler}\r\n                                mediaUploaded={this.mediaUploadedHandler}\r\n                                snapshot={this.snapshotHandler}\r\n                                videoRec={this.videoRecHandler}\r\n                                editChat={this.state.editChat}/>\r\n                            { this.state.snapshot ? <Snapshot \r\n                                closeMedia={this.closeMediaHandler}\r\n                                uploadMediaStart={this.uploadMediaStartHandler}\r\n                                mediaUploaded={this.mediaUploadedHandler}\r\n                                editChat={this.state.editChat}/> : null}\r\n                            { this.state.videoRec ? <VideoRec \r\n                                closeMedia={this.closeMediaHandler}\r\n                                uploadMediaStart={this.uploadMediaStartHandler}\r\n                                mediaUploaded={this.mediaUploadedHandler}\r\n                                editChat={this.state.editChat}/> : null}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )\r\n        }\r\n\r\n        if (!this.state.auth) {\r\n            cnt = (\r\n                <Auth \r\n                    userAuth={this.userAuthHandler}/>\r\n            )\r\n        }\r\n\r\n        return (\r\n             <div\r\n                className=\"reuse-mainchat\">\r\n                <div className=\"reuse-mainchat__main-wrapper\">\r\n                    <div className=\"reuse-mainchat__backdrop\"  onClick={this.closeAroundmeHandler}>\r\n                    </div>  \r\n                    <div className=\"reuse-mainchat__wrapper\">\r\n                        { cnt }\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default withRouter(Chat);"],"sourceRoot":""}