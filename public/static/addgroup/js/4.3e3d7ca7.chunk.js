(this.webpackJsonpaddgroup=this.webpackJsonpaddgroup||[]).push([[4],{812:function(e,t,a){"use strict";a.r(t);var r=a(154),n=a(65),i=a(26),s=a(27),o=a(29),l=a(28),c=a(312),m=a(30),d=a(0),u=a.n(d),p=a(35),f=a(6),_=a(803),v=a.n(_),h=a(808),g=a.n(h),b=(a(810),a(7)),E=a(5),k=u.a.createRef(null),C=function(e){function t(){var e,a;Object(i.a)(this,t);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(a=Object(o.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(n)))).state={url:null},a.cropHandler=function(){var e=k.current.cropper.getCroppedCanvas({imageSmoothingQuality:"high"}).toDataURL(),t=Object(b.c)(e),r=window.URL.createObjectURL(t);a.setState({url:r}),a.props.onImageCapture({imageUrl:a.props.url,imageCapture:t,id:v()()})},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=null;return this.state.url&&(e=u.a.createElement("img",{src:this.state.url,alt:"",className:"reuse-form__itm--det__view-select--media__wrapper--preview "})),u.a.createElement("div",{className:"reuse-form__itm--det__view-select--media"},u.a.createElement("div",{className:"reuse-form__itm--det__view-select--media__wrapper"},e,u.a.createElement(g.a,{ref:k,src:this.props.url,className:"reuse-form__itm--det__view-select--media__wrapper--cnt",guides:!1,cropBoxResizable:!1,minCropBoxHeight:100,minCropBoxWidth:100,dragMode:"none",ready:function(){k.current.cropper.setCropBoxData({width:100,height:100})},crop:this.cropHandler})))}}]),t}(d.Component),O=Object(p.b)(null,(function(e){return{onImageCapture:function(t){return e(E.P(t))}}}))(C),j=u.a.createRef(null),M=function(e){function t(){var e,a;Object(i.a)(this,t);for(var s=arguments.length,m=new Array(s),d=0;d<s;d++)m[d]=arguments[d];return(a=Object(o.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(m)))).state={inputValue:"",media:null,removeMediaItemIndex:null,snapshotErr:null,mediaUrl:a.props.media&&a.props.media.image&&a.props.media.image.length>0?a.props.media.image[0].imageUrl:null,err:null,startCapture:!1,start:!1},a.linkVerifyHandler=function(e){var t=e.target.value;a.setState({inputValue:t,snapshotErr:null}),a.props.onCheckLink(t),a.state.startCapture&&(j.current.srcObject.getVideoTracks().forEach((function(e){e.stop()})),a.setState({startCapture:!1}))},a.addMediaHandler=function(){a.props.linkValid&&a.props.linkValid.media&&(a.setState({media:{file:a.props.linkValid.media.file,url:a.props.linkValid.media.url,id:v()()},inputValue:""}),a.props.onResetLink())},a.openCameraHandler=function(){"mediaDevices"in navigator||(navigator.mediaDevices={}),"getUserMedia"in navigator.mediaDevices||(navigator.mediaDevices.getUserMedia=function(e){var t=navigator.webkitGetUserMedia||navigator.mozGetUserMedia;return t?new Promise((function(a,r){t.call(navigator,e,a,r)})):Promise.reject(new Error("getUserMedia is not implemented!"))});var e=Object(c.a)(a);navigator.mediaDevices.getUserMedia({video:!0}).then((function(t){j.current.srcObject=t,e.setState({startCapture:!0,mediaUrl:null})})).catch((function(t){e.setState({err:t,startCapture:!1})}))},a.captureImageHandler=function(){Object(b.e)(j.current).then((function(e){j.current.srcObject.getVideoTracks().forEach((function(e){e.stop()}));var t=Object(b.c)(e),r=window.URL.createObjectURL(t);a.setState({mediaUrl:r,startCapture:!1})})).catch((function(e){a.setState({err:e})}))},a.selectMediaHandler=function(e){if(a.setState({snapshotErr:null}),e.stopPropagation(),e.preventDefault(),e.target.files){var t=e.target.files;a.handleFiles(t)}},a.dragEnterMediaHandler=function(e){e.stopPropagation(),e.preventDefault()},a.dragOverMediaHandler=function(e){e.stopPropagation(),e.preventDefault()},a.dropMediaHandler=function(e){if(e.stopPropagation(),e.preventDefault(),e.dataTransfer){var t=e.dataTransfer.files;a.handleFiles(t)}},a.removeMediaItemEnableHandler=function(e){a.setState({removeMediaItemIndex:e})},a.removeMediaItemDisableHandler=function(){a.setState({removeMediaItemIndex:null})},a.removeMediaItemHandler=function(e){var t=Object(n.a)(a.state.media).filter((function(t){return t.id!==e}));a.setState({media:t}),a.props.media.image&&a.props.media.image.length>0&&a.props.onRemoveMedia(Object(b.g)(a.props.media,{image:t}))},a.handleFiles=function(e){a.state.startCapture&&(j.current.srcObject.getVideoTracks().forEach((function(e){e.stop()})),a.setState({startCapture:!1}));var t=e[0];if(t.type.startsWith("image/")){var r=window.URL.createObjectURL(t);a.setState({mediaUrl:r})}},a.submitMediaHandler=function(){var e=Object(r.a)({},a.props.media);a.props.onSubmitMedia(Object(b.g)(e,{image:[Object(r.a)({},a.props.imageCapture)]})),j.current&&j.current.srcObject&&j.current.srcObject.getVideoTracks().forEach((function(e){e.stop()}))},a.closeMediaBoxHandler=function(){a.props.onhideMediaBox(),j.current&&j.current.srcObject&&j.current.srcObject.getVideoTracks().forEach((function(e){e.stop()}))},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=null,t=null,a=["reuse-form__itm--det__view-select--media__wrapper--video"],r=null;return(this.props.linkValid||this.state.err)&&(e=this.props.linkValid&&this.props.linkValid.err?u.a.createElement("div",{className:"reuse-form__err"},this.props.linkValid.err.message):this.state.err?u.a.createElement("div",{className:"reuse-form__err"},this.state.err.message):null),this.state.mediaUrl&&(t=u.a.createElement("div",{className:"reuse-form__itm--det__view-select"},u.a.createElement(O,{url:this.state.mediaUrl}))),!this.state.err&&this.state.startCapture&&(a.push("reuse-form__itm--det__view-select--media__wrapper--video__show"),r=u.a.createElement("div",{className:"reuse-form__itm--footer reuse-form__btn"},u.a.createElement("button",{type:"button",className:"reuse-form__btn--add",onClick:this.captureImageHandler},"Capture"))),u.a.createElement("div",{className:"reuse-form__itm"},u.a.createElement("h4",{className:"reuse-form__itm--title"},u.a.createElement(f.a,{icon:["fas","images"],className:"icon icon__reuse-form--itm--title"}),"Add Image"),u.a.createElement("div",{className:"reuse-form__itm--det"},u.a.createElement("div",{className:"reuse-form__cnt"},u.a.createElement("label",{className:"reuse-form__cnt--title"},"Image Link"),u.a.createElement("div",{className:"reuse-form__cnt--det"},u.a.createElement("input",{type:"url",name:"",className:"reuse-form__cnt--det__input reuse-form__cnt--det__input--lg",placeholder:"paste link",onChange:this.linkVerifyHandler,value:this.state.inputValue,spellCheck:!1,pattern:"https://.*"}),u.a.createElement("button",{type:"button",onClick:this.addMediaHandler,disabled:!this.props.linkValid||null!==this.props.linkValid.err,className:"reuse-form__cnt--det__btn"},u.a.createElement(f.a,{icon:["fas","plus"]})))),u.a.createElement("div",{className:"reuse-form__itm--det__view"},e),u.a.createElement("div",{className:"reuse-form__itm--det__alt"},"OR"),u.a.createElement("div",{className:"reuse-form__itm--det__camera",onClick:this.openCameraHandler},u.a.createElement(f.a,{icon:["fas","camera"],className:"icon icon__reuse-form--itm--camera"}),"Take Snapshot"),u.a.createElement("div",{className:"reuse-form__cnt"},u.a.createElement("div",{className:"reuse-form__cnt--det"},u.a.createElement("div",{className:"reuse-form__cnt--det__fil"},u.a.createElement("div",null,"Upload Image"),u.a.createElement("input",{type:"file",name:"",className:"reuse-form__cnt--det__fil--input",onChange:this.selectMediaHandler,onDragEnter:this.dragEnterMediaHandler,onDragOver:this.dragOverMediaHandler,onDrop:this.dropMediaHandler,accept:"image/*"})))),u.a.createElement("video",{ref:j,autoPlay:!0,className:a.join(" ")},u.a.createElement("p",null,"our browser doesn't support embedded videos")),r,this.state.snapshotErr?u.a.createElement("div",{className:"reuse-form__err"},"Some features are not available in your browser, ",this.state.snapshotErr):null,t),u.a.createElement("div",{className:"reuse-form__itm--footer reuse-form__btn"},u.a.createElement("button",{type:"button",className:"reuse-form__btn--close",onClick:this.closeMediaBoxHandler},"Exit"),u.a.createElement("button",{type:"button",className:"reuse-form__btn--add",onClick:this.submitMediaHandler,disabled:!this.props.imageCapture},"Add")))}}]),t}(d.Component);t.default=Object(p.b)((function(e){return{linkValid:e.form.linValid,media:e.form.media,imageCapture:e.form.imageCapture}}),(function(e){return{onCheckLink:function(t){return e(E.i(t,"image"))},onResetLink:function(){return e(E.db())},onRemoveMedia:function(t){return e(E.bb(t))},onSubmitMedia:function(t){return e(E.pb(t))},onhideMediaBox:function(){return e(E.Z())}}}))(M)}}]);
//# sourceMappingURL=4.3e3d7ca7.chunk.js.map