(this.webpackJsonpindex=this.webpackJsonpindex||[]).push([[7],{634:function(e,t,a){},654:function(e,t,a){},661:function(e,t,a){"use strict";a.r(t);var n=a(63),i=a(20),r=a(21),o=a(23),s=a(22),c=a(24),l=a(0),d=a.n(l),p=a(29),m=a(82),u=(a(638),a(635)),h=a.n(u),v=a(89),_=a(636),f=a.n(_),g=a(637),E=a.n(g),y=a(214),P=(a(654),a(634),a(3)),w=a(62),C=a(9),b=a(97),I=function(e){var t=E()(P.c),a=null,i=["reuse-pt__footer--details"],r=["reuse-pt__footer--details__options"],o=null,s=null,c=e.pt.snapshot.length+e.pt.image.length,l=d.a.createElement("li",{className:"reuse-pt__footer--details__options--status",onClick:e.changePt},d.a.createElement(C.a,{icon:["far","eye-slash"],className:"icon icon__reuse-pt--options__dft"}),"Draft"),p=d.a.createElement(C.a,{icon:["far","heart"],className:"icon icon__reuse-pt--footer__heart"}),m=d.a.createElement("img",{src:e.pt.userImage,alt:""});"draft"===e.pt.mode&&(l=d.a.createElement("li",{className:"reuse-pt__footer--details__options--status",onClick:e.changePtPublish},d.a.createElement(C.a,{icon:["far","eye"],className:"icon icon__reuse-pt--options__dft"}),"Publish")),e.pt.username&&!e.pt.userImage&&(m=d.a.createElement(y.a,{name:e.pt.username,size:"36",round:!0}));var u=!0,h=!1,_=void 0;try{for(var g,I=e.changedFav[Symbol.iterator]();!(u=(g=I.next()).done);u=!0){var S=g.value;e.pt._id===S.id&&(o=S.favAdd,s=S.liked)}}catch(U){h=!0,_=U}finally{try{u||null==I.return||I.return()}finally{if(h)throw _}}var N=null,A=[].concat(Object(n.a)(e.pt.snapshot),Object(n.a)(e.pt.image)),O=null,F=["reuse-pt__media--wrapper"];if(A.length>0){var M=!1,k=!0,H=!1,x=void 0;try{for(var D,j=e.mediaItms[Symbol.iterator]();!(k=(D=j.next()).done);k=!0){var T=D.value;T.id===e.pt._id&&(M=!0,e.animateItm.id===e.pt._id&&("next"!==e.animateItm.direction||e.removePrevAnim||F.push("reuse-pt__media--wrapper__anim"),"prev"!==e.animateItm.direction||e.removePrevAnim||F.push("reuse-pt__media--wrapper__anim-rev")),e.removePrevMedia&&e.removePrevMedia.id===e.pt._id&&V(e.removePrevMedia),L(T.position))}}catch(U){H=!0,x=U}finally{try{k||null==j.return||j.return()}finally{if(H)throw x}}M||(e.removePrevMedia&&e.removePrevMedia.id===e.pt._id&&V(e.removePrevMedia),L(0))}function V(e){"next"===e.type?F.push("reuse-pt__media--wrapper__anim-exit"):F.push("reuse-pt__media--wrapper__anim-exit-rev")}function L(t){var a=A[t],n=a.videoCnt?Object(v.a)({url:"".concat(window.location.protocol+"//"+window.location.host,"/media/image/").concat(a.id)},a,{mediaType:"snapshot"}):Object(v.a)({url:"".concat(window.location.protocol+"//"+window.location.host,"/media/image/").concat(a.id)},a,{mediaType:"image"});n&&"snapshot"===n.mediaType&&(O=e.video&&e.video.id!==n.id?d.a.createElement("div",{className:e.playerIcnId&&e.playerIcnId===e.pt._id?"reuse-pt__media--wrapper__icn reuse-pt__media--wrapper__icn-move":"reuse-pt__media--wrapper__icn",onClick:e.playVideo.bind(this,n)},d.a.createElement(C.a,{icon:["fas","play-circle"],className:"icon icon__reuse-pt--media__play"})):null),N=d.a.createElement("div",{className:"reuse-pt__media"},d.a.createElement("div",{className:e.video&&e.video.id===n.id?"reuse-pt__media--main-wrapper reuse-pt__media--main-wrapper__load":"reuse-pt__media--main-wrapper"},d.a.createElement("div",{onDragStart:function(){return!1},"touch-action":"pan-y",className:e.disableAnim?"reuse-pt__media--wrapper":F.join(" "),onAnimationEnd:e.removeAnim},O,e.video&&e.video.id===n.id&&e.video.url?d.a.createElement("video",{onPointerDown:function(t){return e.slidePlay(e.pt._id,c,t)},onPointerMove:function(t){return e.moveSlidePlay(e.pt._id,c,t)},onPointerUp:function(t){return e.clearSlidePlay(t)},src:e.video.url,controls:!0,autoPlay:!0},d.a.createElement("p",null,"our browser doesn't support embedded videos")):e.video&&e.video.id===n.id?null:d.a.createElement("img",{draggable:"false",onDragStart:function(){return!1},src:n.url,alt:"post",onPointerDown:function(t){return e.slidePlay(e.pt._id,c,t)},onPointerMove:function(t){return e.moveSlidePlay(e.pt._id,c,t)},onPointerUp:function(t){return e.clearSlidePlay(t)}}),e.videoErr&&e.videoErr.id===n.id?d.a.createElement("div",{className:"reuse-pt__video-err",onPointerDown:function(t){return e.slidePlay(e.pt._id,c,t)},onPointerMove:function(t){return e.moveSlidePlay(e.pt._id,c,t)},onPointerUp:function(t){return e.clearSlidePlay(t)}},d.a.createElement("div",{className:"reuse-pt__video-err--icn",onClick:e.playVideo.bind(this,n.id,e.pt.video)},d.a.createElement(C.a,{icon:["fas","redo"],className:"icon icon__reuse-pt--video-err__icn"})),d.a.createElement("h3",null," ",e.videoErr.err.message," ")):null)),A&&A.length>1?d.a.createElement(w.a,null,d.a.createElement("div",{className:"reuse-pt__media--cnt reuse-pt__media--cnt__nxt",onClick:e.nextMedia},d.a.createElement(C.a,{icon:["fas","angle-right"],className:"icon icon__reuse-pt--media__nxt"})),d.a.createElement("div",{className:"reuse-pt__media--cnt reuse-pt__media--cnt__prev",onClick:e.prevMedia},d.a.createElement(C.a,{icon:["fas","angle-left"],className:"icon icon__reuse-pt--media__prev"}))):null)}return e.showPt&&e.showPt.visible&&e.pt._id===e.showPt.id&&(i.push("reuse-pt__footer--details__clk"),r.push("reuse-pt__footer--details__options--visible")),e.pt.userOpt&&(a=d.a.createElement("div",{className:i.join(" "),onClick:e.userOpt},d.a.createElement("div",{className:"reuse-pt__footer--details__mid"}),d.a.createElement("ul",{className:r.join(" ")},d.a.createElement("li",null,d.a.createElement("a",{href:"/edit/post/".concat(e.pt._id)},d.a.createElement(C.a,{icon:["far","edit"],className:"icon icon__reuse-pt--options"}),"Edit")),l,d.a.createElement("li",{onClick:e.deletePt},d.a.createElement(C.a,{icon:["far","trash-alt"],className:"icon icon__reuse-pt--options"}),"Delete")))),e.pt.liked&&null===s&&(p=d.a.createElement(C.a,{icon:["fas","heart"],className:"icon icon__reuse-pt--footer__heart"})),s&&(p=d.a.createElement(C.a,{icon:["fas","heart"],className:"icon icon__reuse-pt--footer__heart"})),d.a.createElement("div",{className:"reuse-pt"},d.a.createElement("div",{className:"reuse-pt__overlaywrapper"},d.a.createElement("div",{className:"reuse-pt__wrapper"},d.a.createElement("ul",{className:"reuse-pt__header"},d.a.createElement("li",null,d.a.createElement("div",{className:"reuse-pt__header--category__img"},m),d.a.createElement("div",{className:"reuse-pt__header--category__det"},d.a.createElement("div",{className:"reuse-pt__header--category__det--name"},d.a.createElement("a",{href:"/user/profile/".concat(e.pt.authorID)}," ",e.pt.username," ")),d.a.createElement("div",{className:"reuse-pt__header--category__det--timePosted"},"@ ",d.a.createElement(f.a,{date:e.pt.postCreated,live:!1,formatter:t})))),d.a.createElement("li",null,d.a.createElement("p",{className:"reuse-pt__header--share__category"},d.a.createElement(C.a,{icon:e.pt.category.length>1?["fas","tags"]:["fas","tag"],className:"icon icon__reuse-pt--header__tag"}),e.pt.category[0]),d.a.createElement("div",{className:"reuse-share"},d.a.createElement("div",{className:"reuse-share__icn",onClick:e.share},d.a.createElement(C.a,{icon:["fas","location-arrow"],className:"icon icon__reuse-share--icn"}))))),N,d.a.createElement("p",{className:"reuse-pt__title"}," ",d.a.createElement("a",{href:"/view/post/"+e.pt._id},e.pt.title)),d.a.createElement("p",{className:"reuse-pt__description"},d.a.createElement("a",{href:"/view/post/"+e.pt._id},String(e.pt.desc).length>149?String(e.pt.desc).substr(0,150)+"...":e.pt.desc)),d.a.createElement("div",{className:"reuse-pt__footer"},d.a.createElement("ul",{className:"reuse-pt__footer--list"},d.a.createElement("li",null,d.a.createElement(C.a,{icon:["far","eye"],className:"icon icon__reuse-pt--footer__eye"}),Object(P.d)(e.pt.view)),d.a.createElement("li",{className:"reuse-pt__footer--list__item-middle"},d.a.createElement(C.a,{icon:["far","comments"],className:"icon icon__reuse-pt--footer__chats"}),Object(P.d)(e.pt.comment)),d.a.createElement("li",null,d.a.createElement("span",{onClick:e.fav},p),Object(P.d)(null!==o?o:e.pt.favorite),e.favChange&&e.favChange.id===e.pt._id?d.a.createElement(b.a,{liked:e.favChange.isLiked}):null)),a))))},S=function(e){return h()(e.content,"postCreated",{reverse:!0}).map((function(t,a){return d.a.createElement(I,{key:a,pt:t,media:e.media,userOpt:e.userOpt.bind(void 0,t._id),showPt:e.showCntOpt,fav:e.fav.bind(void 0,t._id,t.liked,t.favorite,"post"),changedFav:e.changedFav,favChange:e.favChange,share:e.share.bind(void 0,t._id),nextMedia:e.nextMedia.bind(void 0,t._id,t.snapshot.length+t.image.length,"next"),prevMedia:e.prevMedia.bind(void 0,t._id,t.snapshot.length+t.image.length,"prev"),mediaItms:e.mediaItms,removeAnim:e.removeAnim,disableAnim:e.disableAnim,animateItm:e.animateItm,removePrevMedia:e.removePrevMedia,playVideo:e.playVideo,videoErr:e.videoErr,playerIcnId:e.playerIcnId,slidePlay:e.slidePlay,moveSlidePlay:e.moveSlidePlay,clearSlidePlay:e.clearSlidePlay,video:e.video,deletePt:e.changeCnt.bind(void 0,t._id,t.title,"delete","post"),changePt:e.changeCnt.bind(void 0,t._id,t.title,"draft","post")})}))},N=a(53),A=a(119),O=a(6),F=!0,M=function(e){function t(e){var a;Object(i.a)(this,t),(a=Object(o.a)(this,Object(s.a)(t).call(this,e))).onScroll=function(){document.documentElement.scrollHeight-document.documentElement.scrollTop===document.documentElement.clientHeight&&a.props.onFetchCnt(a.props.userID,"post",a.state.fetchLimit,a.props.skipCnt+a.state.fetchLimit,a.props.cntTotal)},a.showUserOptHandler=function(e){if(a.state.cntOpt&&a.state.cntOpt.id===e)a.setState((function(e,t){return{cntOpt:Object(P.f)(e.cntOpt,{visible:!e.cntOpt.visible})}}));else{var t={visible:!0,id:e};a.setState({cntOpt:t})}},a.changeFavoriteHandler=function(e,t,n,i){a.props.onChangeFav(e,t,n,a.props.changedFav,a.props.userID,i)},a.showShareHandler=function(e){a.props.onChangeShareID(e,"post"),a.props.history.push("/index/post/share")},a.changeMediaHandler=function(e,t,n){a.setState({removePrevMedia:{id:e,type:n},removeAnim:!1}),a.animateSlider(e,t,n,900)},a.removeAnimHandler=function(e){a.state.removePrevMedia||a.setState({removeAnim:!0})},a.playVideoHandler=function(e){a.props.onFetchVideo(e.id,"".concat(window.location.protocol+"//"+window.location.host,"/media/video/").concat(e.videoCnt))},a.slidePlayHandler=function(e,t,n){n.target.setPointerCapture(n.pointerId),a.setState({playerIcnId:e})},a.clearSlidePlayhandler=function(e){var t=e.target;t.releasePointerCapture(e.pointerId),t.style.left="0px";var a=document.querySelector(".reuse-pt__media--wrapper__icn-move");a&&(a.style.left="45%")},a.moveSlidePlayHandler=function(e,t,n){var i=n.target;if(i.hasPointerCapture&&i.hasPointerCapture(n.pointerId)){var r=n.clientX-i.parentElement.offsetLeft-i.offsetWidth/2;r<-(i.offsetWidth/2+i.offsetWidth/4)?F&&(F=!1,a.animateSlider(e,t,"next",0)):r>i.offsetWidth/2+i.offsetWidth/4&&F&&(F=!1,a.animateSlider(e,t,"prev",0));var o=document.querySelector(".reuse-pt__media--wrapper__icn-move");if(o){var s=r/i.offsetWidth*100;o.style.left=s+45+"%"}i.style.left=r+"px"}},a.animateSlider=function(e,t,i,r){setTimeout((function(){var r=Object(n.a)(a.state.mediaItms),o=r.filter((function(t){return t.id===e})),s={id:e,position:"next"===i?t>1?1:0:t-1};if(o.length>0){var c=!0,l=!1,d=void 0;try{for(var p,m=o[Symbol.iterator]();!(c=(p=m.next()).done);c=!0){var u=p.value;(s={id:u.id,position:"next"===i?u.position+=1:u.position-=1}).position>t-1&&(s=Object(P.f)(s,{position:0})),s.position<0&&(s=Object(P.f)(s,{position:t-1}));var h=r.filter((function(t){return t.id!==e}));h.push(s),a.setState({mediaItms:h,removeAnim:!1,removePrevMedia:null,animateItm:{id:e,direction:i}})}}catch(v){l=!0,d=v}finally{try{c||null==m.return||m.return()}finally{if(l)throw d}}}else r.push(s),a.setState({mediaItms:r,removeAnim:!1,removePrevMedia:null,animateItm:{id:e,direction:i}})}),r),setTimeout((function(){F=!0}),500)},a.changeCntHandler=function(e,t,n,i){var r=String(t).length>50?String(t).substr(0,50)+"...":t;a.props.onChangeCnt(e,r,n,!1,i)},a.props.onFetchCntReset();var r=0;return r=window.innerHeight>=1200?18:window.innerHeight>=900?12:window.innerHeight>=500?9:6,a.state={cntOpt:null,fetchLimit:r,filterTag:"post",mediaItms:[],animateItm:null,removeAnim:!1,removePrevMedia:null,playerIcnId:null,animationComplete:!0,scrollEnable:!1},a}return Object(c.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.props.onFetchCnt(this.props.userID,this.state.filterTag,this.state.fetchLimit,0,0),this.props.onChangeTag("/post")}},{key:"componentDidUpdate",value:function(){this.props.cnts&&this.props.cnts.length>0&&!this.state.scrollEnable&&(window.addEventListener("scroll",this.onScroll,!1),this.setState({scrollEnable:!0}))}},{key:"componentWillUnmount",value:function(){this.props.onFetchCntReset(),window.removeEventListener("scroll",this.onScroll,!1)}},{key:"render",value:function(){this.props.onFetchShareActive(),this.props.onFetchShareCntActive(),this.props.onFetchNotifyActive(),this.props.onFetchCntActive(),this.props.onFetchQueActive(),this.props.onFetchPtActive(),this.props.onFetchReqActive();var e=d.a.createElement(N.a,null);return this.props.postErr&&(e=null),this.props.cnts&&0===this.props.cnts.length&&(e=d.a.createElement(A.a,{isAuth:null!==this.props.userID,det:"No content found!",icn:"clone",filter:!0})),this.props.cnts&&0===this.props.cnts.length&&(e=d.a.createElement(A.a,{isAuth:null!==this.props.userID,det:"No content found!",icn:"clone",filter:!0})),this.props.cnts&&this.props.cnts.length>0&&(e=d.a.createElement(S,{content:this.props.cnts,media:this.props.media,userOpt:this.showUserOptHandler,showCntOpt:this.state.cntOpt,fav:this.changeFavoriteHandler,changedFav:this.props.changedFav,favChange:this.props.favChange,share:this.showShareHandler,nextMedia:this.changeMediaHandler,prevMedia:this.changeMediaHandler,mediaItms:this.state.mediaItms,removeAnim:this.removeAnimHandler,disableAnim:this.state.removeAnim,animateItm:this.state.animateItm,removePrevMedia:this.state.removePrevMedia,playVideo:this.playVideoHandler,videoErr:this.props.videoErr,video:this.props.postVideo,playerIcnId:this.state.playerIcnId,slidePlay:this.slidePlayHandler,moveSlidePlay:this.moveSlidePlayHandler,clearSlidePlay:this.clearSlidePlayhandler,changeCnt:this.changeCntHandler})),e}}]),t}(l.Component);t.default=Object(m.f)(Object(p.b)((function(e){return{userID:e.auth.userID,cnts:e.cnt.cnts,skipCnt:e.cnt.skipCnt,cntTotal:e.cnt.cntTotal,changedFav:e.cnt.changedFav,favChange:e.cnt.favChange,cntErr:e.cnt.cntErr,postVideo:e.cnt.postVideo,videoErr:e.cnt.videoErr,filterDet:e.cnt.filterDet}}),(function(e){return{onFetchShareActive:function(){return e(O.Z())},onFetchShareCntActive:function(){return e(O.Y())},onFetchQueActive:function(){return e(O.T())},onFetchPtActive:function(){return e(O.R())},onFetchCntActive:function(){return e(O.z())},onFetchNotifyActive:function(){return e(O.P())},onFetchReqActive:function(){return e(O.V())},onFetchCnt:function(t,a,n,i,r){return e(O.C(t,a,n,i,r))},onFetchCntReset:function(){return e(O.D())},onChangeFav:function(t,a,n,i,r,o){return e(O.h(t,a,n,i,r,o))},onChangeShareID:function(t,a){return e(O.Cb(t,a))},onChangeTag:function(t){return e(O.p(t))},onFetchVideo:function(t,a){return e(O.gb(t,a))},onChangeCnt:function(t,a,n,i,r){return e(O.d(t,a,n,i,r))}}}))(M))}}]);
//# sourceMappingURL=7.5b7cdf06.chunk.js.map