(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{857:function(t,e,i){"use strict";i.r(e);var n=i(117),s=i(0),a=i.n(s),o=i(24),r=i(98),h=(i(833),i(834)),l=i(39),d=i(89),p=i(2),c=i(4);let m=!0;e.default=Object(r.f)(Object(o.b)(t=>({status:t.auth.status,cnts:t.cnt.cnts,skipCnt:t.cnt.skipCnt,cntTotal:t.cnt.cntTotal,changedFav:t.cnt.changedFav,favChange:t.cnt.favChange,cntErr:t.cnt.cntErr,postVideo:t.cnt.postVideo,videoErr:t.cnt.videoErr,filterDet:t.cnt.filterDet}),t=>({onFetchShareActive:()=>t(c.sb()),onFetchShareCntActive:()=>t(c.rb()),onFetchCntActive:()=>t(c.K()),onFetchNotifyActive:()=>t(c.ib()),onFetchPtActive:()=>t(c.kb()),onFetchQueActive:()=>t(c.mb()),onFetchReqActive:()=>t(c.ob()),onFetchCnt:(e,i,n,s,a)=>t(c.N(e,i,n,s,a)),onFetchCntReset:()=>t(c.O()),onChangeFav:(e,i,n,s,a,o)=>t(c.h(e,i,n,s,a,o)),onChangeShareID:(e,i)=>t(c.fc(e,i)),onChangeTag:e=>t(c.w(e)),onFetchVideo:(e,i)=>t(c.zb(e,i)),onChangeCnt:(e,i,n,s,a)=>t(c.d(e,i,n,s,a))}))(class extends s.Component{constructor(t){super(t),this.onScroll=(()=>{window.innerHeight+Math.ceil(window.pageYOffset+1)>=document.body.offsetHeight&&this.props.onFetchCnt(this.props.userID,"shared",this.state.fetchLimit,this.props.skipCnt+this.state.fetchLimit,this.props.cntTotal)}),this.showUserOptHandler=(t=>{if(this.state.cntOpt&&this.state.cntOpt.id===t)return void this.setState((t,e)=>({cntOpt:Object(p.f)(t.cntOpt,{visible:!t.cntOpt.visible})}));const e={visible:!0,id:t};this.setState({cntOpt:e})}),this.changeFavoriteHandler=((t,e,i,n)=>{this.props.onChangeFav(t,e,i,this.props.changedFav,this.props.userID,n)}),this.showShareHandler=(t=>{this.props.onChangeShareID(t,"question"),this.props.history.push("/index/question/share")}),this.changeMediaHandler=((t,e,i)=>{this.setState({removePrevMedia:{id:t,type:i},removeAnim:!1}),this.animateSlider(t,e,i,900)}),this.removeAnimHandler=(t=>{this.state.removePrevMedia||this.setState({removeAnim:!0})}),this.playVideoHandler=(t=>{this.props.onFetchVideo(t.id,"".concat(window.location.protocol+"//"+window.location.host,"/media/video/").concat(t.videoCnt))}),this.slidePlayHandler=((t,e,i)=>{i.target.setPointerCapture(i.pointerId),this.setState({playerIcnId:t})}),this.clearSlidePlayhandler=(t=>{let e=t.target;e.releasePointerCapture(t.pointerId),e.style.left="0px";let i=document.querySelector(".reuse-que__media--wrapper__icn-move");i&&(i.style.left="42%")}),this.moveSlidePlayHandler=((t,e,i)=>{let n=i.target;if(n.hasPointerCapture&&n.hasPointerCapture(i.pointerId)){let s=i.clientX-n.parentElement.offsetLeft-n.offsetWidth/2;s<-(n.offsetWidth/2+n.offsetWidth/4)?m&&(m=!1,this.animateSlider(t,e,"next",0)):s>n.offsetWidth/2+n.offsetWidth/4&&m&&(m=!1,this.animateSlider(t,e,"prev",0));let a=document.querySelector(".reuse-que__media--wrapper__icn-move");if(a){let t=s/n.offsetWidth*100;a.style.left=t+42+"%"}n.style.left=s+"px"}}),this.animateSlider=((t,e,i,s)=>{setTimeout(()=>{let s=[...this.state.mediaItms],a=s.filter(e=>e.id===t),o={id:t,position:"next"===i?1:e-1};if(a.length>0){var r,h=Object(n.a)(a);try{for(h.s();!(r=h.n()).done;){let n=r.value;(o={id:n.id,position:"next"===i?n.position+=1:n.position-=1}).position>e-1&&(o=Object(p.f)(o,{position:0})),o.position<0&&(o=Object(p.f)(o,{position:e-1}));let a=s.filter(e=>e.id!==t);a.push(o),this.setState({mediaItms:a,removeAnim:!1,removePrevMedia:null,animateItm:{id:t,direction:i}})}}catch(l){h.e(l)}finally{h.f()}}else s.push(o),this.setState({mediaItms:s,removeAnim:!1,removePrevMedia:null,animateItm:{id:t,direction:i}})},s),setTimeout(()=>{m=!0},500)}),this.changeCntHandler=((t,e,i,n)=>{let s=String(e).length>50?String(e).substr(0,50)+"...":e;this.props.onChangeCnt(t,s,i,!1,n)}),this.props.onFetchCntReset();let e=0;e=window.innerHeight>=1200?18:window.innerHeight>=900?12:window.innerHeight>=500?9:6,this.state={cntOpt:null,fetchLimit:e,filterTag:"shared",mediaItms:[],animateItm:null,removeAnim:!1,removePrevMedia:null,playerIcnId:null,animationComplete:!0,scrollEnable:!1}}componentDidMount(){this.props.onFetchCnt(this.props.userID,this.state.filterTag,this.state.fetchLimit,0,0),this.props.onChangeTag("/question")}componentDidUpdate(){this.props.cnts&&this.props.cnts.length>0&&!this.state.scrollEnable&&(window.addEventListener("scroll",this.onScroll,!1),this.setState({scrollEnable:!0}))}componentWillUnmount(){this.props.onFetchCntReset(),window.removeEventListener("scroll",this.onScroll,!1)}render(){let t=a.a.createElement(l.a,null);return this.props.cntErr&&(t=null),this.props.cnts&&0===this.props.cnts.length&&(t=a.a.createElement(d.a,{isAuth:this.props.status,det:"No Shared Question found!",icn:"hand-paper",filter:!0})),this.props.cnts&&this.props.cnts.length>0&&(t=a.a.createElement(h.a,{content:this.props.cnts,media:this.props.media,userOpt:this.showUserOptHandler,showCntOpt:this.state.cntOpt,fav:this.changeFavoriteHandler,changedFav:this.props.changedFav,favChange:this.props.favChange,share:this.showShareHandler,nextMedia:this.changeMediaHandler,prevMedia:this.changeMediaHandler,mediaItms:this.state.mediaItms,removeAnim:this.removeAnimHandler,disableAnim:this.state.removeAnim,animateItm:this.state.animateItm,removePrevMedia:this.state.removePrevMedia,playVideo:this.playVideoHandler,videoErr:this.props.videoErr,video:this.props.postVideo,playerIcnId:this.state.playerIcnId,slidePlay:this.slidePlayHandler,moveSlidePlay:this.moveSlidePlayHandler,clearSlidePlay:this.clearSlidePlayhandler,changeCnt:this.changeCntHandler})),this.props.status||(t=a.a.createElement(d.a,{isAuth:this.props.status,det:"No Shared Question found!",icn:"hand-paper",filter:!0})),t}}))}}]);
//# sourceMappingURL=12.78cff1d7.chunk.js.map