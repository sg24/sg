(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{651:function(e,t,n){},778:function(e,t,n){},795:function(e,t,n){"use strict";n.r(t);var a=n(15),r=n(16),s=n(17),i=n(18),c=n(0),o=n.n(c),l=n(24),p=n(86),h=n(124),u=n.n(h),d=n(93),m=n(125),f=n.n(m),_=n(126),w=n.n(_),v=n(72),g=(n(778),n(651),n(8)),C=n(63),E=n(3),b=n(99),F=function(e){var t=w()(E.c),n=null,a=["reuse-pwt__content--det__user--det"],r=["reuse-pwt__content--det__user--det__opt"],s=null,i=null,c=o.a.createElement("li",{className:"reuse-pwt__content--det__user--det__opt--status",onClick:e.changeCnt},o.a.createElement(g.a,{icon:["far","eye-slash"],className:"icon icon__reuse-pwt--options__dft"}),"Draft"),l=o.a.createElement(g.a,{icon:["far","heart"],className:"icon icon__reuse-pwt--footer__heart"}),p=o.a.createElement("img",{src:e.pwt.userImage,alt:""});"draft"===e.pwt.mode&&(c=o.a.createElement("li",{className:"reuse-pwt__content--det__user--det__opt--status",onClick:e.changeCntPublish},o.a.createElement(g.a,{icon:["far","eye"],className:"icon icon__reuse-pwt--options__dft"}),"Publish")),e.pwt.username&&!e.pwt.userImage&&(p=o.a.createElement(v.a,{name:e.pwt.username,size:"50",round:!0}));var h,u=Object(d.a)(e.changedFav);try{for(u.s();!(h=u.n()).done;){var m=h.value;e.pwt._id===m.id&&(s=m.favAdd,i=m.liked)}}catch(F){u.e(F)}finally{u.f()}e.showCnt&&e.showCnt.visible&&e.showCnt.id===e.pwt._id&&(a.push("reuse-pwt__content--det__user--det__clk"),r.push("reuse-pwt__content--det__user--det__opt--visible")),e.pwt.userOpt&&(n=o.a.createElement("div",{className:a.join(" "),onClick:e.userOpt},o.a.createElement("div",{className:"reuse-pwt__content--det__user--det__mid"}),o.a.createElement("ul",{className:r.join(" ")},o.a.createElement("li",null,o.a.createElement("a",{href:"/edit/poet/".concat(e.pwt._id)},o.a.createElement(g.a,{icon:["far","edit"],className:"icon icon__reuse-pwt--options"}),"Edit")),c,o.a.createElement("li",{onClick:e.deleteCnt},o.a.createElement(g.a,{icon:["far","trash-alt"],className:"icon icon__reuse-pwt--options"}),"Delete")))),e.pwt.liked&&null===i&&(l=o.a.createElement(g.a,{icon:["fas","heart"],className:"icon icon__reuse-pwt--footer__heart"})),i&&(l=o.a.createElement(g.a,{icon:["fas","heart"],className:"icon icon__reuse-pwt--footer__heart"}));var _=o.a.createElement("div",{className:"reuse-pwt"},o.a.createElement("div",{className:"reuse-share"},o.a.createElement("div",{className:"reuse-share__icn",onClick:e.share},o.a.createElement(g.a,{icon:["fas","location-arrow"],className:"icon icon__reuse-share--icn"}))),o.a.createElement("div",{className:"reuse-pwt__content"},o.a.createElement("div",{className:"reuse-pwt__content--title"},o.a.createElement("div",{className:"reuse-pwt__content--title__wrapper"},o.a.createElement("a",{href:"/view/poet/"+e.pwt._id},String(e.pwt.title).length>149?String(e.pwt.title).substr(0,150)+"...":e.pwt.title))),o.a.createElement("div",{className:"reuse-pwt__content--det"},o.a.createElement("div",{className:"reuse-pwt__content--det__user"},o.a.createElement("div",{className:"reuse-pwt__content--det__user--img"},p),o.a.createElement("a",{href:"/user/profile/"+e.pwt.authorID}," ",String(e.pwt.username).substr(0,8)," "),o.a.createElement("div",{className:"reuse-pwt__content--det__user--time"},"@ ",o.a.createElement(f.a,{date:e.pwt.pwtCreated,live:!1,formatter:t})),n))),o.a.createElement("ul",{className:"reuse-pwt__footer"},o.a.createElement("li",null,o.a.createElement("a",{href:"/view/poet/"+e.pwt._id},o.a.createElement(g.a,{icon:["far","smile"],className:"icon icon__reuse-pwt--footer__smile"}),Object(E.d)(e.pwt.helpFull))),o.a.createElement("li",null,o.a.createElement("span",{onClick:e.fav},l),Object(E.d)(null!==s?s:e.pwt.favorite),e.favChange&&e.favChange.id===e.pwt._id?o.a.createElement(b.a,{liked:e.favChange.isLiked}):null),o.a.createElement("li",null,o.a.createElement("a",{href:"/view/poet/"+e.pwt._id},o.a.createElement(g.a,{icon:["far","comment-dots"],className:"icon icon__reuse-pwt--footer__comments"}),Object(E.d)(e.pwt.comment)))));return o.a.createElement(C.a,null,_)},N=function(e){return u()(e.content,"pwtCreated",{reverse:!0}).map(function(t,n){return o.a.createElement(F,{key:n,pwt:t,media:e.media,userOpt:e.userOpt.bind(void 0,t._id),showCnt:e.showCntOpt,fav:e.fav.bind(void 0,t._id,t.liked,t.favorite,"poet"),changedFav:e.changedFav,favChange:e.favChange,share:e.share.bind(void 0,t._id),deleteCnt:e.changeCnt.bind(void 0,t._id,t.title,"delete","poet"),changeCnt:e.changeCnt.bind(void 0,t._id,t.title,"draft","poet")})})},O=n(40),k=n(78),S=n(4),D=function(e){Object(i.a)(n,e);var t=Object(s.a)(n);function n(e){var r;Object(a.a)(this,n),(r=t.call(this,e)).onScroll=function(){window.innerHeight+Math.ceil(window.pageYOffset+1)>=document.body.offsetHeight&&r.props.onFetchCnt(r.props.userID,"poet"!==r.state.filterTag?"filter"===r.state.filterTag?"filter=="+r.props.filterDet:"poet-".concat(r.state.filterTag):"poet",r.state.fetchLimit,r.props.skipCnt+r.state.fetchLimit,r.props.cntTotal)},r.showUserOptHandler=function(e){if(r.state.cntOpt&&r.state.cntOpt.id===e)r.setState(function(e,t){return{cntOpt:Object(E.f)(e.cntOpt,{visible:!e.cntOpt.visible})}});else{var t={visible:!0,id:e};r.setState({cntOpt:t})}},r.changeFavoriteHandler=function(e,t,n,a){r.props.onChangeFav(e,t,n,r.props.changedFav,r.props.userID,a)},r.showShareHandler=function(e){r.props.onChangeShareID(e,"poet"),r.props.history.push("/index/poet/share")},r.changeCntHandler=function(e,t,n,a){var s=String(t).length>50?String(t).substr(0,50)+"...":t;r.props.onChangeCnt(e,s,n,!1,a)},r.props.onFetchCntReset();var s=0;return s=window.innerHeight>=1200?18:window.innerHeight>=900?12:window.innerHeight>=500?9:6,r.state={cntOpt:null,fetchLimit:s,filterTag:"poet",mediaItms:[],animateItm:null,removeAnim:!1,removePrevMedia:null,playerIcnId:null,animationComplete:!0,scrollEnable:!1},r}return Object(r.a)(n,[{key:"componentDidMount",value:function(){this.props.onFetchCnt(this.props.userID,this.state.filterTag,this.state.fetchLimit,0,0),this.props.onChangeTag("/poet")}},{key:"componentDidUpdate",value:function(){if(this.props.cnts&&this.props.cnts.length>0&&!this.state.scrollEnable&&(window.addEventListener("scroll",this.onScroll,!1),this.setState({scrollEnable:!0})),this.props.match.params.id&&this.state.filterTag!==this.props.match.params.id&&"share"!==this.props.match.params.id&&"filter"!==this.props.match.params.id&&"startfilter"!==this.props.match.params.id&&(this.props.onFetchCntReset(),this.props.onFetchCnt(this.props.userID,"poet-".concat(this.props.match.params.id),this.state.fetchLimit,0,0),this.setState({filterTag:this.props.match.params.id})),this.props.startSearch&&this.props.filterDet&&this.props.location.search&&this.state.filterTag!=="filter==".concat(this.props.filterDet)){this.props.onFetchCntReset();var e="filter==".concat(this.props.filterDet);this.props.onFetchCnt(this.props.userID,"poet-"+e,this.state.fetchLimit,0,0),this.setState({filterTag:e})}this.props.startSearch||this.props.match.params.id||"poet"===this.state.filterTag||(this.props.onFetchCntReset(),this.props.onFetchCnt(this.props.userID,"poet",this.state.fetchLimit,0,0),this.setState({filterTag:"poet"}))}},{key:"componentWillUnmount",value:function(){this.props.onFetchCntReset(),window.removeEventListener("scroll",this.onScroll,!1)}},{key:"render",value:function(){var e=o.a.createElement(O.a,null);return this.props.cntErr&&(e=null),this.props.cnts&&0===this.props.cnts.length&&(e=o.a.createElement(k.a,{isAuth:null!==this.props.userID,det:"No content found!",icn:"clone",filter:!0})),this.props.cnts&&0===this.props.cnts.length&&(e=o.a.createElement(k.a,{isAuth:null!==this.props.userID,det:"No content found!",icn:"clone",filter:!0})),this.props.cnts&&this.props.cnts.length>0&&(e=o.a.createElement(N,{content:this.props.cnts,media:this.props.media,userOpt:this.showUserOptHandler,showCntOpt:this.state.cntOpt,fav:this.changeFavoriteHandler,changedFav:this.props.changedFav,favChange:this.props.favChange,share:this.showShareHandler,changeCnt:this.changeCntHandler})),e}}]),n}(c.Component);t.default=Object(p.f)(Object(l.b)(function(e){return{userID:e.auth.userID,cnts:e.cnt.cnts,cntErr:e.cnt.cntErr,skipCnt:e.cnt.skipCnt,cntTotal:e.cnt.cntTotal,changedFav:e.cnt.changedFav,favChange:e.cnt.favChange,filterDet:e.cnt.filterDet,startSearch:e.filter.startSearch}},function(e){return{onFetchShareActive:function(){return e(S.ub())},onFetchShareCntActive:function(){return e(S.tb())},onFetchNotifyActive:function(){return e(S.kb())},onFetchPtActive:function(){return e(S.mb())},onFetchQueActive:function(){return e(S.ob())},onFetchCntActive:function(){return e(S.M())},onFetchReqActive:function(){return e(S.qb())},onFetchCnt:function(t,n,a,r,s){return e(S.P(t,n,a,r,s))},onFetchCntReset:function(){return e(S.Q())},onChangeFav:function(t,n,a,r,s,i){return e(S.h(t,n,a,r,s,i))},onChangeShareID:function(t,n){return e(S.kc(t,n))},onChangeTag:function(t){return e(S.w(t))},onChangeCnt:function(t,n,a,r,s){return e(S.d(t,n,a,r,s))}}})(D))}}]);
//# sourceMappingURL=20.b040279e.chunk.js.map