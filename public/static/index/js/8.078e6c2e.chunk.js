(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{649:function(e,t,a){},673:function(e,t,a){},682:function(e,t,a){"use strict";a.r(t);var n=a(93),i=a(37),r=a(20),s=a(21),o=a(22),c=a(23),d=a(0),l=a.n(d),m=a(24),p=a(86),h=(a(650),a(124)),u=a.n(h),v=a(87),_=a(125),f=a.n(_),g=a(126),E=a.n(g),y=a(72),C=(a(673),a(649),a(3)),w=a(60),b=a(9),I=a(94),N=function(e){var t=E()(C.c),a=null,r=["reuse-ads__footer--details"],s=["reuse-ads__footer--details__options"],o=null,c=null,d=l.a.createElement("li",{className:"reuse-ads__footer--details__options--status",onClick:e.changeCnt},l.a.createElement(b.a,{icon:["far","eye-slash"],className:"icon icon__reuse-ads--options__dft"}),"Draft"),m=l.a.createElement(b.a,{icon:["far","heart"],className:"icon icon__reuse-ads--footer__heart"}),p=l.a.createElement("img",{src:e.cnt.userImage,alt:""});"draft"===e.cnt.mode&&(d=l.a.createElement("li",{className:"reuse-ads__footer--details__options--status",onClick:e.changeCntPublish},l.a.createElement(b.a,{icon:["far","eye"],className:"icon icon__reuse-ads--options__dft"}),"Publish")),e.cnt.username&&!e.cnt.userImage&&(p=l.a.createElement(y.a,{name:e.cnt.username,size:"36",round:!0}));var h,u=Object(n.a)(e.changedFav);try{for(u.s();!(h=u.n()).done;){var _=h.value;e.cnt._id===_.id&&(o=_.favAdd,c=_.liked)}}catch(F){u.e(F)}finally{u.f()}var g=null,N=[].concat(Object(i.a)(e.cnt.snapshot),Object(i.a)(e.cnt.image)),P=null,O=["reuse-ads__media--wrapper"];if(N.length>0){var S,M=!1,k=Object(n.a)(e.mediaItms);try{for(k.s();!(S=k.n()).done;){var H=S.value;H.id===e.cnt._id&&(M=!0,e.animateItm.id===e.cnt._id&&("next"!==e.animateItm.direction||e.removePrevAnim||O.push("reuse-ads__media--wrapper__anim"),"prev"!==e.animateItm.direction||e.removePrevAnim||O.push("reuse-ads__media--wrapper__anim-rev")),e.removePrevMedia&&e.removePrevMedia.id===e.cnt._id&&j(e.removePrevMedia),A(H.position))}}catch(F){k.e(F)}finally{k.f()}M||(e.removePrevMedia&&e.removePrevMedia.id===e.cnt._id&&j(e.removePrevMedia),A(0))}function j(e){"next"===e.type?O.push("reuse-ads__media--wrapper__anim-exit"):O.push("reuse-ads__media--wrapper__anim-exit-rev")}function A(t){var a=N[t],n=a.videoCnt?Object(v.a)({url:"".concat(window.location.protocol+"//"+window.location.host,"/media/image/").concat(a.id)},a,{mediaType:"snapshot"}):Object(v.a)({url:"".concat(window.location.protocol+"//"+window.location.host,"/media/image/").concat(a.id)},a,{mediaType:"image"});n&&"snapshot"===n.mediaType&&(P=e.video&&e.video.id!==n.id?l.a.createElement("div",{className:e.playerIcnId&&e.playerIcnId===e.cnt._id?"reuse-ads__media--wrapper__icn reuse-ads__media--wrapper__icn-move":"reuse-ads__media--wrapper__icn",onClick:e.playVideo.bind(this,n)},l.a.createElement(b.a,{icon:["fas","play-circle"],className:"icon icon__reuse-ads--media__play"})):null),g=l.a.createElement("div",{className:"reuse-ads__media"},l.a.createElement("div",{className:e.video&&e.video.id===n.id?"reuse-ads__media--main-wrapper reuse-ads__media--main-wrapper__load":"reuse-ads__media--main-wrapper"},l.a.createElement("div",{onDragStart:function(){return!1},"touch-action":"pan-y",className:e.disableAnim?"reuse-ads__media--wrapper":O.join(" "),onAnimationEnd:e.removeAnim},P,e.video&&e.video.id===n.id&&e.video.url?l.a.createElement("video",{src:e.video.url,controls:!0,autoPlay:!0},l.a.createElement("p",null,"our browser doesn't support embedded videos")):e.video&&e.video.id===n.id?null:l.a.createElement("img",{draggable:"false",onDragStart:function(){return!1},src:n.url,alt:"advert"}),e.videoErr&&e.videoErr.id===n.id?l.a.createElement("div",{className:"reuse-ads__video-err"},l.a.createElement("div",{className:"reuse-ads__video-err--icn",onClick:e.playVideo.bind(this,n.id,e.cnt.video)},l.a.createElement(b.a,{icon:["fas","redo"],className:"icon icon__reuse-ads--video-err__icn"})),l.a.createElement("h3",null," ",e.videoErr.err.message," ")):null)),N&&N.length>1?l.a.createElement(w.a,null,l.a.createElement("div",{className:"reuse-ads__media--cnt reuse-ads__media--cnt__nxt",onClick:e.nextMedia},l.a.createElement(b.a,{icon:["fas","angle-right"],className:"icon icon__reuse-ads--media__nxt"})),l.a.createElement("div",{className:"reuse-ads__media--cnt reuse-ads__media--cnt__prev",onClick:e.prevMedia},l.a.createElement(b.a,{icon:["fas","angle-left"],className:"icon icon__reuse-ads--media__prev"}))):null)}return e.showCnt&&e.showCnt.visible&&e.index===e.showCnt.id&&(r.push("reuse-ads__footer--details__clk"),s.push("reuse-ads__footer--details__options--visible")),e.cnt.userOpt&&(a=l.a.createElement("div",{className:r.join(" "),onClick:e.userOpt},l.a.createElement("div",{className:"reuse-ads__footer--details__mid"}),l.a.createElement("ul",{className:s.join(" ")},l.a.createElement("li",null,l.a.createElement("a",{href:"/edit/advert/".concat(e.cnt._id)},l.a.createElement(b.a,{icon:["far","edit"],className:"icon icon__reuse-ads--options"}),"Edit")),d,l.a.createElement("li",{onClick:e.deleteCnt},l.a.createElement(b.a,{icon:["far","trash-alt"],className:"icon icon__reuse-ads--options"}),"Delete")))),e.cnt.liked&&null===c&&(m=l.a.createElement(b.a,{icon:["fas","heart"],className:"icon icon__reuse-ads--footer__heart"})),c&&(m=l.a.createElement(b.a,{icon:["fas","heart"],className:"icon icon__reuse-ads--footer__heart"})),l.a.createElement("div",{className:"reuse-ads"},l.a.createElement("div",{className:"reuse-ads__overlaywrapper"},l.a.createElement("div",{className:"reuse-ads__wrapper"},l.a.createElement("ul",{className:"reuse-ads__header"},l.a.createElement("li",null,l.a.createElement("div",{className:"reuse-ads__header--category__img"},p),l.a.createElement("div",{className:"reuse-ads__header--category__det"},l.a.createElement("div",{className:"reuse-ads__header--category__det--name"},l.a.createElement("a",{href:"/user/profile/".concat(e.cnt.authorID)}," ",e.cnt.username," ")),l.a.createElement("div",{className:"reuse-ads__header--category__det--timePosted"},"@ ",l.a.createElement(f.a,{date:e.cnt.created,live:!1,formatter:t})))),l.a.createElement("li",null,l.a.createElement("p",{className:"reuse-ads__header--share__category"},l.a.createElement(b.a,{icon:e.cnt.category.length>1?["fas","tags"]:["fas","tag"],className:"icon icon__reuse-ads--header__tag"}),e.cnt.category[0]),l.a.createElement("div",{className:"reuse-share"},l.a.createElement("div",{className:"reuse-share__icn",onClick:e.share},l.a.createElement(b.a,{icon:["fas","location-arrow"],className:"icon icon__reuse-share--icn"}))))),g,l.a.createElement("p",{className:"reuse-ads__title"}," ",l.a.createElement("a",{href:"/view/advert/"+e.cnt._id},e.cnt.title)),l.a.createElement("p",{className:"reuse-ads__description"},l.a.createElement("a",{href:"/view/advert/"+e.cnt._id},String(e.cnt.desc).length>149?String(e.cnt.desc).substr(0,150)+"...":e.cnt.desc)),l.a.createElement("div",{className:"reuse-ads__footer"},l.a.createElement("ul",{className:"reuse-ads__footer--list"},l.a.createElement("li",null,l.a.createElement(b.a,{icon:["far","eye"],className:"icon icon__reuse-ads--footer__eye"}),Object(C.d)(e.cnt.view)),l.a.createElement("li",{className:"reuse-ads__footer--list__item-middle"},l.a.createElement(b.a,{icon:["far","comments"],className:"icon icon__reuse-ads--footer__chats"}),Object(C.d)(e.cnt.comment)),l.a.createElement("li",null,l.a.createElement("span",{onClick:e.fav},m),Object(C.d)(null!==o?o:e.cnt.favorite),e.favChange&&e.favChange.id===e.cnt._id?l.a.createElement(I.a,{liked:e.favChange.isLiked}):null)),a))))},P=function(e){return u()(e.content,"cntCreated",{reverse:!0}).map(function(t,a){return l.a.createElement(N,{key:a,index:t._id,cnt:t,media:e.media,userOpt:e.userOpt.bind(void 0,t._id),showCnt:e.showCntOpt,fav:e.fav.bind(void 0,t._id,t.liked,t.favorite,"advert"),changedFav:e.changedFav,favChange:e.favChange,share:e.share.bind(void 0,t._id),nextMedia:e.nextMedia.bind(void 0,t._id,t.snapshot.length+t.image.length,"next"),prevMedia:e.prevMedia.bind(void 0,t._id,t.snapshot.length+t.image.length,"prev"),mediaItms:e.mediaItms,removeAnim:e.removeAnim,disableAnim:e.disableAnim,animateItm:e.animateItm,removePrevMedia:e.removePrevMedia,playVideo:e.playVideo,videoErr:e.videoErr,playerIcnId:e.playerIcnId,slidePlay:e.slidePlay,moveSlidePlay:e.moveSlidePlay,clearSlidePlay:e.clearSlidePlay,video:e.video,deleteCnt:e.changeCnt.bind(void 0,t._id,t.title,"delete","advert"),changeCnt:e.changeCnt.bind(void 0,t._id,t.title,"draft","advert")})})},O=a(40),S=a(78),M=a(5),k=!0,H=function(e){Object(c.a)(a,e);var t=Object(o.a)(a);function a(e){var s;Object(r.a)(this,a),(s=t.call(this,e)).onScroll=function(){window.innerHeight+Math.ceil(window.pageYOffset+1)>=document.body.offsetHeight&&s.props.onFetchCnt(s.props.userID,"advert"!==s.state.filterTag?"filter"===s.state.filterTag?"filter=="+s.props.filterDet:"advert-".concat(s.state.filterTag):"post",s.state.fetchLimit,s.props.skipCnt+s.state.fetchLimit,s.props.cntTotal)},s.showUserOptHandler=function(e){if(s.state.cntOpt&&s.state.cntOpt.id===e)s.setState(function(e,t){return{cntOpt:Object(C.f)(e.cntOpt,{visible:!e.cntOpt.visible})}});else{var t={visible:!0,id:e};s.setState({cntOpt:t})}},s.changeFavoriteHandler=function(e,t,a,n){s.props.onChangeFav(e,t,a,s.props.changedFav,s.props.userID,n)},s.showShareHandler=function(e){s.props.onChangeShareID(e,"advert"),s.props.history.push("/index/advert/share")},s.changeMediaHandler=function(e,t,a){s.setState({removePrevMedia:{id:e,type:a},removeAnim:!1}),s.animateSlider(e,t,a,900)},s.removeAnimHandler=function(e){s.state.removePrevMedia||s.setState({removeAnim:!0})},s.playVideoHandler=function(e){s.props.onFetchVideo(e.id,"".concat(window.location.protocol+"//"+window.location.host,"/media/video/").concat(e.videoCnt))},s.slidePlayHandler=function(e,t,a){a.target.setPointerCapture(a.pointerId),s.setState({playerIcnId:e})},s.clearSlidePlayhandler=function(e){var t=e.target;t.releasePointerCapture(e.pointerId),t.style.left="0px";var a=document.querySelector(".reuse-ads__media--wrapper__icn-move");a&&(a.style.left="45%")},s.moveSlidePlayHandler=function(e,t,a){var n=a.target;if(n.hasPointerCapture&&n.hasPointerCapture(a.pointerId)){var i=a.clientX-n.parentElement.offsetLeft-n.offsetWidth/2;i<-(n.offsetWidth/2+n.offsetWidth/4)?k&&(k=!1,s.animateSlider(e,t,"next",0)):i>n.offsetWidth/2+n.offsetWidth/4&&k&&(k=!1,s.animateSlider(e,t,"prev",0));var r=document.querySelector(".reuse-ads__media--wrapper__icn-move");if(r){var o=i/n.offsetWidth*100;r.style.left=o+45+"%"}n.style.left=i+"px"}},s.animateSlider=function(e,t,a,r){setTimeout(function(){var r=Object(i.a)(s.state.mediaItms),o=r.filter(function(t){return t.id===e}),c={id:e,position:"next"===a?t>1?1:0:t-1};if(o.length>0){var d,l=Object(n.a)(o);try{for(l.s();!(d=l.n()).done;){var m=d.value;(c={id:m.id,position:"next"===a?m.position+=1:m.position-=1}).position>t-1&&(c=Object(C.f)(c,{position:0})),c.position<0&&(c=Object(C.f)(c,{position:t-1}));var p=r.filter(function(t){return t.id!==e});p.push(c),s.setState({mediaItms:p,removeAnim:!1,removePrevMedia:null,animateItm:{id:e,direction:a}})}}catch(h){l.e(h)}finally{l.f()}}else r.push(c),s.setState({mediaItms:r,removeAnim:!1,removePrevMedia:null,animateItm:{id:e,direction:a}})},r),setTimeout(function(){k=!0},500)},s.changeCntHandler=function(e,t,a,n){var i=String(t).length>50?String(t).substr(0,50)+"...":t;s.props.onChangeCnt(e,i,a,!1,n)},s.props.onFetchCntReset();var o=0;return o=window.innerHeight>=1200?12:window.innerHeight>=900?10:window.innerHeight>=500?9:6,s.state={cntOpt:null,fetchLimit:o,filterTag:"advert",mediaItms:[],animateItm:null,removeAnim:!1,removePrevMedia:null,playerIcnId:null,animationComplete:!0,scrollEnable:!1},s}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.props.onFetchCnt(this.props.userID,this.state.filterTag,this.state.fetchLimit,0,0),this.props.onChangeTag("/advert")}},{key:"componentDidUpdate",value:function(){this.props.cnts&&this.props.cnts.length>0&&!this.state.scrollEnable&&(window.addEventListener("scroll",this.onScroll,!1),this.setState({scrollEnable:!0})),this.props.match.params.id&&this.state.filterTag!==this.props.match.params.id&&"share"!==this.props.match.params.id&&"filter"!==this.props.match.params.id&&"startfilter"!==this.props.match.params.id&&(this.props.onFetchCntReset(),this.props.onFetchCnt(this.props.userID,"advert-".concat(this.props.match.params.id),this.state.fetchLimit,0,0),this.setState({filterTag:this.props.match.params.id}))}},{key:"componentWillUnmount",value:function(){this.props.onFetchCntReset(),window.removeEventListener("scroll",this.onScroll,!1)}},{key:"render",value:function(){var e=l.a.createElement(O.a,null);return this.props.postErr&&(e=null),this.props.cnts&&0===this.props.cnts.length&&(e=l.a.createElement(S.a,{isAuth:null!==this.props.userID,det:"No content found!",icn:"clone",filter:!0})),this.props.cnts&&0===this.props.cnts.length&&(e=l.a.createElement(S.a,{isAuth:null!==this.props.userID,det:"No content found!",icn:"clone",filter:!0})),this.props.cnts&&this.props.cnts.length>0&&(e=l.a.createElement(P,{content:this.props.cnts,media:this.props.media,userOpt:this.showUserOptHandler,showCntOpt:this.state.cntOpt,fav:this.changeFavoriteHandler,changedFav:this.props.changedFav,favChange:this.props.favChange,share:this.showShareHandler,nextMedia:this.changeMediaHandler,prevMedia:this.changeMediaHandler,mediaItms:this.state.mediaItms,removeAnim:this.removeAnimHandler,disableAnim:this.state.removeAnim,animateItm:this.state.animateItm,removePrevMedia:this.state.removePrevMedia,playVideo:this.playVideoHandler,videoErr:this.props.videoErr,video:this.props.postVideo,playerIcnId:this.state.playerIcnId,slidePlay:this.slidePlayHandler,moveSlidePlay:this.moveSlidePlayHandler,clearSlidePlay:this.clearSlidePlayhandler,changeCnt:this.changeCntHandler})),e}}]),a}(d.Component);t.default=Object(p.f)(Object(m.b)(function(e){return{userID:e.auth.userID,cnts:e.cnt.cnts,skipCnt:e.cnt.skipCnt,cntTotal:e.cnt.cntTotal,changedFav:e.cnt.changedFav,favChange:e.cnt.favChange,cntErr:e.cnt.cntErr,postVideo:e.cnt.postVideo,videoErr:e.cnt.videoErr,filterDet:e.cnt.filterDet}},function(e){return{onFetchCnt:function(t,a,n,i,r){return e(M.N(t,a,n,i,r))},onFetchCntReset:function(){return e(M.O())},onChangeFav:function(t,a,n,i,r,s){return e(M.h(t,a,n,i,r,s))},onChangeShareID:function(t,a){return e(M.ic(t,a))},onChangeTag:function(t){return e(M.w(t))},onFetchVideo:function(t,a){return e(M.Cb(t,a))},onChangeCnt:function(t,a,n,i,r){return e(M.d(t,a,n,i,r))}}})(H))}}]);
//# sourceMappingURL=8.078e6c2e.chunk.js.map