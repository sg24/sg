(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{651:function(e,t,n){},655:function(e,t,n){"use strict";var a=n(87),i=n(15),r=n(16),o=n(17),s=n(18),c=n(0),l=n.n(c),d=n(8),u=n(803),m=n(790),p=(n(656),function(e){Object(s.a)(n,e);var t=Object(o.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={items:e.props.images,currentIndex:0,video:null,isNext:!0},e.prevMediaHandler=function(){var t=e.state.currentIndex,n=e.state.items.length;t<1&&(t=n),t-=1,e.setState({currentIndex:t,isNext:!1})},e.nextMediaHandler=function(){var t=e.state.currentIndex;t===e.state.items.length-1&&(t=-1),t+=1,e.setState({currentIndex:t,isNext:!0})},e.playVideoHandler=function(t){e.setState({video:{url:"".concat(window.location.protocol+"//"+window.location.host,"/media/video/").concat(t.videoCnt),id:t.id}})},e}return Object(r.a)(n,[{key:"render",value:function(){var e=this.state.currentIndex,t=this.state.isNext,n=this.state.items[e],i=n.videoCnt?Object(a.a)({url:"".concat(window.location.protocol+"//"+window.location.host,"/media/image/").concat(n.id)},n,{mediaType:"snapshot"}):Object(a.a)({url:"".concat(window.location.protocol+"//"+window.location.host,"/media/image/").concat(n.id)},n,{mediaType:"image"}),r=null,o=null;i&&"snapshot"===i.mediaType&&(r=l.a.createElement("div",{className:this.props.playClass,onClick:this.playVideoHandler.bind(this,n)},l.a.createElement(d.a,{icon:["fas","play-circle"],className:this.props.playIcnClass}))),this.state.items.length>1&&(o=l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:this.props.nextClass,onClick:this.nextMediaHandler},l.a.createElement(d.a,{icon:["fas","angle-right"],className:this.props.nextIcnClass})),l.a.createElement("div",{className:this.props.prevClass,onClick:this.prevMediaHandler},l.a.createElement(d.a,{icon:["fas","angle-left"],className:this.props.prevIcnClass}))));var s=l.a.createElement("img",{alt:"",src:i.url});return this.state.video&&this.state.video.id===i.id&&this.state.video.url&&(r=null,s=l.a.createElement("video",{src:this.state.video.url,controls:!0,autoPlay:!0},l.a.createElement("p",null,"our browser doesn't support embedded videos"))),l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:this.props.wrapperClass},l.a.createElement(u.a,{component:null},l.a.createElement(m.a,{key:e,classNames:{enter:t?"enter-next":"enter-prev",enterActive:"enter-active",exit:"exit",exitActive:t?"exit-active-next":"exit-active-prev"},timeout:500},l.a.createElement("div",{className:"reuse-cnt__media--currentIndex",key:e},r,s)))),o)}}]),n}(c.Component));t.a=p},656:function(e,t,n){},783:function(e,t,n){},801:function(e,t,n){"use strict";n.r(t);var a=n(93),i=n(37),r=n(15),o=n(16),s=n(17),c=n(18),l=n(0),d=n.n(l),u=n(24),m=n(86),p=(n(662),n(124)),h=n.n(p),v=n(125),f=n.n(v),_=n(126),g=n.n(_),C=n(72),w=(n(783),n(651),n(3)),E=n(8),y=n(94),b=n(655),I=function(e){var t=g()(w.c),n=null,r=["reuse-around__footer--details"],o=["reuse-around__footer--details__options"],s=String(e.cnt.post).length>149?String(e.cnt.post).substr(0,150)+"...":e.cnt.post,c=null,l=null,u=d.a.createElement("img",{src:e.cnt.userImage,alt:""});e.cnt.username&&!e.cnt.userImage&&(u=d.a.createElement(C.a,{name:e.cnt.username,size:"36",round:!0}));var m,p=d.a.createElement(E.a,{icon:["far","heart"],className:"icon icon__reuse-around--footer__heart"}),h=Object(a.a)(e.changedFav);try{for(h.s();!(m=h.n()).done;){var v=m.value;e.cnt._id===v.id&&(l=v.favAdd,c=v.liked)}}catch(P){h.e(P)}finally{h.f()}e.cnt.liked&&null===c&&(p=d.a.createElement(E.a,{icon:["fas","heart"],className:"icon icon__reuse-around--footer__heart"})),c&&(p=d.a.createElement(E.a,{icon:["fas","heart"],className:"icon icon__reuse-around--footer__heart"}));var _=null,I=[].concat(Object(i.a)(e.cnt.snapshot),Object(i.a)(e.cnt.image));return I.length>0&&(_=d.a.createElement("div",{className:"reuse-around__media"},d.a.createElement("div",{className:"reuse-around__media--main-wrapper",onClick:e.preview.bind(void 0,I)},d.a.createElement(b.a,{images:I,wrapperClass:"reuse-around__media--wrapper",prevClass:"reuse-around__media--cnt reuse-around__media--cnt__prev",prevIcnClass:"icon icon__reuse-around--media__prev",nextClass:"reuse-around__media--cnt reuse-around__media--cnt__nxt",nextIcnClass:"icon icon__reuse-around--media__nxt",playClass:"reuse-around__media--wrapper__icn",playIcnClass:"icon icon__reuse-around--media__play"})))),e.showCnt&&e.showCnt.visible&&e.index===e.showCnt.id&&(r.push("reuse-around__footer--details__clk"),o.push("reuse-around__footer--details__options--visible")),e.cnt.userOpt&&(n=d.a.createElement("div",{className:r.join(" "),onClick:e.userOpt},d.a.createElement("div",{className:"reuse-around__footer--details__mid"}),d.a.createElement("ul",{className:o.join(" ")},d.a.createElement("li",{onClick:e.deleteCnt},d.a.createElement(E.a,{icon:["far","trash-alt"],className:"icon icon__reuse-around--options"}),"Delete"),d.a.createElement("li",{onClick:e.editCnt},d.a.createElement(E.a,{icon:["far","edit"],className:"icon icon__reuse-around--options"}),"Edit")))),d.a.createElement("div",{className:"reuse-around"},d.a.createElement("div",{className:"reuse-around__overlaywrapper"},d.a.createElement("div",{className:"reuse-around__wrapper"},d.a.createElement("ul",{className:"reuse-around__header"},d.a.createElement("li",null,d.a.createElement("div",{className:"reuse-around__header--category__img"},u),d.a.createElement("div",{className:"reuse-around__header--category__det"},d.a.createElement("div",{className:"reuse-around__header--category__det--name"},d.a.createElement("a",{href:"/user/profile/".concat(e.cnt.authorID)}," ",e.cnt.username," ")),d.a.createElement("div",{className:"reuse-around__header--category__det--timePosted"},"@ ",d.a.createElement(f.a,{date:e.cnt.created,live:!1,formatter:t})))),d.a.createElement("li",null)),_,d.a.createElement("p",{className:"reuse-around__title",onClick:e.showPost}," ",s),d.a.createElement("div",{className:"reuse-around__footer"},d.a.createElement("ul",{className:"reuse-around__footer--list"},d.a.createElement("li",{onClick:e.showChat},d.a.createElement(E.a,{icon:["far","eye"],className:"icon icon__reuse-around--footer__eye"}),Object(w.d)(e.cnt.view)),d.a.createElement("li",{className:"reuse-around__footer--list__item-middle",onClick:e.showChat},d.a.createElement(E.a,{icon:["far","comments"],className:"icon icon__reuse-around--footer__chats"}),Object(w.d)(e.cnt.comment)),d.a.createElement("li",{onClick:e.fav},p,Object(w.d)(null!==l?l:e.cnt.favorite),e.favChange&&e.favChange.id===e.cnt._id?d.a.createElement(y.a,{liked:e.favChange.isLiked}):null)),n))))},P=function(e){return h()(e.content,"created",{reverse:!0}).map(function(t,n){return d.a.createElement(I,{key:n,index:t._id,cnt:t,media:e.media,userOpt:e.userOpt.bind(void 0,t._id),showCnt:e.showCntOpt,fav:e.fav.bind(void 0,t._id,t.liked,t.favorite,"aroundme"),changedFav:e.changedFav,favChange:e.favChange,nextMedia:e.nextMedia.bind(void 0,t._id,t.snapshot.length+t.image.length,"next"),prevMedia:e.prevMedia.bind(void 0,t._id,t.snapshot.length+t.image.length,"prev"),mediaItms:e.mediaItms,removeAnim:e.removeAnim,disableAnim:e.disableAnim,animateItm:e.animateItm,removePrevMedia:e.removePrevMedia,playVideo:e.playVideo,videoErr:e.videoErr,playerIcnId:e.playerIcnId,slidePlay:e.slidePlay,moveSlidePlay:e.moveSlidePlay,clearSlidePlay:e.clearSlidePlay,video:e.video,deleteCnt:e.changeCnt.bind(void 0,t._id,t.post,"delete","aroundme"),editCnt:e.editCnt.bind(void 0,t._id),showPost:e.showPost.bind(void 0,{post:t.post,id:t._id}),showChat:e.showChat.bind(void 0,t._id),preview:e.preview})})},O=n(40),x=n(78),N=n(4),S=!0,H=function(e){Object(c.a)(n,e);var t=Object(s.a)(n);function n(e){var o;Object(r.a)(this,n),(o=t.call(this,e)).onScroll=function(){window.innerHeight+Math.ceil(window.pageYOffset+1)>=document.body.offsetHeight&&o.props.onFetchCnt(o.props.userID,"aroundme"!==o.state.filterTag?"filter"===o.state.filterTag?"filter=="+o.props.filterDet:"aroundme-".concat(o.state.filterTag):"aroundme",o.state.fetchLimit,o.props.skipCnt+o.state.fetchLimit,o.props.cntTotal)},o.showUserOptHandler=function(e){if(o.state.cntOpt&&o.state.cntOpt.id===e)o.setState(function(e,t){return{cntOpt:Object(w.f)(e.cntOpt,{visible:!e.cntOpt.visible})}});else{var t={visible:!0,id:e};o.setState({cntOpt:t})}},o.changeMediaHandler=function(e,t,n){o.setState({removePrevMedia:{id:e,type:n},removeAnim:!1}),o.animateSlider(e,t,n,900)},o.removeAnimHandler=function(e){o.state.removePrevMedia||o.setState({removeAnim:!0})},o.playVideoHandler=function(e){o.props.onFetchVideo(e.id,"".concat(window.location.protocol+"//"+window.location.host,"/media/video/").concat(e.videoCnt))},o.slidePlayHandler=function(e,t,n){n.target.setPointerCapture(n.pointerId),o.setState({playerIcnId:e})},o.clearSlidePlayhandler=function(e){var t=e.target;t.releasePointerCapture(e.pointerId),t.style.left="0px";var n=document.querySelector(".reuse-around__media--wrapper__icn-move");n&&(n.style.left="45%")},o.moveSlidePlayHandler=function(e,t,n){var a=n.target;if(a.hasPointerCapture&&a.hasPointerCapture(n.pointerId)){var i=n.clientX-a.parentElement.offsetLeft-a.offsetWidth/2;i<-(a.offsetWidth/2+a.offsetWidth/4)?S&&(S=!1,o.animateSlider(e,t,"next",0)):i>a.offsetWidth/2+a.offsetWidth/4&&S&&(S=!1,o.animateSlider(e,t,"prev",0));var r=document.querySelector(".reuse-around__media--wrapper__icn-move");if(r){var s=i/a.offsetWidth*100;r.style.left=s+45+"%"}a.style.left=i+"px"}},o.animateSlider=function(e,t,n,r){setTimeout(function(){var r=Object(i.a)(o.state.mediaItms),s=r.filter(function(t){return t.id===e}),c={id:e,position:"next"===n?t>1?1:0:t-1};if(s.length>0){var l,d=Object(a.a)(s);try{for(d.s();!(l=d.n()).done;){var u=l.value;(c={id:u.id,position:"next"===n?u.position+=1:u.position-=1}).position>t-1&&(c=Object(w.f)(c,{position:0})),c.position<0&&(c=Object(w.f)(c,{position:t-1}));var m=r.filter(function(t){return t.id!==e});m.push(c),o.setState({mediaItms:m,removeAnim:!1,removePrevMedia:null,animateItm:{id:e,direction:n}})}}catch(p){d.e(p)}finally{d.f()}}else r.push(c),o.setState({mediaItms:r,removeAnim:!1,removePrevMedia:null,animateItm:{id:e,direction:n}})},r),setTimeout(function(){S=!0},500)},o.changeCntHandler=function(e,t,n,a){var i=String(t).length>50?String(t).substr(0,50)+"...":String(t).length<1?"Post":t;o.props.onChangeCnt(e,i,n,!1,a)},o.editCntHandler=function(e){o.props.history.push("/index/edit/".concat(e))},o.showChatHandler=function(e){o.props.history.push("/index/aroundme/".concat(e))},o.showPostHandler=function(e){o.props.onSetPost(e)},o.previewHandler=function(e){o.props.history.push("/index/preview"),o.props.onShowPreview(e)},o.changeFavoriteHandler=function(e,t,n,a){o.props.onChangeFav(e,t,n,o.props.changedFav,o.props.userID,a)},o.props.onFetchCntReset();var s=0;return s=window.innerHeight>=1200?12:window.innerHeight>=900?10:window.innerHeight>=500?9:6,o.state={cntOpt:null,fetchLimit:s,filterTag:"aroundme",mediaItms:[],animateItm:null,removeAnim:!1,removePrevMedia:null,playerIcnId:null,animationComplete:!0,scrollEnable:!1},o}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.props.onFetchCnt(this.props.userID,this.state.filterTag,this.state.fetchLimit,0,0),this.props.onChangeTag("/aroundme")}},{key:"componentDidUpdate",value:function(){this.props.cnts&&this.props.cnts.length>0&&!this.state.scrollEnable&&(window.addEventListener("scroll",this.onScroll,!1),this.setState({scrollEnable:!0}))}},{key:"componentWillUnmount",value:function(){this.props.onFetchCntReset(),window.removeEventListener("scroll",this.onScroll,!1)}},{key:"render",value:function(){var e=d.a.createElement(O.a,null);return this.props.postErr&&(e=null),this.props.cnts&&0===this.props.cnts.length&&(e=d.a.createElement(x.a,{isAuth:null!==this.props.userID,det:"No content found!",icn:"clone",filter:!0})),this.props.cnts&&0===this.props.cnts.length&&(e=d.a.createElement(x.a,{isAuth:null!==this.props.userID,det:"No content found!",icn:"clone",filter:!0})),this.props.cnts&&this.props.cnts.length>0&&this.props.status&&(e=d.a.createElement(P,{content:this.props.cnts,media:this.props.media,userOpt:this.showUserOptHandler,showCntOpt:this.state.cntOpt,fav:this.changeFavoriteHandler,changedFav:this.props.changedFav,favChange:this.props.favChange,nextMedia:this.changeMediaHandler,prevMedia:this.changeMediaHandler,mediaItms:this.state.mediaItms,removeAnim:this.removeAnimHandler,disableAnim:this.state.removeAnim,animateItm:this.state.animateItm,removePrevMedia:this.state.removePrevMedia,playVideo:this.playVideoHandler,videoErr:this.props.videoErr,video:this.props.postVideo,playerIcnId:this.state.playerIcnId,slidePlay:this.slidePlayHandler,moveSlidePlay:this.moveSlidePlayHandler,clearSlidePlay:this.clearSlidePlayhandler,changeCnt:this.changeCntHandler,showPost:this.showPostHandler,showChat:this.showChatHandler,editCnt:this.editCntHandler,preview:this.previewHandler})),this.props.status||(e=d.a.createElement(x.a,{isAuth:this.props.status,det:"No content found!",icn:"clone",filter:!0})),e}}]),n}(l.Component);t.default=Object(m.f)(Object(u.b)(function(e){return{userID:e.auth.userID,status:e.auth.status,cnts:e.cnt.cnts,skipCnt:e.cnt.skipCnt,cntTotal:e.cnt.cntTotal,changedFav:e.cnt.changedFav,favChange:e.cnt.favChange,cntErr:e.cnt.cntErr,postVideo:e.cnt.postVideo,videoErr:e.cnt.videoErr,filterDet:e.cnt.filterDet}},function(e){return{onFetchCnt:function(t,n,a,i,r){return e(N.P(t,n,a,i,r))},onFetchCntReset:function(){return e(N.Q())},onChangeTag:function(t){return e(N.w(t))},onFetchVideo:function(t,n){return e(N.Db(t,n))},onChangeFav:function(t,n,a,i,r,o){return e(N.h(t,n,a,i,r,o))},onChangeCnt:function(t,n,a,i,r){return e(N.d(t,n,a,i,r))},onShowPreview:function(t){return e(N.tc(t))},onSetPost:function(t){return e(N.rc(t))}}})(H))}}]);
//# sourceMappingURL=14.3104204b.chunk.js.map